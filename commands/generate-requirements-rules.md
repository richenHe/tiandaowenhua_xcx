# 生成需求规则文档命令规则

## 一、命令名称

**生成需求规则文档（Generate Requirements Rules Document）**

---

## 二、命令用途

基于现有的详细需求文档，生成一个简洁的需求规则概述文档，用于：
- 快速了解项目全貌
- 作为开发团队的快速参考手册
- 提供详细需求文档的索引和导航
- 便于新成员快速上手项目

---






## 三、生成指令模板

### 指令格式

```
请基于 @{详细需求文档名称} 生成一个需求规则文档，要求如下：

1. 文档类型：需求规则概述文档（PRD Summary）
2. 输出路径：reference/requirements-rules.md
3. 文档结构：参考PRD标准模板，包含以下核心部分：
   - 执行摘要
   - 使命声明与目标用户
   - 核心业务规则
   - 功能需求
   - 数据模型规范
   - 业务流程规则
   - 技术架构与技术栈
   - API接口规范
   - 风险管理与缓解策略
   - 实施计划与验收标准
   - 附录：术语表

4. 编写原则：
   - 简洁性：每个章节简要概述核心要点
   - 引用完整性：所有详细内容通过Markdown链接引用到原文档
   - 结构清晰：使用标题、列表、表格组织内容
   - 可追溯性：每个引用都指向具体章节
   - 独立性：文档本身可独立阅读，了解项目全貌

5. 引用格式：
   - 使用相对路径：`../需求文档.md#章节锚点`
   - 每个章节末尾添加"📖 详细内容"区块
   - 提供多个相关链接供深入阅读
```

### 实际使用示例

```
请基于 @需求文档-V2.md 生成一个需求规则文档，要求如下：

1. 输出路径：reference/requirements-rules.md
2. 包含10个核心章节 + 术语表附录
3. 所有功能需求都需要简略总结，但详情做引用处理
4. 使用表格展示关键对比信息（如功德分vs积分）
5. 每个章节控制在1-2页篇幅
6. 所有详细内容都引用到原需求文档的具体章节
```

---

## 四、文档结构要求

### 4.1 文档头部信息

必须包含以下元信息：

```markdown
# {项目名称}需求规则文档

## 文档信息
- **版本**：V1.0
- **基于**：{原需求文档名称} (版本号)
- **创建日期**：YYYY-MM-DD
- **文档性质**：需求规则概述文档

## 目录
[完整的章节目录，带锚点链接]
```

### 4.2 核心章节结构

每个章节必须包含：

1. **章节标题**：清晰的一级或二级标题
2. **简要概述**：2-3段文字或列表，总结核心内容
3. **关键信息展示**：使用表格、列表、代码块等格式
4. **引用区块**：章节末尾的"📖 详细内容"区块

**标准引用区块格式**：

```markdown
### 📖 详细内容

→ {描述1}：[{链接文字}](../原文档.md#锚点1)  
→ {描述2}：[{链接文字}](../原文档.md#锚点2)  
→ {描述3}：[{链接文字}](../原文档.md#锚点3)
```

### 4.3 附录部分

必须包含：

1. **术语表**：核心业务术语及定义（表格形式）
2. **文档版本历史**：记录版本迭代信息
3. **文档说明**：说明本文档的使用方法和维护策略

---

## 五、内容编写要求

### 5.1 简洁性原则

✅ **正确做法**：
```markdown
### 3.1 功德分与积分互斥规则

**核心原则**：功德分和积分不可同时发放（二选一，仅限推荐奖励）

| 对比项 | 功德分 | 积分 |
|-------|--------|------|
| **性质** | 虚拟奖励分 | 可提现的现金分 |
| **获得方式** | 青鸾大使推荐 | 鸿鹄及以上大使推荐 |

**关键规则**：
1. 青鸾大使推荐 → 只发功德分，无积分
2. 鸿鹄及以上推荐 → 只发积分（优先解冻）
```

❌ **错误做法**：
- 复制粘贴大段原文（超过3段）
- 包含过多技术细节
- 没有提炼核心要点

### 5.2 引用完整性原则

✅ **正确做法**：
```markdown
### 📖 详细内容

→ 奖励系统详情：[需求文档 1.4节](../需求文档-V2.md#14-核心机制说明)  
→ 推荐人机制详情：[需求文档 第二章](../需求文档-V2.md#二推荐人确定机制重要)  
→ 青鸾大使规则：[需求文档 3.1.7.1节](../需求文档-V2.md#青鸾大使)
```

❌ **错误做法**：
- 只说"详见原文档"没有具体链接
- 链接错误或指向不存在的章节
- 没有引用区块

### 5.3 结构清晰原则

✅ **推荐的组织方式**：
- 使用表格对比多个概念
- 使用编号列表展示流程步骤
- 使用无序列表列举功能模块
- 使用引用块突出重要信息
- 使用代码块展示API接口格式

❌ **避免的方式**：
- 大段文字堆砌
- 混乱的层级结构
- 缺少可视化元素

### 5.4 可追溯性原则

每个引用链接必须：
- 使用相对路径（`../原文档.md`）
- 包含具体的章节锚点（`#章节id`）
- 链接文字清晰描述内容（如"需求文档 1.4节：核心机制说明"）
- 可点击跳转到准确位置

### 5.5 独立性原则

文档应该满足：
- 不依赖原文档也能理解项目概况
- 包含所有核心概念的定义
- 提供完整的术语表
- 可作为独立的宣讲材料

---

## 六、章节内容要求

### 6.1 执行摘要（Executive Summary）

**必须包含**：
- 项目名称和背景（2-3段）
- 核心价值主张（3-5点）
- 关键技术指标（列表形式）

**引用链接到**：
- 项目概述章节
- 技术架构章节

### 6.2 使命声明与目标用户（Mission & Target Users）

**必须包含**：
- 产品使命（1句话）
- 目标用户分类（表格形式：用户类型、角色定位、核心需求）
- 用户等级体系（如有）

**引用链接到**：
- 目标用户章节
- 用户角色详情

### 6.3 核心业务规则（Core Business Rules）

**必须包含**：
- 最重要的3-5个业务规则
- 使用表格对比不同规则
- 关键决策点和判断逻辑
- 特殊场景处理规则

**引用链接到**：
- 业务规则详细说明
- 业务流程图
- 计算公式和示例

### 6.4 功能需求（Functional Requirements）

**必须包含**：
- 功能模块树状结构
- 每个模块的简要说明（一句话）
- 前端/后端功能分类

**引用链接到**：
- 每个模块的详细功能说明
- 用户故事
- 原型图

### 6.5 数据模型规范（Data Model Specifications）

**必须包含**：
- 核心数据实体列表（表名+用途）
- 数据实体分类（按业务领域）
- 关键字段说明（核心表）

**引用链接到**：
- 完整表结构定义
- ER图
- 字段详细说明

### 6.6 业务流程规则（Business Process Rules）

**必须包含**：
- 关键业务流程列表（5-10个）
- 每个流程的简要步骤（编号列表）
- 流程中的关键决策点

**引用链接到**：
- 详细流程图（Mermaid图表）
- 流程说明文档
- 异常处理逻辑

### 6.7 技术架构与技术栈（Architecture & Tech Stack）

**必须包含**：
- 架构类型（如Serverless、微服务）
- 技术选型表格（层级、技术、说明）
- 核心组件列表

**引用链接到**：
- 技术架构图
- 技术实现方案
- 部署架构

### 6.8 API接口规范（API Specifications）

**必须包含**：
- API分类列表（按业务模块）
- 每类接口的数量
- 关键接口示例（2-3个）

**引用链接到**：
- 完整API文档
- 接口详细定义
- 请求/响应示例

### 6.9 风险管理与缓解策略（Risks & Mitigation）

**必须包含**：
- 风险分类（6-8类）
- 每类风险的简要描述
- 应对策略概述

**引用链接到**：
- 详细风险分析
- 风险评估矩阵
- 应急预案

### 6.10 实施计划与验收标准（Implementation & Success Criteria）

**必须包含**：
- 版本迭代规划（V1.0/V2.0/V3.0）
- 上线检查清单（核心项）
- 验收标准（性能、功能、安全）

**引用链接到**：
- 详细项目计划
- 完整检查清单
- 测试方案

### 6.11 附录：术语表（Glossary）

**必须包含**：
- 核心业务术语（30+个）
- 技术术语（如有特殊定义）
- 术语分类（按业务领域）
- 表格格式：术语 | 定义

---

## 七、质量检查清单

完成文档后，必须检查以下项目：

### 7.1 格式检查
- [ ] 所有标题层级正确（# ## ### ####）
- [ ] 表格格式完整，对齐美观
- [ ] 列表缩进正确
- [ ] 代码块语法高亮正确
- [ ] 无多余空行或格式混乱

### 7.2 内容检查
- [ ] 每个章节都有简要概述
- [ ] 每个章节都有引用区块
- [ ] 核心概念都有定义
- [ ] 术语表完整
- [ ] 版本信息正确

### 7.3 链接检查
- [ ] 所有引用链接使用相对路径
- [ ] 所有锚点链接指向正确章节
- [ ] 链接文字清晰描述目标内容
- [ ] 目录链接可正常跳转
- [ ] 所有引用链接可访问

### 7.4 完整性检查
- [ ] 包含所有计划的核心章节
- [ ] 术语表涵盖所有核心术语
- [ ] 文档版本历史已记录
- [ ] 文档说明已添加
- [ ] 篇幅控制在15-20页

### 7.5 可读性检查
- [ ] 不依赖原文档也能理解项目概况
- [ ] 技术术语有解释
- [ ] 表格和列表增强可读性
- [ ] 重点信息突出显示
- [ ] 逻辑流畅，易于理解

---

## 八、文档维护规则

### 8.1 更新触发条件

以下情况需要更新需求规则文档：

1. **原需求文档重大更新**：
   - 新增核心功能模块
   - 业务规则调整
   - 技术架构变更
   - 数据模型调整

2. **版本迭代**：
   - 新版本发布
   - 功能上线
   - 架构升级

3. **术语变更**：
   - 新增核心术语
   - 术语定义调整

### 8.2 更新流程

1. 检查原需求文档的变更内容
2. 判断是否影响规则文档的核心章节
3. 更新对应章节的简要概述（如需要）
4. 检查引用链接是否仍然有效
5. 更新文档版本号和版本历史
6. 重新检查质量清单

### 8.3 版本管理

**版本号规则**：
- 主版本号（X.0.0）：重大结构调整
- 次版本号（1.X.0）：新增章节或大幅内容更新
- 修订号（1.0.X）：小幅修正、链接修复、格式优化

**版本历史记录格式**：
```markdown
| 版本 | 日期 | 更新内容 |
|------|------|---------|
| V1.1 | 2026-01-25 | 新增XXX章节，更新业务规则 |
| V1.0 | 2026-01-21 | 初始版本 |
```

---

## 九、常见问题（FAQ）

### Q1: 概述文档的篇幅应该控制在多少？
**A**: 建议控制在15-20页（约400-600行Markdown）。每个章节1-2页，确保简洁但完整。

### Q2: 如何平衡简洁性和完整性？
**A**: 
- 概述文档：只包含最核心的20%内容
- 详细内容：通过引用链接到原文档
- 关键决策点和对比信息使用表格展示
- 复杂流程只列步骤，不展开细节

### Q3: 引用链接的章节锚点如何确定？
**A**: 
- Markdown自动生成的锚点为小写，空格转为连字符
- 如"## 一、项目概述" → `#一项目概述`
- 如"### 1.4 核心机制说明" → `#14-核心机制说明`
- 建议在IDE中测试链接跳转是否正确

### Q4: 术语表应该包含哪些内容？
**A**: 
- 核心业务术语（必须）
- 特殊技术术语（如有自定义）
- 缩写和代号
- 不包含通用技术术语（如API、数据库等）

### Q5: 如果原需求文档结构不清晰怎么办？
**A**: 
- 先按照本规则的10个标准章节组织内容
- 从原文档中提取相关内容归类
- 引用链接指向原文档的多个相关章节
- 在概述文档中提供更清晰的结构

---

## 十、示例模板

完整的需求规则文档模板参见：
- 📄 [requirements-rules.md](./requirements-rules.md) - 天道文化小程序需求规则文档示例

---

## 十一、相关资源

- **PRD标准模板**: 参考产品需求文档（PRD）业界标准
- **Markdown语法**: 使用标准Markdown格式
- **文档最佳实践**: 遵循技术写作最佳实践
- **版本管理**: 使用Git进行版本控制

---

## 文档版本

- **版本**: V1.0
- **创建日期**: 2026-01-21
- **适用范围**: 所有基于详细需求文档生成概述文档的场景
- **维护者**: 项目团队

---

## 附录：快速检查表

使用本命令规则生成需求规则文档时，快速核对：

✅ **结构完整**：10个核心章节 + 术语表 + 版本历史  
✅ **简洁清晰**：每章1-2页，核心要点提炼  
✅ **引用完整**：每章都有"📖 详细内容"区块  
✅ **链接正确**：相对路径 + 章节锚点 + 可点击跳转  
✅ **独立可读**：不依赖原文档也能理解概况  
✅ **格式规范**：标题、表格、列表、代码块格式正确  
✅ **术语完整**：核心术语都在术语表中定义  
✅ **版本信息**：文档头部和版本历史记录完整  
✅ **质量检查**：通过全部质量检查清单  

---

**命令规则制定完成** ✓

