# 设计系统构建 - 快速参考

## 核心概念速查

### 1. Design Tokens（设计令牌）
**一句话**：把设计决策变成变量

```
硬编码                    →  Design Token
--------------------------------
color: #0052D9           →  $color-primary
padding: 24rpx           →  $spacing-m
border-radius: 12rpx     →  $radius-default
```

### 2. DRY 原则
**一句话**：相同的代码只写一次

```
❌ 重复写 3 次
// page1.vue
.card { padding: 24rpx; }

// page2.vue
.card { padding: 24rpx; }

// page3.vue
.card { padding: 24rpx; }

✅ 只写 1 次
// tokens.scss
$spacing-m: 24rpx;

// 所有页面
.card { padding: $spacing-m; }
```

### 3. 组件抽取
**一句话**：把重复的 UI 块变成组件

```
❌ 每个页面都写一遍
<div class="user-info">
  <img src="avatar.png">
  <div>张三</div>
</div>

✅ 抽取为组件
<UserCard name="张三" avatar="avatar.png" />
```

### 4. Playground
**一句话**：所有组件的展示厅

```
playground/index.html
├── Button 所有变体
├── Card 所有变体
└── 其他组件...

作用：
- 可视化查看
- 快速测试
- 活文档
```

---

## 执行流程图

```
┌─────────────────────────────────────────────────────────┐
│  阶段 0：分析（1天）                                      │
│  ┌─────────────────────────────────────────────────┐   │
│  │  1. 浏览所有页面                                 │   │
│  │  2. 标记重复模式（卡片、按钮、颜色...）          │   │
│  │  3. 输出：analysis.md                           │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
                        ↓
┌─────────────────────────────────────────────────────────┐
│  阶段 1：提取 Design Tokens（2天）                        │
│  ┌─────────────────────────────────────────────────┐   │
│  │  1. 从 tdesign-theme.css 提取变量               │   │
│  │  2. 创建 colors.json                            │   │
│  │  3. 创建 spacing.json                           │   │
│  │  4. 创建 radius.json                            │   │
│  │  5. 生成 tokens.scss                            │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
                        ↓
┌─────────────────────────────────────────────────────────┐
│  阶段 2：抽取组件（3天）                                  │
│  ┌─────────────────────────────────────────────────┐   │
│  │  针对每个组件（Button、Card、Input...）：        │   │
│  │                                                  │   │
│  │  1. 查看原型图 CSS                               │   │
│  │     grep "button" prototype-tdesign/...         │   │
│  │                                                  │   │
│  │  2. 创建组件目录                                 │   │
│  │     components/ui/Button/                       │   │
│  │       ├── index.vue                             │   │
│  │       ├── types.ts                              │   │
│  │       └── README.md                             │   │
│  │                                                  │   │
│  │  3. 编写组件（使用 Design Tokens）               │   │
│  │     ✅ background: $color-primary               │   │
│  │     ❌ background: #0052D9                      │   │
│  │                                                  │   │
│  │  4. 编写文档                                     │   │
│  │  5. 添加到 index.ts                             │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
                        ↓
┌─────────────────────────────────────────────────────────┐
│  阶段 3：构建 Playground（1天）                           │
│  ┌─────────────────────────────────────────────────┐   │
│  │  1. 创建 playground/index.html                  │   │
│  │  2. 展示所有组件                                 │   │
│  │     - Button 所有变体                           │   │
│  │     - Card 所有变体                             │   │
│  │     - Input 所有变体                            │   │
│  │     - ...                                       │   │
│  │  3. 展示 Design Tokens                          │   │
│  │     - 颜色色板                                   │   │
│  │     - 间距示例                                   │   │
│  │     - 圆角示例                                   │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
                        ↓
┌─────────────────────────────────────────────────────────┐
│  阶段 4：编写规范（1天）                                  │
│  ┌─────────────────────────────────────────────────┐   │
│  │  1. 组件命名规范                                 │   │
│  │  2. 目录结构规范                                 │   │
│  │  3. 样式编写规范                                 │   │
│  │  4. API 设计规范                                │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
                        ↓
┌─────────────────────────────────────────────────────────┐
│  阶段 5：验收（1天）                                      │
│  ┌─────────────────────────────────────────────────┐   │
│  │  ✓ 所有硬编码已替换为 Design Tokens              │   │
│  │  ✓ 所有组件都在 /components/ui/                 │   │
│  │  ✓ 所有组件都在 Playground 可见                  │   │
│  │  ✓ 没有重复代码                                  │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
```

---

## 每日工作清单

### Day 1：分析
```bash
[ ] 浏览 prototype-tdesign/pages/*.html
[ ] 列出所有页面：ls -R pages/
[ ] 标记重复模式：卡片、按钮、表单...
[ ] 统计颜色使用：grep -r "#0052D9"
[ ] 输出 docs/analysis.md
```

### Day 2-3：Design Tokens
```bash
[ ] 提取颜色：grep "color:" tdesign-theme.css
[ ] 创建 colors.json
[ ] 创建 spacing.json
[ ] 创建 radius.json
[ ] 生成 tokens.scss
[ ] 测试：在一个组件中使用 tokens
```

### Day 4-6：组件抽取
```bash
# 每个组件重复以下步骤：
[ ] 查看原型图 CSS
[ ] 创建组件目录
[ ] 编写 index.vue（使用 tokens！）
[ ] 编写 types.ts
[ ] 编写 README.md
[ ] 添加到 index.ts
[ ] 在 Playground 测试
```

### Day 7：Playground
```bash
[ ] 创建 playground/index.html
[ ] 添加所有组件展示
[ ] 添加 Design Tokens 展示
[ ] 测试所有变体
```

### Day 8：规范文档
```bash
[ ] 编写组件开发规范
[ ] 编写 Design Tokens 使用指南
[ ] 编写贡献指南
```

### Day 9：验收
```bash
[ ] 检查所有硬编码
[ ] 检查重复代码
[ ] 检查组件完整性
[ ] 性能优化
```

---

## 常见问题

### Q1：什么时候抽取组件？
**A**：满足以下任一条件：
- 在 2 个及以上页面重复出现
- 虽然只用一次，但逻辑复杂（>50行）
- 预期未来会复用

### Q2：如何判断是否需要 Design Token？
**A**：问自己：
- 这个值在多处使用吗？→ 需要
- 这个值是设计决策吗？（颜色/间距/圆角）→ 需要
- 这个值可能会改变吗？→ 需要

### Q3：组件粒度如何把握？
**A**：
- 太粗：难以复用（如整个页面）
- 太细：使用复杂（如单个文字）
- **合适**：独立的 UI 块（如按钮、卡片、表单项）

### Q4：Playground 必须要做吗？
**A**：强烈推荐！
- 开发时：快速预览效果
- 测试时：对比原型图
- 协作时：给设计师/PM 看
- 文档化：活的使用手册

---

## 检查清单

### Design Tokens
- [ ] colors.json 包含所有颜色
- [ ] spacing.json 包含所有间距
- [ ] radius.json 包含所有圆角
- [ ] tokens.scss 已生成
- [ ] 没有硬编码的颜色/间距

### 组件库
- [ ] 所有组件在 /components/ui/
- [ ] 每个组件有独立文件夹
- [ ] 每个组件有 index.vue
- [ ] 每个组件有 types.ts
- [ ] 每个组件有 README.md
- [ ] 所有组件在 index.ts 导出

### DRY
- [ ] 没有重复的样式片段
- [ ] 没有重复的组件逻辑
- [ ] 公共样式已提取

### Playground
- [ ] 所有组件可预览
- [ ] 所有变体都展示
- [ ] Design Tokens 可视化
- [ ] 响应式测试

---

## 快速命令

```bash
# 查找硬编码颜色
grep -r "#[0-9A-F]\{6\}" src/ --exclude-dir=node_modules

# 查找重复样式
grep -r "padding: 24rpx" src/

# 统计组件数量
ls src/components/ui/ | wc -l

# 检查未使用的 tokens
grep -r "color-primary" src/ | wc -l

# 生成组件列表
ls -1 src/components/ui/ > component-list.txt
```











