<template>
  <view class="page">
    <td-page-header title="ç­¾ç½²åè®®" />
    
    <scroll-view 
      class="scroll-area" 
      scroll-y 
      :style="{ height: scrollHeight }"
    >
      <view class="page-content">
        
        <!-- åè®®ä¿¡æ¯å¡ç‰‡ -->
        <view class="info-card">
          <view class="card-header">
            <view class="card-title">ğŸ“‹ ä¼ æ’­å¤§ä½¿åˆä½œåè®®</view>
            <view class="status-badge warning">å¾…ç­¾ç½²</view>
          </view>
          <view class="card-body">
            <view class="info-row">
              <text class="info-label">åè®®ç‰ˆæœ¬ï¼š</text>
              <text class="info-value">v1.0</text>
            </view>
            <view class="info-row">
              <text class="info-label">åˆåŒæœŸé™ï¼š</text>
              <text class="info-value">1å¹´</text>
            </view>
            <view class="info-row">
              <text class="info-label">å¤§ä½¿ç­‰çº§ï¼š</text>
              <text class="info-value">é’é¸¾å¤§ä½¿</text>
            </view>
          </view>
        </view>

        <!-- åè®®å†…å®¹ -->
        <view class="t-section-title t-section-title--simple">ğŸ“„ åè®®å†…å®¹</view>
        
        <view class="t-card t-card--bordered" :style="{ marginBottom: '48rpx' }">
          <view class="t-card__body">
            <view 
              :style="{ 
                maxHeight: '800rpx',
                background: '#F5F5F5',
                borderRadius: '12rpx',
                overflow: 'hidden'
              }"
            >
              <scroll-view 
                scroll-y 
                :style="{ 
                  height: '800rpx',
                  padding: '24rpx',
                  fontSize: '26rpx',
                  lineHeight: '1.8',
                  color: '#666',
                  boxSizing: 'border-box'
                }"
              >
              
              <view :style="{ color: '#333', fontSize: '32rpx', marginBottom: '24rpx', textAlign: 'center', fontWeight: '600' }">å¤©é“æ–‡åŒ–ä¼ æ’­å¤§ä½¿åˆä½œåè®®</view>
              
              <view :style="{ marginBottom: '24rpx' }">
                <text :style="{ fontWeight: '600', color: '#333' }">ç”²æ–¹ï¼š</text>å­™è†‘é“å¤©é“æ–‡åŒ–
              </view>
              <view :style="{ marginBottom: '32rpx' }">
                <text :style="{ fontWeight: '600', color: '#333' }">ä¹™æ–¹ï¼š</text>{ç”¨æˆ·å§“å}
              </view>
              
              <view :style="{ marginBottom: '24rpx' }">
                <view :style="{ color: '#333', margin: '32rpx 0 16rpx', fontSize: '28rpx', fontWeight: '600' }">ç¬¬ä¸€æ¡ åè®®ç›®çš„</view>
                <view :style="{ marginBottom: '24rpx' }">
                  ä¸ºäº†æ›´å¥½åœ°ä¼ æ’­å¤©é“æ–‡åŒ–ï¼Œå¼˜æ‰¬å›½å­¦æ™ºæ…§ï¼Œç”²ä¹™åŒæ–¹æœ¬ç€å¹³ç­‰äº’åˆ©ã€å…±åŒå‘å±•çš„åŸåˆ™ï¼Œè¾¾æˆæœ¬åè®®ã€‚
                </view>
              </view>
              
              <view :style="{ marginBottom: '24rpx' }">
                <view :style="{ color: '#333', margin: '32rpx 0 16rpx', fontSize: '28rpx', fontWeight: '600' }">ç¬¬äºŒæ¡ å¤§ä½¿æƒåˆ©ä¸ä¹‰åŠ¡</view>
                <view :style="{ marginBottom: '16rpx', fontWeight: '600', color: '#333' }">ä¹™æ–¹æƒåˆ©ï¼š</view>
                <view :style="{ marginBottom: '8rpx' }">1. æ¨èå­¦å‘˜è´­ä¹°è¯¾ç¨‹å¯è·å¾—åŠŸå¾·åˆ†å’Œç§¯åˆ†å¥–åŠ±</view>
                <view :style="{ marginBottom: '8rpx' }">2. äº«å—å¤§ä½¿ä¸“å±åŸ¹è®­å’Œå­¦ä¹ èµ„æ–™</view>
                <view :style="{ marginBottom: '8rpx' }">3. å‚ä¸å•†å­¦é™¢ç»„ç»‡çš„å„ç±»æ´»åŠ¨</view>
                <view :style="{ marginBottom: '24rpx' }">4. ä½¿ç”¨å¤©é“æ–‡åŒ–å“ç‰Œè¿›è¡Œæ¨å¹¿</view>
                
                <view :style="{ marginBottom: '16rpx', fontWeight: '600', color: '#333' }">ä¹™æ–¹ä¹‰åŠ¡ï¼š</view>
                <view :style="{ marginBottom: '8rpx' }">1. è®¤çœŸå­¦ä¹ å’Œç†è§£å¤©é“æ–‡åŒ–ç†å¿µ</view>
                <view :style="{ marginBottom: '8rpx' }">2. ç§¯ææ¨å¹¿å¤©é“æ–‡åŒ–è¯¾ç¨‹</view>
                <view :style="{ marginBottom: '8rpx' }">3. ç»´æŠ¤å¤©é“æ–‡åŒ–å“ç‰Œå½¢è±¡</view>
                <view :style="{ marginBottom: '24rpx' }">4. ä¸å¾—è¿›è¡Œè™šå‡å®£ä¼ å’Œè¯¯å¯¼æ€§æ¨å¹¿</view>
              </view>
              
              <view :style="{ marginBottom: '24rpx' }">
                <view :style="{ color: '#333', margin: '32rpx 0 16rpx', fontSize: '28rpx', fontWeight: '600' }">ç¬¬ä¸‰æ¡ åŠŸå¾·åˆ†å’Œç§¯åˆ†è§„åˆ™</view>
                <view :style="{ marginBottom: '16rpx', fontWeight: '600', color: '#333' }">é’é¸¾å¤§ä½¿ï¼š</view>
                <view :style="{ marginBottom: '8rpx' }">1. æˆä¸ºæ—¶è·å¾—1688å†»ç»“ç§¯åˆ†</view>
                <view :style="{ marginBottom: '8rpx' }">2. ç¬¬1æ¬¡æ¨èåˆæ¢ç­è§£å†»1688ç§¯åˆ†</view>
                <view :style="{ marginBottom: '8rpx' }">3. ç¬¬2æ¬¡èµ·æ¨èè·å¾—åŠŸå¾·åˆ†ï¼ˆ30%åˆæ¢ç­ï¼Œ20%å…¶ä»–ï¼‰</view>
                <view :style="{ marginBottom: '24rpx' }">4. åŠŸå¾·åˆ†å¯å…‘æ¢è¯¾ç¨‹ã€å¤è®­ã€å’¨è¯¢æœåŠ¡ç­‰</view>
              </view>
              
              <view :style="{ marginBottom: '24rpx' }">
                <view :style="{ color: '#333', margin: '32rpx 0 16rpx', fontSize: '28rpx', fontWeight: '600' }">ç¬¬å››æ¡ æ¨å¹¿è¡Œä¸ºè§„èŒƒ</view>
                <view :style="{ marginBottom: '8rpx' }">1. ä¸å¾—è¿›è¡Œè™šå‡å®£ä¼ </view>
                <view :style="{ marginBottom: '8rpx' }">2. ä¸å¾—è¯¯å¯¼æ¶ˆè´¹è€…</view>
                <view :style="{ marginBottom: '8rpx' }">3. ä¸å¾—æŸå®³å“ç‰Œå½¢è±¡</view>
                <view :style="{ marginBottom: '24rpx' }">4. ä¸å¾—è¿åæ³•å¾‹æ³•è§„</view>
              </view>
              
              <view :style="{ marginBottom: '24rpx' }">
                <view :style="{ color: '#333', margin: '32rpx 0 16rpx', fontSize: '28rpx', fontWeight: '600' }">ç¬¬äº”æ¡ åˆåŒæœŸé™</view>
                <view :style="{ marginBottom: '24rpx' }">
                  æœ¬åè®®è‡ªç­¾ç½²ä¹‹æ—¥èµ·ç”Ÿæ•ˆï¼Œæœ‰æ•ˆæœŸä¸º1å¹´ã€‚åˆ°æœŸå‰30å¤©ï¼ŒåŒæ–¹å¯åå•†ç»­çº¦ã€‚
                </view>
              </view>
              
              <view :style="{ marginBottom: '24rpx' }">
                <view :style="{ color: '#333', margin: '32rpx 0 16rpx', fontSize: '28rpx', fontWeight: '600' }">ç¬¬å…­æ¡ è¿çº¦è´£ä»»</view>
                <view :style="{ marginBottom: '24rpx' }">
                  å¦‚ä¹™æ–¹è¿åæœ¬åè®®çº¦å®šï¼Œç”²æ–¹æœ‰æƒå–æ¶ˆå…¶å¤§ä½¿èµ„æ ¼ï¼Œå¹¶å†»ç»“æœªæç°çš„ç§¯åˆ†ã€‚
                </view>
              </view>
              
              <view :style="{ marginBottom: '24rpx' }">
                <view :style="{ color: '#333', margin: '32rpx 0 16rpx', fontSize: '28rpx', fontWeight: '600' }">ç¬¬ä¸ƒæ¡ äº‰è®®è§£å†³</view>
                <view :style="{ marginBottom: '24rpx' }">
                  å› æœ¬åè®®å¼•èµ·çš„äº‰è®®ï¼ŒåŒæ–¹åº”å‹å¥½åå•†è§£å†³ã€‚åå•†ä¸æˆçš„ï¼Œå¯å‘ç”²æ–¹æ‰€åœ¨åœ°äººæ°‘æ³•é™¢æèµ·è¯‰è®¼ã€‚
                </view>
              </view>
              
              <view :style="{ marginTop: '48rpx', fontStyle: 'italic', textAlign: 'center' }">
                æœ¬åè®®ä¸€å¼ä¸¤ä»½ï¼Œç”²ä¹™åŒæ–¹å„æ‰§ä¸€ä»½ï¼Œå…·æœ‰åŒç­‰æ³•å¾‹æ•ˆåŠ›ã€‚
              </view>
              
              </scroll-view>
            </view>
          </view>
        </view>

        <!-- ç­¾ç½²ç¡®è®¤ -->
        <view class="t-card t-card--bordered" :style="{ marginBottom: '48rpx' }">
          <view class="t-card__body">
            <view 
              @tap="toggleAgree"
              :style="{ 
                display: 'flex', 
                alignItems: 'flex-start', 
                gap: '16rpx',
                padding: '16rpx',
                background: '#F5F5F5',
                borderRadius: '12rpx',
                marginBottom: '32rpx',
                boxSizing: 'border-box'
              }"
            >
              <view :class="['checkbox', { checked: agreed }]">
                <text v-if="agreed">âœ“</text>
              </view>
              <text :style="{ fontSize: '26rpx', color: '#333', flex: '1', lineHeight: '1.5' }">
                æˆ‘å·²ä»”ç»†é˜…è¯»å¹¶å®Œå…¨ç†è§£ä¸Šè¿°åè®®å†…å®¹ï¼Œè‡ªæ„¿ç­¾ç½²æœ¬åè®®
              </text>
            </view>

            <view>
              <view :style="{ fontSize: '28rpx', color: '#333', marginBottom: '16rpx' }">
                <text :style="{ color: '#E34D59', marginRight: '8rpx' }">*</text>æ‰‹æœºå·åå››ä½ç¡®è®¤
              </view>
              <input 
                v-model="phoneLastFour" 
                type="number" 
                maxlength="4" 
                placeholder="è¯·è¾“å…¥æ‰‹æœºå·åå››ä½"
                :style="{ 
                  width: '100%',
                  height: '88rpx',
                  background: '#F5F5F5',
                  borderRadius: '12rpx',
                  padding: '0 24rpx',
                  fontSize: '28rpx',
                  border: '2rpx solid #E5E5E5',
                  boxSizing: 'border-box'
                }"
              />
              <view :style="{ fontSize: '24rpx', color: '#999', marginTop: '8rpx' }">
                ç”¨äºéªŒè¯èº«ä»½ï¼Œç¡®ä¿ç­¾ç½²å®‰å…¨
              </view>
            </view>
          </view>
        </view>

        <!-- ç­¾ç½²è¯´æ˜ -->
        <view 
          :style="{ 
            borderRadius: '16rpx',
            padding: '24rpx',
            marginBottom: '48rpx',
            display: 'flex',
            gap: '16rpx',
            background: '#E6F4FF',
            boxSizing: 'border-box'
          }"
        >
          <view :style="{ fontSize: '32rpx', flexShrink: '0' }">â„¹ï¸</view>
          <view :style="{ flex: '1' }">
            <view :style="{ fontSize: '24rpx', color: '#666', lineHeight: '1.6' }">
              â€¢ ç­¾ç½²ååè®®ç«‹å³ç”Ÿæ•ˆï¼ŒåˆåŒæœŸ1å¹´<br/>
              â€¢ ç­¾ç½²è®°å½•å°†ä¿å­˜åœ¨"æˆ‘çš„åè®®"ä¸­<br/>
              â€¢ å¯éšæ—¶æŸ¥çœ‹å’Œä¸‹è½½åè®®PDFæ–‡ä»¶
            </view>
          </view>
        </view>

        <!-- åº•éƒ¨ç•™ç™½ -->
        <view style="height: 200rpx;"></view>
      </view>
    </scroll-view>

    <!-- åº•éƒ¨ç­¾ç½²æŒ‰é’® -->
    <view class="fixed-bottom">
      <view @tap="handleSign">
        <button class="t-button t-button--theme-primary t-button--variant-base t-button--block t-button--size-large">
          <span class="t-button__text">âœï¸ ç¡®è®¤ç­¾ç½²åè®®</span>
        </button>
      </view>
    </view>
  </view>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue'
import TdPageHeader from '@/components/tdesign/TdPageHeader.vue'

const scrollHeight = computed(() => {
  return 'calc(100vh - var(--status-bar-height) - var(--td-page-header-height) - 120rpx)'
})

const agreed = ref(false)
const phoneLastFour = ref('')

const toggleAgree = () => {
  agreed.value = !agreed.value
}

const handleSign = () => {
  if (!agreed.value) {
    uni.showToast({ title: 'è¯·å…ˆé˜…è¯»å¹¶åŒæ„åè®®', icon: 'none' })
    return
  }
  if (!phoneLastFour.value || phoneLastFour.value.length !== 4) {
    uni.showToast({ title: 'è¯·è¾“å…¥æ‰‹æœºå·åå››ä½', icon: 'none' })
    return
  }

  uni.showToast({
    title: 'ç­¾ç½²æˆåŠŸ',
    icon: 'success',
    duration: 2000
  })
  
  setTimeout(() => {
    uni.navigateTo({
      url: '/pages/ambassador/contract-detail/index'
    })
  }, 2000)
}
</script>

<style scoped lang="scss">
.page {
  width: 100%;
  height: 100vh;
  background: #F5F5F5;
}

.scroll-area {
  width: 100%;
}

.page-content {
  padding: 32rpx;
}

.info-card {
  background: #fff;
  border-radius: 16rpx;
  margin-bottom: 48rpx;
  overflow: hidden;
}

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 32rpx;
  border-bottom: 2rpx solid #F5F5F5;
}

.card-title {
  font-size: 32rpx;
  font-weight: 600;
  color: #333;
}

.status-badge {
  padding: 8rpx 20rpx;
  border-radius: 24rpx;
  font-size: 22rpx;
  
  &.warning {
    background: #FFF4E5;
    color: #E37318;
  }
}

.card-body {
  padding: 32rpx;
}

.info-row {
  display: flex;
  justify-content: space-between;
  margin-bottom: 16rpx;
  font-size: 26rpx;
  
  &:last-child {
    margin-bottom: 0;
  }
}

.info-label {
  color: #999;
}

.info-value {
  color: #333;
  font-weight: 500;
}


.checkbox {
  width: 40rpx;
  height: 40rpx;
  border: 2rpx solid #E5E5E5;
  border-radius: 8rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  background: #fff;
  
  &.checked {
    background: #0052D9;
    border-color: #0052D9;
    color: #fff;
    font-size: 24rpx;
  }
}

.fixed-bottom {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 24rpx 32rpx;
  padding-bottom: calc(24rpx + env(safe-area-inset-bottom));
  background: #fff;
  box-shadow: 0 -4rpx 16rpx rgba(0, 0, 0, 0.06);
}

</style>

