# 项目开发规范

## 核心原则

**必须使用 TDesign CSS 类名，禁止使用 Vue 组件或自定义类名**

---

## 强制规范

### 1. 页面底部留空
- 所有可滚动页面必须添加 `pb-xxl` (120rpx) 底部留白
- 适用于表单、列表、详情等所有有固定底部按钮的页面

### 2. 组件样式规范

**禁止**
- TDesign Vue 组件（`<TdCard>`、`<TdButton>` 等）
- 自定义样式类（`.custom-xxx`）
- 硬编码颜色值

**必须**
- 使用 TDesign CSS 类名（`.t-card`、`.t-button` 等）
- 个性化样式使用 inline style
- 颜色使用 SCSS 变量（`$td-brand-color`）

### 3. CSS 组件管理

**使用流程**
1. 先查看 `src/styles/components/index.scss`
2. 优先使用现有组件
3. 仅在必要时新增组件

**新增组件要求**
- 使用 BEM 命名（`.t-block__element--modifier`）
- 必须可复用、独立
- 使用 SCSS 变量，不硬编码
- 更新 `index.scss` 导入

### 4. 从原型图迁移样式

**关键转换规则**
- CSS 变量 `var(--td-xxx)` → SCSS 变量 `$td-xxx`
- 单位 `px` → `rpx`（1px = 2rpx）
- 必须导入 `@import '@/styles/tdesign-vars.scss'`

**常见变量对照**
```
--td-section-spacing  → $td-section-spacing  (48rpx)
--td-card-spacing     → $td-card-spacing     (24rpx)
--td-font-size-base   → $td-font-size-base   (28rpx)
--td-font-weight-medium → $td-font-weight-medium (500)
--td-text-color-secondary → $td-text-color-secondary (#5E5E5E)
--td-border-level-1   → $td-border-level-1   (#E7E7E7)
```

### 5. 弹窗规范

**必须使用** `uni.showModal`，禁止自定义弹窗组件

```js
uni.showModal({
  title: '提示',
  content: '确定要取消吗？',
  confirmText: '确定',
  cancelText: '取消',
  success: (res) => {
    if (res.confirm) { /* 确定 */ }
  }
})
```

---

## 可用组件速查

**使用前必查：`src/styles/components/index.scss`**

### 基础组件
- Card: `.t-card`、`.t-card--bordered`
- Button: `.t-button`、`.t-button--primary`、`.t-button--block`
- Badge: `.t-badge`、`.t-badge--theme-success`
- Avatar: `.t-avatar`、`.t-avatar__text`
- Alert: `.t-alert`、`.t-alert--theme-info`

### 表单组件
- Form: `.t-form`、`.t-form-item`、`.t-form-item__label`
- Input: `.t-input`、`.t-input__inner`、`.t-input-group--grid-4`
- Radio: `.t-radio-group`、`.t-radio-item`
- Picker: `.t-picker-box`、`.t-picker__text`

### 数据展示
- List: `.t-list`、`.t-list-item`
- Cell: `.t-cell`、`.t-cell__title`

### 布局组件
- PageHeader: `.t-page-header`、`.t-page-header--fixed`
- PageFooter: `.t-page-footer--fixed`
- Tabs: `.t-tabs`、`.t-tabs__nav-item`
- SectionTitle: `.t-section-title`、`.t-section-title--simple`

### 反馈组件
- Dialog: 使用 `uni.showModal`（禁止自定义）
- Popup: `.t-popup`、`.t-popup--bottom`

---

## 样式文件结构

```
src/styles/components/
  ├── index.scss          # 样式入口（必查）
  ├── 基础组件/
  │   ├── button.scss
  │   ├── card.scss
  │   ├── badge.scss
  │   ├── avatar.scss
  │   └── ...
  ├── 表单组件/
  │   ├── form.scss
  │   ├── input.scss
  │   └── ...
  ├── 布局组件/
  │   ├── page-header.scss
  │   ├── section-title.scss
  │   └── ...
  └── 反馈组件/
      ├── dialog.scss
      └── ...
```

---

## Code Review 检查清单

### 样式检查
- [ ] 使用 TDesign CSS 类名，无自定义类
- [ ] 弹窗使用 `uni.showModal`
- [ ] 颜色使用 SCSS 变量，无硬编码

### 组件管理检查
- [ ] 已查看 `index.scss`，优先使用现有组件
- [ ] 新增组件符合 BEM 规范且可复用
- [ ] 新增组件已在 `index.scss` 中导入

### 原型图迁移检查
- [ ] CSS 变量已转换为 SCSS 变量（`var(--xxx)` → `$xxx`）
- [ ] 已导入 `@import '@/styles/tdesign-vars.scss'`
- [ ] 单位已转换（px → rpx）
- [ ] 视觉效果与原型图一致

---

## 样式使用优先级

```
1. TDesign 现有 CSS 类名（先查 index.scss）
   ↓
2. 可复用组件样式（添加到 components/*.scss）
   ↓
3. inline style（仅用于个性化、不可复用的样式）
   ↓
4. 禁止 Vue 组件 / 自定义类名
```
