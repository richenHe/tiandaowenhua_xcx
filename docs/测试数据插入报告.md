# 测试数据插入完成报告

> **生成时间**: 2026-02-12 11:22  
> **操作人员**: AI Assistant  
> **目的**: 为道天文化小程序添加测试数据，方便前端联调测试

---

## ✅ 数据插入概况

### 核心修改

| 操作项 | 详情 | 状态 |
|-------|------|------|
| **课程价格调整** | 所有课程价格统一设置为 **0.01元** | ✅ 已完成 |
| **排课记录** | 添加 4 条排课记录 | ✅ 已完成 |
| **系统公告** | 添加 5 条公告（含2条新增） | ✅ 已完成 |
| **大使等级配置** | 4个等级配置已存在 | ✅ 已存在 |
| **协议模板** | 添加 4 个协议模板 | ✅ 已完成 |
| **商城商品** | 添加 4 个测试商品 | ✅ 已完成 |
| **通知配置** | 添加 3 个通知配置 | ✅ 已完成 |
| **系统配置** | 13个系统配置已存在 | ✅ 已存在 |

---

## 📊 详细数据统计

### 1. 课程表 (courses) - 3条

**价格设置**: 所有课程 `current_price = 0.01元`

- 道天初探班：0.01元
- 道天密训班：0.01元  
- 一对一咨询服务：0.01元

**用途**: 方便测试支付流程，避免真实扣费

---

### 2. 排课记录 (class_records) - 4条

| 课程 | 日期 | 时间 | 地点 | 老师 | 名额 |
|------|------|------|------|------|------|
| 初探班 | 2026-02-15 | 09:00-12:00 | 北京朝阳区 | 李老师 | 30/5 |
| 初探班 | 2026-02-22 | 09:00-12:00 | 北京朝阳区 | 李老师 | 30/3 |
| 密训班 | 2026-02-16 | 14:00-17:00 | 上海浦东新区 | 王老师 | 20/2 |
| 咨询服务 | 2026-02-20 | 10:00-16:00 | 深圳南山区 | 张老师 | 15/1 |

**说明**: 名额格式为 `总名额/已预约人数`

---

### 3. 系统公告 (announcements) - 5条（新增2条）

| 标题 | 分类 | 目标用户 | 状态 |
|------|------|----------|------|
| 春节假期通知 | general | 全部 | 启用 |
| 新课程上线通知 | course | 全部 | 启用 |
| 系统维护通知 | system | 全部 | 启用 |

**新增内容**:
- 春节假期通知：2026-02-10 至 2026-02-20 暂停上课
- 新课程上线：初探班新一期开放报名

---

### 4. 大使等级配置 (ambassador_level_configs) - 4条 ✅ 已存在

| 等级 | 名称 | 功德奖励率 | 现金奖励率 | 冻结点数 | 升级费用 |
|------|------|-----------|-----------|---------|---------|
| 1 | 准青鸾大使 | 10% | 5% | 0元 | 0元 |
| 2 | 青鸾大使 | 15% | 8% | 100元 | 100元 |
| 3 | 鸿鹄大使 | 20% | 10% | 300元 | 300元 |
| 4 | 金凤大使 | 25% | 12% | 500元 | 500元 |

**说明**: 此表数据已存在，未重复插入

---

### 5. 协议模板 (contract_templates) - 4条

| 协议名称 | 大使等级 | 版本 | 有效期 | 状态 |
|---------|---------|------|--------|------|
| 准青鸾大使服务协议 | 1 | v1.0 | 1年 | 启用 |
| 青鸾大使服务协议 | 2 | v1.0 | 2年 | 启用 |
| 鸿鹄大使服务协议 | 3 | v1.0 | 3年 | 启用 |
| 金凤大使服务协议 | 4 | v1.0 | 5年 | 启用 |

**说明**: 协议内容为简化HTML格式，实际应用需完善

---

### 6. 商城商品 (mall_goods) - 4条

| 商品名称 | 功德值价格 | 库存 | 限购数量 | 状态 |
|---------|-----------|------|----------|------|
| 道天文化周边T恤 | 100 | 50 | 2 | 上架 |
| 道天文化典藏书籍 | 200 | 30 | 1 | 上架 |
| 道天文化U盘 | 150 | 100 | 3 | 上架 |
| 道天文化帆布包 | 80 | 80 | 5 | 上架 |

**用途**: 测试功德值商城兑换功能

---

### 7. 通知配置 (notification_configs) - 3条

| 配置名称 | 触发类型 | 页面路径 | 模板ID |
|---------|---------|---------|--------|
| 订单支付成功通知 | 1 | pages/order/detail/index | TEMPLATE_ID_001 |
| 课程预约成功通知 | 2 | pages/course/appointment/index | TEMPLATE_ID_002 |
| 大使升级成功通知 | 3 | pages/ambassador/level/index | TEMPLATE_ID_003 |

**说明**: 模板ID需在微信公众平台配置实际模板后替换

---

### 8. 系统配置 (system_configs) - 13条 ✅ 已存在

**财务配置**:
- 最低提现金额: 100元
- 最高提现金额: 10000元
- 提现手续费率: 1%
- 功德值兑换比例: 1:1

**联系配置**:
- 客服电话: 400-888-8888
- 客服工作时间: 周一至周五 9:00-18:00

**说明**: 此表数据已存在，未重复插入

---

## 🎯 测试建议

### 1. 支付流程测试

```javascript
// 小程序中调用
wx.cloud.callFunction({
  name: 'order',
  data: {
    action: 'createPayment',
    order_no: 'ORD202602120309299344' // 使用真实订单号
  }
}).then(res => {
  wx.requestPayment({
    ...res.result.data,
    success: () => console.log('支付成功（0.01元）'),
    fail: err => console.error('支付失败', err)
  });
});
```

**优势**: 所有课程仅0.01元，可以安全测试支付流程

---

### 2. 预约功能测试

前提：用户需先购买课程（0.01元）

```javascript
// 预约课程
CourseApi.createAppointment({
  classRecordId: 1 // 使用上面的排课记录ID
})
```

---

### 3. 大使系统测试

1. 申请成为准青鸾大使（需完成资料认证）
2. 签署协议（调用 `ambassador.getContractTemplate` + `signContract`）
3. 推荐用户购买课程（获取推荐奖励）
4. 升级到更高等级（满足推荐人数要求）

---

### 4. 商城兑换测试

前提：用户需有功德值

```javascript
// 兑换商品
OrderApi.exchangeGoods({
  goodsId: 1, // 道天文化周边T恤
  quantity: 1
})
```

---

## 📝 注意事项

### ⚠️ 重要

1. **课程价格仅为测试用途**  
   - 所有课程价格设置为 **0.01元**
   - **生产环境前必须恢复真实价格**

2. **微信支付配置**  
   - 当前配置为真实商户号
   - 测试支付会产生真实交易（0.01元）
   - 建议使用微信支付沙箱环境

3. **模板ID占位符**  
   - 通知配置中的 `TEMPLATE_ID_001` 等为占位符
   - 需在微信公众平台申请实际模板后替换

4. **测试数据清理**  
   - 测试完成后建议清理测试订单数据
   - 保留基础配置数据（等级配置、系统配置等）

---

## 🔗 相关文档

- [接口修复完成报告](./接口修复完成报告.md)
- [微信支付配置清单](./微信支付配置清单.md)
- [API接口修复清单](./api接口修复清单.md)
- [数据库详细信息](./database/数据库详细信息.md)

---

## 🎉 总结

**测试数据准备完毕！现在可以开始完整的前后端联调测试了！**

**已完成项目**:
- ✅ 课程价格调整（0.01元）
- ✅ 排课记录（4条）
- ✅ 系统公告（5条）
- ✅ 协议模板（4个等级）
- ✅ 商城商品（4个商品）
- ✅ 通知配置（3个配置）
- ✅ 系统配置（完整）

**下一步**:
1. 在小程序中测试完整的用户流程
2. 验证支付流程（0.01元）
3. 测试大使系统（申请、升级、推荐）
4. 测试商城兑换功能

---

**测试数据脚本文件**: `测试数据插入脚本.sql`  
**数据插入时间**: 2026-02-12 11:22



