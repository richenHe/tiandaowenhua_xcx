# tiandao_culture æ•°æ®åº“è¯¦ç»†ä¿¡æ¯

> ç”Ÿæˆæ—¥æœŸï¼š2026-02-12  
> æ•°æ®åº“åç§°ï¼š`tiandao_culture`  
> è¡¨æ•°é‡ï¼š32 ä¸ª  
> å­—ç¬¦é›†ï¼šutf8mb4  
> æ’åºè§„åˆ™ï¼šutf8mb4_unicode_ci  
> å­˜å‚¨å¼•æ“ï¼šInnoDB

---

## ğŸ“‹ ç›®å½•

1. [ç”¨æˆ·æ¨¡å—](#ç”¨æˆ·æ¨¡å—) (1è¡¨)
2. [è¯¾ç¨‹æ¨¡å—](#è¯¾ç¨‹æ¨¡å—) (2è¡¨)
3. [è®¢å•æ¨¡å—](#è®¢å•æ¨¡å—) (1è¡¨)
4. [é¢„çº¦æ¨¡å—](#é¢„çº¦æ¨¡å—) (2è¡¨)
5. [å¤§ä½¿æ¨¡å—](#å¤§ä½¿æ¨¡å—) (8è¡¨)
6. [ç§¯åˆ†æ¨¡å—](#ç§¯åˆ†æ¨¡å—) (4è¡¨)
7. [å•†å­¦é™¢æ¨¡å—](#å•†å­¦é™¢æ¨¡å—) (5è¡¨)
8. [åè®®æ¨¡å—](#åè®®æ¨¡å—) (2è¡¨)
9. [åé¦ˆæ¶ˆæ¯æ¨¡å—](#åé¦ˆæ¶ˆæ¯æ¨¡å—) (4è¡¨)
10. [åå°ç®¡ç†æ¨¡å—](#åå°ç®¡ç†æ¨¡å—) (2è¡¨)
11. [ç³»ç»Ÿé…ç½®æ¨¡å—](#ç³»ç»Ÿé…ç½®æ¨¡å—) (1è¡¨)

---

## ç”¨æˆ·æ¨¡å—

### 1. users - ç”¨æˆ·è¡¨

**è¡¨è¯´æ˜ï¼š** å­˜å‚¨ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ã€å¤§ä½¿ä¿¡æ¯ã€æ¨èå…³ç³»ã€ç§¯åˆ†ä½™é¢ç­‰

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | ç”¨æˆ·IDï¼ˆä¸»é”®ï¼‰ |
| uid | varchar(64) | NO | - | CloudBase ç”¨æˆ·å”¯ä¸€æ ‡è¯† |
| openid | varchar(128) | YES | NULL | å¾®ä¿¡ OpenID |
| _openid | varchar(64) | NO | '' | CloudBase ç”¨æˆ·æ ‡è¯†ï¼ˆç”¨äºæ•°æ®éš”ç¦»å’Œè®¿é—®æ§åˆ¶ï¼‰ |
| real_name | varchar(50) | YES | NULL | çœŸå®å§“å |
| phone | varchar(20) | YES | NULL | æ‰‹æœºå· |
| gender | tinyint | YES | NULL | æ€§åˆ«ï¼š0å¥³/1ç”· |
| avatar | varchar(255) | YES | NULL | å¤´åƒURL |
| nickname | varchar(50) | YES | NULL | å¾®ä¿¡æ˜µç§° |
| birth_bazi | json | YES | NULL | å‡ºç”Ÿå…«å­—ä¿¡æ¯ |
| province | varchar(50) | YES | NULL | çœä»½ |
| city | varchar(50) | YES | NULL | åŸå¸‚ |
| industry | varchar(50) | YES | NULL | è¡Œä¸š |
| personal_intro | varchar(500) | YES | NULL | ä¸ªäººç®€ä»‹ |
| profile_completed | tinyint(1) | YES | 0 | èµ„æ–™æ˜¯å¦å®Œå–„ï¼š0å¦/1æ˜¯ |
| total_activity_count | int | YES | 0 | ç´¯è®¡æ´»åŠ¨æ¬¡æ•°ï¼ˆç”¨äºæˆé•¿ç­‰çº§è®¡ç®—ï¼šğŸƒç»¿å¶/ğŸŒ¸èŠ±æœµ/ğŸæœå®/ğŸŒ³å¤§æ ‘ï¼‰ |
| ambassador_level | tinyint | YES | 0 | å¤§ä½¿ç­‰çº§ï¼š0æ™®é€šç”¨æˆ·/1å‡†é’é¸¾/2é’é¸¾/3é¸¿é¹„ |
| ambassador_start_date | date | YES | NULL | æˆä¸ºå¤§ä½¿çš„æ—¥æœŸ |
| referee_code | varchar(10) | YES | NULL | æ¨èç ï¼ˆ6ä½å­—æ¯æ•°å­—ç»„åˆï¼‰ |
| qrcode_url | varchar(255) | YES | NULL | æ¨å¹¿äºŒç»´ç URLï¼ˆ**äº‘å­˜å‚¨**: `users/qrcodes/{uid}_{timestamp}.png`ï¼‰ |
| is_first_recommend | tinyint(1) | YES | 0 | æ˜¯å¦å·²å®Œæˆé¦–æ¬¡æ¨èï¼ˆç”¨äºé’é¸¾è§£å†»ç§¯åˆ†ï¼‰ |
| referee_id | int | YES | NULL | æ¨èäººIDï¼ˆå…³è” users.idï¼‰ |
| referee_uid | varchar(64) | YES | NULL | æ¨èäººUIDï¼ˆè¾…åŠ©å­—æ®µï¼‰ |
| referee_confirmed_at | datetime | YES | NULL | æ¨èäººç¡®è®¤æ—¶é—´ï¼ˆé¦–æ¬¡æ”¯ä»˜åé”å®šï¼‰ |
| referee_updated_at | datetime | YES | NULL | æ¨èäººæœ€åä¿®æ”¹æ—¶é—´ |
| merit_points | decimal(10,2) | YES | 0.00 | åŠŸå¾·åˆ†ä½™é¢ |
| cash_points_frozen | decimal(10,2) | YES | 0.00 | å†»ç»“ç§¯åˆ† |
| cash_points_available | decimal(10,2) | YES | 0.00 | å¯ç”¨ç§¯åˆ† |
| cash_points_pending | decimal(10,2) | YES | 0.00 | æç°ä¸­çš„ç§¯åˆ† |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| uk_uid | å”¯ä¸€ç´¢å¼• | uid | CloudBaseç”¨æˆ·å”¯ä¸€æ ‡è¯† |
| uk_referee_code | å”¯ä¸€ç´¢å¼• | referee_code | æ¨èç å”¯ä¸€ |
| idx_openid | æ™®é€šç´¢å¼• | openid | å¾®ä¿¡OpenIDæŸ¥è¯¢ |
| idx_phone | æ™®é€šç´¢å¼• | phone | æ‰‹æœºå·æŸ¥è¯¢ |
| idx_referee_id | æ™®é€šç´¢å¼• | referee_id | æ¨èäººæŸ¥è¯¢ |
| idx_ambassador_level | æ™®é€šç´¢å¼• | ambassador_level | å¤§ä½¿ç­‰çº§æŸ¥è¯¢ |
| idx_profile_completed | æ™®é€šç´¢å¼• | profile_completed | èµ„æ–™å®Œå–„çŠ¶æ€ |
| idx_total_activity_count | æ™®é€šç´¢å¼• | total_activity_count | ç´¯è®¡æ´»åŠ¨æ¬¡æ•°æŸ¥è¯¢ |
| idx_referee_updated_at | æ™®é€šç´¢å¼• | referee_updated_at | æ¨èäººä¿®æ”¹æ—¶é—´ |
| idx_created_at | æ™®é€šç´¢å¼• | created_at | åˆ›å»ºæ—¶é—´æŸ¥è¯¢ |

---

## è¯¾ç¨‹æ¨¡å—

### 2. courses - è¯¾ç¨‹è¡¨

**è¡¨è¯´æ˜ï¼š** å­˜å‚¨è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯ã€ä»·æ ¼ã€åº“å­˜ç­‰

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | è¯¾ç¨‹ID |
| name | varchar(100) | NO | - | è¯¾ç¨‹åç§° |
| nickname | varchar(50) | YES | NULL | è¯¾ç¨‹æ˜µç§°/ç®€ç§° |
| type | tinyint | NO | - | è¯¾ç¨‹ç±»å‹ï¼š1åˆæ¢ç­/2å¯†è®­ç­/3å’¨è¯¢æœåŠ¡ |
| cover_image | varchar(255) | YES | NULL | å°é¢å›¾ç‰‡URLï¼ˆ**äº‘å­˜å‚¨**: `courses/covers/{course_id}_{timestamp}.{ext}`ï¼‰ |
| description | varchar(500) | YES | NULL | è¯¾ç¨‹ç®€ä»‹ |
| content | text | YES | NULL | è¯¦ç»†ä»‹ç»ï¼ˆHTMLï¼Œå›¾ç‰‡**äº‘å­˜å‚¨**: `courses/content/{course_id}/`ï¼‰ |
| outline | text | YES | NULL | è¯¾ç¨‹å¤§çº² |
| teacher | varchar(100) | YES | NULL | è®²å¸ˆä¿¡æ¯ |
| duration | varchar(50) | YES | NULL | è¯¾ç¨‹æ—¶é•¿ï¼ˆå¦‚ï¼š2å¤©ï¼‰ |
| original_price | decimal(10,2) | NO | - | åŸä»· |
| current_price | decimal(10,2) | NO | - | ç°ä»· |
| retrain_price | decimal(10,2) | YES | 0.00 | å¤è®­ä»·æ ¼ |
| allow_retrain | tinyint(1) | YES | 1 | æ˜¯å¦å…è®¸å¤è®­ï¼š0å¦/1æ˜¯ |
| included_course_ids | json | YES | NULL | åŒ…å«çš„è¯¾ç¨‹IDåˆ—è¡¨ |
| stock | int | YES | -1 | åº“å­˜æ•°é‡ï¼ˆ-1è¡¨ç¤ºæ— é™ï¼‰ |
| sold_count | int | YES | 0 | å·²å”®æ•°é‡ |
| sort_order | int | YES | 0 | æ’åºæƒé‡ï¼ˆè¶Šå¤§è¶Šé å‰ï¼‰ |
| status | tinyint | YES | 1 | çŠ¶æ€ï¼š0ä¸‹æ¶/1ä¸Šæ¶ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| idx_type | æ™®é€šç´¢å¼• | type | è¯¾ç¨‹ç±»å‹æŸ¥è¯¢ |
| idx_status | æ™®é€šç´¢å¼• | status | çŠ¶æ€æŸ¥è¯¢ |
| idx_sort_order | æ™®é€šç´¢å¼• | sort_order | æ’åºæŸ¥è¯¢ |
| idx_type_status | å¤åˆç´¢å¼• | type, status | ç±»å‹+çŠ¶æ€è”åˆæŸ¥è¯¢ |

---

### 3. user_courses - ç”¨æˆ·è¯¾ç¨‹è¡¨

**è¡¨è¯´æ˜ï¼š** è®°å½•ç”¨æˆ·è´­ä¹°çš„è¯¾ç¨‹ã€ä¸Šè¯¾æ¬¡æ•°ã€é¦–æ¬¡ä¸Šè¯¾æ—¶é—´ç­‰

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | ç”¨æˆ·è¯¾ç¨‹ID |
| user_id | int | NO | - | ç”¨æˆ·ID |
| user_uid | varchar(64) | YES | NULL | ç”¨æˆ·UID |
| _openid | varchar(64) | NO | '' | CloudBase ç”¨æˆ·æ ‡è¯†ï¼ˆç”¨äºæ•°æ®éš”ç¦»ï¼‰ |
| course_id | int | NO | - | è¯¾ç¨‹ID |
| course_type | tinyint | NO | - | è¯¾ç¨‹ç±»å‹ï¼ˆå†—ä½™å­˜å‚¨ï¼‰ï¼š1åˆæ¢ç­/2å¯†è®­ç­/3å’¨è¯¢æœåŠ¡ |
| course_name | varchar(100) | YES | NULL | è¯¾ç¨‹åç§°ï¼ˆå†—ä½™å­˜å‚¨ï¼‰ |
| order_no | varchar(32) | YES | NULL | å…³è”è®¢å•å· |
| buy_price | decimal(10,2) | YES | NULL | è´­ä¹°ä»·æ ¼ |
| buy_time | datetime | YES | NULL | è´­ä¹°æ—¶é—´ |
| is_gift | tinyint(1) | YES | 0 | æ˜¯å¦èµ é€ï¼š0å¦/1æ˜¯ï¼ˆå¯†è®­ç­èµ é€çš„åˆæ¢ç­ï¼‰ |
| gift_source | varchar(100) | YES | NULL | èµ é€æ¥æºè¯´æ˜ |
| source_order_id | int | YES | NULL | æ¥æºè®¢å•IDï¼ˆèµ é€è¯¾ç¨‹å…³è”åŸè®¢å•ï¼‰ |
| source_course_id | int | YES | NULL | æ¥æºè¯¾ç¨‹IDï¼ˆèµ é€è¯¾ç¨‹å…³è”å¯†è®­ç­IDï¼‰ |
| attend_count | int | YES | 1 | å¯ä¸Šè¯¾æ¬¡æ•°ï¼ˆåˆå§‹ä¸º1ï¼Œè¡¨ç¤ºå¯é¦–æ¬¡ä¸Šè¯¾ï¼‰ |
| first_class_time | datetime | YES | NULL | é¦–æ¬¡ä¸Šè¯¾æ—¶é—´ |
| last_attend_time | datetime | YES | NULL | æœ€åä¸Šè¯¾æ—¶é—´ |
| status | tinyint | YES | 1 | çŠ¶æ€ï¼š0æ— æ•ˆ/1æœ‰æ•ˆ/2å·²é€€æ¬¾ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| idx_user_id | æ™®é€šç´¢å¼• | user_id | ç”¨æˆ·æŸ¥è¯¢ |
| idx_course_id | æ™®é€šç´¢å¼• | course_id | è¯¾ç¨‹æŸ¥è¯¢ |
| idx_course_type | æ™®é€šç´¢å¼• | course_type | è¯¾ç¨‹ç±»å‹æŸ¥è¯¢ |
| idx_order_no | æ™®é€šç´¢å¼• | order_no | è®¢å•å·æŸ¥è¯¢ |
| idx_is_gift | æ™®é€šç´¢å¼• | is_gift | èµ é€æ ‡è¯†æŸ¥è¯¢ |
| idx_source_order_id | æ™®é€šç´¢å¼• | source_order_id | æ¥æºè®¢å•æŸ¥è¯¢ |
| idx_status | æ™®é€šç´¢å¼• | status | çŠ¶æ€æŸ¥è¯¢ |
| idx_user_course | å¤åˆç´¢å¼• | user_id, course_id | ç”¨æˆ·è¯¾ç¨‹è”åˆæŸ¥è¯¢ |
| idx_user_type | å¤åˆç´¢å¼• | user_id, course_type | ç”¨æˆ·è¯¾ç¨‹ç±»å‹æŸ¥è¯¢ |

---

## è®¢å•æ¨¡å—

### 4. orders - è®¢å•è¡¨

**è¡¨è¯´æ˜ï¼š** å­˜å‚¨æ‰€æœ‰è®¢å•ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¯¾ç¨‹è®¢å•ã€å¤è®­è®¢å•ã€å¤§ä½¿å‡çº§è®¢å•

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | è®¢å•ID |
| order_no | varchar(32) | NO | - | è®¢å•å·ï¼ˆæ ¼å¼ï¼šORD + å¹´æœˆæ—¥ + 8ä½éšæœºæ•°ï¼‰ |
| order_type | tinyint | NO | - | è®¢å•ç±»å‹ï¼š1è¯¾ç¨‹/2å¤è®­/4å¤§ä½¿å‡çº§ |
| order_name | varchar(100) | NO | - | è®¢å•åç§° |
| user_id | int | NO | - | ç”¨æˆ·ID |
| user_uid | varchar(64) | YES | NULL | ç”¨æˆ·UID |
| user_name | varchar(50) | YES | NULL | ç”¨æˆ·å§“åï¼ˆå†—ä½™ï¼‰ |
| user_phone | varchar(20) | YES | NULL | ç”¨æˆ·æ‰‹æœºå·ï¼ˆå†—ä½™ï¼‰ |
| _openid | varchar(64) | NO | '' | CloudBase ç”¨æˆ·æ ‡è¯†ï¼ˆç”¨äºæ•°æ®éš”ç¦»ï¼‰ |
| related_id | int | YES | NULL | å…³è”IDï¼šè¯¾ç¨‹ID/ç”¨æˆ·è¯¾ç¨‹ID/ç›®æ ‡ç­‰çº§ |
| class_record_id | int | YES | NULL | ä¸Šè¯¾è®°å½•IDï¼ˆå¤è®­ä¸“ç”¨ï¼‰ |
| original_amount | decimal(10,2) | NO | - | åŸä»· |
| discount_amount | decimal(10,2) | YES | 0.00 | ä¼˜æƒ é‡‘é¢ |
| final_amount | decimal(10,2) | NO | - | åº”ä»˜é‡‘é¢ |
| referee_id | int | YES | NULL | æ¨èäººID |
| referee_uid | varchar(64) | YES | NULL | æ¨èäººUID |
| referee_name | varchar(50) | YES | NULL | æ¨èäººå§“åï¼ˆå†—ä½™ï¼‰ |
| referee_level | tinyint | YES | NULL | æ¨èäººç­‰çº§ï¼ˆä¸‹å•æ—¶ï¼‰ |
| referee_updated_at | datetime | YES | NULL | æ¨èäººä¿®æ”¹æ—¶é—´ |
| pay_status | tinyint | YES | 0 | æ”¯ä»˜çŠ¶æ€ï¼š0å¾…æ”¯ä»˜/1å·²æ”¯ä»˜/2å·²å–æ¶ˆ/3å·²å…³é—­/4å·²é€€æ¬¾ |
| pay_method | varchar(20) | YES | 'wechat' | æ”¯ä»˜æ–¹å¼ |
| pay_time | datetime | YES | NULL | æ”¯ä»˜æ—¶é—´ |
| transaction_id | varchar(64) | YES | NULL | å¾®ä¿¡æ”¯ä»˜äº¤æ˜“å· |
| prepay_id | varchar(64) | YES | NULL | å¾®ä¿¡é¢„æ”¯ä»˜äº¤æ˜“ä¼šè¯æ ‡è¯† |
| refund_status | tinyint | YES | 0 | é€€æ¬¾çŠ¶æ€ï¼š0æ— é€€æ¬¾/1é€€æ¬¾ä¸­/2å·²é€€æ¬¾/3é€€æ¬¾å¤±è´¥ |
| refund_amount | decimal(10,2) | YES | NULL | é€€æ¬¾é‡‘é¢ |
| refund_time | datetime | YES | NULL | é€€æ¬¾æ—¶é—´ |
| refund_reason | varchar(200) | YES | NULL | é€€æ¬¾åŸå›  |
| is_reward_granted | tinyint(1) | YES | 0 | æ˜¯å¦å·²å‘æ”¾æ¨èäººå¥–åŠ± |
| reward_granted_at | datetime | YES | NULL | å¥–åŠ±å‘æ”¾æ—¶é—´ |
| order_metadata | json | YES | NULL | è®¢å•å…ƒæ•°æ® |
| expire_at | datetime | YES | NULL | è®¢å•è¿‡æœŸæ—¶é—´ï¼ˆåˆ›å»ºå30åˆ†é’Ÿï¼‰ |
| remark | varchar(500) | YES | NULL | è®¢å•å¤‡æ³¨ |
| admin_remark | varchar(500) | YES | NULL | ç®¡ç†å‘˜å¤‡æ³¨ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| uk_order_no | å”¯ä¸€ç´¢å¼• | order_no | è®¢å•å·å”¯ä¸€ |
| idx_user_id | æ™®é€šç´¢å¼• | user_id | ç”¨æˆ·æŸ¥è¯¢ |
| idx_order_type | æ™®é€šç´¢å¼• | order_type | è®¢å•ç±»å‹æŸ¥è¯¢ |
| idx_pay_status | æ™®é€šç´¢å¼• | pay_status | æ”¯ä»˜çŠ¶æ€æŸ¥è¯¢ |
| idx_referee_id | æ™®é€šç´¢å¼• | referee_id | æ¨èäººæŸ¥è¯¢ |
| idx_related_id | æ™®é€šç´¢å¼• | related_id | å…³è”IDæŸ¥è¯¢ |
| idx_class_record_id | æ™®é€šç´¢å¼• | class_record_id | ä¸Šè¯¾è®¡åˆ’æŸ¥è¯¢ |
| idx_transaction_id | æ™®é€šç´¢å¼• | transaction_id | å¾®ä¿¡äº¤æ˜“å·æŸ¥è¯¢ |
| idx_prepay_id | æ™®é€šç´¢å¼• | prepay_id | é¢„æ”¯ä»˜IDæŸ¥è¯¢ |
| idx_expire_at | æ™®é€šç´¢å¼• | expire_at | è¿‡æœŸæ—¶é—´æŸ¥è¯¢ |
| idx_pay_time | æ™®é€šç´¢å¼• | pay_time | æ”¯ä»˜æ—¶é—´æŸ¥è¯¢ |
| idx_created_at | æ™®é€šç´¢å¼• | created_at | åˆ›å»ºæ—¶é—´æŸ¥è¯¢ |
| idx_user_type_status | å¤åˆç´¢å¼• | user_id, order_type, pay_status | ç”¨æˆ·è®¢å•æŸ¥è¯¢ |
| idx_user_pay_status | å¤åˆç´¢å¼• | user_id, pay_status | ç”¨æˆ·æ”¯ä»˜çŠ¶æ€æŸ¥è¯¢ |
| idx_type_status_time | å¤åˆç´¢å¼• | order_type, pay_status, created_at | è®¢å•ç»Ÿè®¡æŸ¥è¯¢ |

---

## é¢„çº¦æ¨¡å—

### 5. class_records - ä¸Šè¯¾è®¡åˆ’è¡¨

**è¡¨è¯´æ˜ï¼š** è®°å½•æ¯æœŸè¯¾ç¨‹çš„ä¸Šè¯¾å®‰æ’ã€åœ°ç‚¹ã€åé¢ç­‰ä¿¡æ¯

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | ä¸Šè¯¾è®¡åˆ’ID |
| course_id | int | NO | - | è¯¾ç¨‹ID |
| course_name | varchar(100) | YES | NULL | è¯¾ç¨‹åç§°ï¼ˆå†—ä½™ï¼‰ |
| course_type | tinyint | YES | NULL | è¯¾ç¨‹ç±»å‹ï¼ˆå†—ä½™ï¼‰ |
| period | varchar(20) | YES | NULL | æœŸæ•°ï¼ˆå¦‚ï¼šç¬¬10æœŸï¼‰ |
| class_date | date | NO | - | ä¸Šè¯¾æ—¥æœŸ |
| class_time | varchar(50) | YES | NULL | ä¸Šè¯¾æ—¶é—´ï¼ˆå¦‚ï¼š09:00-17:00ï¼‰ |
| class_location | varchar(200) | YES | NULL | ä¸Šè¯¾åœ°ç‚¹ |
| teacher | varchar(100) | YES | NULL | è®²å¸ˆ |
| total_quota | int | NO | 30 | æ€»åé¢ |
| booked_quota | int | YES | 0 | å·²é¢„çº¦åé¢ |
| booking_deadline | datetime | YES | NULL | é¢„çº¦æˆªæ­¢æ—¶é—´ |
| retrain_deadline | datetime | YES | NULL | å¤è®­æŠ¥åæˆªæ­¢æ—¶é—´ï¼ˆå¼€è¯¾å‰3å¤©ï¼‰ |
| status | tinyint | YES | 1 | çŠ¶æ€ï¼š0å–æ¶ˆ/1æ­£å¸¸/2å·²ç»“æŸ |
| remark | varchar(500) | YES | NULL | å¤‡æ³¨ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| idx_course_id | æ™®é€šç´¢å¼• | course_id | è¯¾ç¨‹æŸ¥è¯¢ |
| idx_class_date | æ™®é€šç´¢å¼• | class_date | ä¸Šè¯¾æ—¥æœŸæŸ¥è¯¢ |
| idx_status | æ™®é€šç´¢å¼• | status | çŠ¶æ€æŸ¥è¯¢ |
| idx_course_date | å¤åˆç´¢å¼• | course_id, class_date | è¯¾ç¨‹æ—¥æœŸè”åˆæŸ¥è¯¢ |
| idx_booking_deadline | æ™®é€šç´¢å¼• | booking_deadline | é¢„çº¦æˆªæ­¢æ—¶é—´ |
| idx_retrain_deadline | æ™®é€šç´¢å¼• | retrain_deadline | å¤è®­æˆªæ­¢æ—¶é—´ |

---

### 6. appointments - é¢„çº¦è¡¨

**è¡¨è¯´æ˜ï¼š** è®°å½•ç”¨æˆ·çš„è¯¾ç¨‹é¢„çº¦ã€ç­¾åˆ°ã€å–æ¶ˆç­‰ä¿¡æ¯

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | é¢„çº¦ID |
| user_id | int | NO | - | ç”¨æˆ·ID |
| user_uid | varchar(64) | YES | NULL | ç”¨æˆ·UID |
| user_name | varchar(50) | YES | NULL | ç”¨æˆ·å§“åï¼ˆå†—ä½™ï¼‰ |
| user_phone | varchar(20) | YES | NULL | ç”¨æˆ·æ‰‹æœºå·ï¼ˆå†—ä½™ï¼‰ |
| _openid | varchar(64) | NO | '' | CloudBase ç”¨æˆ·æ ‡è¯†ï¼ˆç”¨äºæ•°æ®éš”ç¦»ï¼‰ |
| class_record_id | int | NO | - | ä¸Šè¯¾è®¡åˆ’ID |
| user_course_id | int | NO | - | ç”¨æˆ·è¯¾ç¨‹ID |
| course_id | int | YES | NULL | è¯¾ç¨‹IDï¼ˆå†—ä½™ï¼‰ |
| course_name | varchar(100) | YES | NULL | è¯¾ç¨‹åç§°ï¼ˆå†—ä½™ï¼‰ |
| is_retrain | tinyint(1) | YES | 0 | æ˜¯å¦å¤è®­ï¼š0é¦–æ¬¡/1å¤è®­ |
| order_no | varchar(32) | YES | NULL | å…³è”è®¢å•å·ï¼ˆå¤è®­ä¸“ç”¨ï¼‰ |
| checkin_code | varchar(20) | YES | NULL | ç­¾åˆ°ç  |
| checkin_time | datetime | YES | NULL | ç­¾åˆ°æ—¶é—´ |
| checkin_admin_id | int | YES | NULL | ç­¾åˆ°æ“ä½œç®¡ç†å‘˜ID |
| status | tinyint | YES | 0 | çŠ¶æ€ï¼š0å¾…ä¸Šè¯¾/1å·²ç­¾åˆ°/2ç¼ºå¸­/3å·²å–æ¶ˆ |
| cancel_reason | varchar(200) | YES | NULL | å–æ¶ˆåŸå›  |
| cancel_time | datetime | YES | NULL | å–æ¶ˆæ—¶é—´ |
| remark | varchar(500) | YES | NULL | å¤‡æ³¨ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | é¢„çº¦æ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| idx_user_id | æ™®é€šç´¢å¼• | user_id | ç”¨æˆ·æŸ¥è¯¢ |
| idx_class_record_id | æ™®é€šç´¢å¼• | class_record_id | ä¸Šè¯¾è®¡åˆ’æŸ¥è¯¢ |
| idx_user_course_id | æ™®é€šç´¢å¼• | user_course_id | ç”¨æˆ·è¯¾ç¨‹æŸ¥è¯¢ |
| idx_course_id | æ™®é€šç´¢å¼• | course_id | è¯¾ç¨‹æŸ¥è¯¢ |
| idx_is_retrain | æ™®é€šç´¢å¼• | is_retrain | å¤è®­æ ‡è¯†æŸ¥è¯¢ |
| idx_order_no | æ™®é€šç´¢å¼• | order_no | è®¢å•å·æŸ¥è¯¢ |
| idx_status | æ™®é€šç´¢å¼• | status | çŠ¶æ€æŸ¥è¯¢ |
| idx_checkin_time | æ™®é€šç´¢å¼• | checkin_time | ç­¾åˆ°æ—¶é—´æŸ¥è¯¢ |
| idx_user_class | å¤åˆç´¢å¼• | user_id, class_record_id | ç”¨æˆ·ä¸Šè¯¾è”åˆæŸ¥è¯¢ |
| idx_class_status | å¤åˆç´¢å¼• | class_record_id, status | ä¸Šè¯¾è®¡åˆ’çŠ¶æ€æŸ¥è¯¢ |

---

## å¤§ä½¿æ¨¡å—

### 7. ambassador_applications - å¤§ä½¿ç”³è¯·è¡¨

**è¡¨è¯´æ˜ï¼š** è®°å½•ç”¨æˆ·ç”³è¯·æˆä¸ºå¤§ä½¿çš„ä¿¡æ¯å’Œå®¡æ ¸æµç¨‹

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | ç”³è¯·ID |
| user_id | int | NO | - | ç”¨æˆ·ID |
| user_uid | varchar(64) | YES | NULL | ç”¨æˆ·UID |
| _openid | varchar(64) | NO | '' | CloudBase ç”¨æˆ·æ ‡è¯†ï¼ˆç”¨äºæ•°æ®éš”ç¦»ï¼‰ |
| real_name | varchar(50) | NO | - | çœŸå®å§“å |
| phone | varchar(20) | NO | - | æ‰‹æœºå· |
| wechat_id | varchar(50) | YES | NULL | å¾®ä¿¡å· |
| city | varchar(50) | YES | NULL | æ‰€åœ¨åŸå¸‚ |
| occupation | varchar(50) | YES | NULL | èŒä¸š/è¡Œä¸š |
| apply_reason | text | YES | NULL | ç”³è¯·åŸå›  |
| understanding | text | YES | NULL | å¯¹å¤©é“æ–‡åŒ–çš„ç†è§£ |
| willing_help | tinyint(1) | YES | 1 | æ˜¯å¦æ„¿æ„å¸®åŠ©ä»–äºº |
| promotion_plan | text | YES | NULL | æ¨å¹¿è®¡åˆ’ |
| status | tinyint | YES | 0 | çŠ¶æ€ï¼š0å¾…å®¡æ ¸/1å¾…é¢è¯•/2é¢è¯•é€šè¿‡/3å·²æ‹’ç» |
| interview_time | datetime | YES | NULL | é¢è¯•æ—¶é—´ |
| interview_remark | varchar(500) | YES | NULL | é¢è¯•å¤‡æ³¨ |
| reject_reason | varchar(500) | YES | NULL | æ‹’ç»åŸå›  |
| audit_admin_id | int | YES | NULL | å®¡æ ¸ç®¡ç†å‘˜ID |
| audit_time | datetime | YES | NULL | å®¡æ ¸æ—¶é—´ |
| audit_remark | varchar(500) | YES | NULL | å®¡æ ¸å¤‡æ³¨ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | ç”³è¯·æ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| idx_user_id | æ™®é€šç´¢å¼• | user_id | ç”¨æˆ·æŸ¥è¯¢ |
| idx_status | æ™®é€šç´¢å¼• | status | çŠ¶æ€æŸ¥è¯¢ |
| idx_audit_admin_id | æ™®é€šç´¢å¼• | audit_admin_id | å®¡æ ¸ç®¡ç†å‘˜æŸ¥è¯¢ |
| idx_created_at | æ™®é€šç´¢å¼• | created_at | ç”³è¯·æ—¶é—´æŸ¥è¯¢ |

---

### 8. ambassador_quotas - å¤§ä½¿åé¢è¡¨

**è¡¨è¯´æ˜ï¼š** è®°å½•å¤§ä½¿æ‹¥æœ‰çš„èµ è¯¾åé¢

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | åé¢ID |
| user_id | int | NO | - | å¤§ä½¿ç”¨æˆ·ID |
| user_uid | varchar(64) | YES | NULL | å¤§ä½¿ç”¨æˆ·UID |
| _openid | varchar(64) | NO | '' | CloudBase ç”¨æˆ·æ ‡è¯†ï¼ˆç”¨äºæ•°æ®éš”ç¦»ï¼‰ |
| ambassador_level | tinyint | NO | - | å¤§ä½¿ç­‰çº§ï¼š2é’é¸¾/3é¸¿é¹„/4é‡‘å‡¤ç­‰ |
| quota_type | tinyint | NO | - | åé¢ç±»å‹ï¼š1åˆæ¢ç­/2å¯†è®­ç­ |
| source_type | tinyint | NO | - | æ¥æºç±»å‹ï¼š1å¤§ä½¿å‡çº§/2æ´»åŠ¨å¥–åŠ±/3ç³»ç»Ÿå‘æ”¾ |
| source_remark | varchar(200) | YES | NULL | æ¥æºè¯´æ˜ |
| total_quantity | int | NO | - | æ€»æ•°é‡ |
| used_quantity | int | YES | 0 | å·²ä½¿ç”¨æ•°é‡ |
| remaining_quantity | int | NO | - | å‰©ä½™æ•°é‡ |
| expire_date | date | NO | - | è¿‡æœŸæ—¥æœŸ |
| status | tinyint | YES | 1 | çŠ¶æ€ï¼š0å¤±æ•ˆ/1æœ‰æ•ˆ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| idx_user_id | æ™®é€šç´¢å¼• | user_id | ç”¨æˆ·æŸ¥è¯¢ |
| idx_ambassador_level | æ™®é€šç´¢å¼• | ambassador_level | å¤§ä½¿ç­‰çº§æŸ¥è¯¢ |
| idx_quota_type | æ™®é€šç´¢å¼• | quota_type | åé¢ç±»å‹æŸ¥è¯¢ |
| idx_source_type | æ™®é€šç´¢å¼• | source_type | æ¥æºç±»å‹æŸ¥è¯¢ |
| idx_expire_date | æ™®é€šç´¢å¼• | expire_date | è¿‡æœŸæ—¥æœŸæŸ¥è¯¢ |
| idx_status | æ™®é€šç´¢å¼• | status | çŠ¶æ€æŸ¥è¯¢ |
| idx_user_status | å¤åˆç´¢å¼• | user_id, status | ç”¨æˆ·æœ‰æ•ˆåé¢æŸ¥è¯¢ |

---

### 9. ambassador_upgrade_logs - å¤§ä½¿å‡çº§æ—¥å¿—è¡¨

**è¡¨è¯´æ˜ï¼š** è®°å½•å¤§ä½¿ç­‰çº§å‡çº§çš„å†å²

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | æ—¥å¿—ID |
| user_id | int | NO | - | ç”¨æˆ·ID |
| user_uid | varchar(64) | YES | NULL | ç”¨æˆ·UID |
| from_level | tinyint | NO | - | åŸç­‰çº§ |
| to_level | tinyint | NO | - | æ–°ç­‰çº§ |
| upgrade_type | tinyint | NO | - | å‡çº§ç±»å‹ï¼š1æ”¯ä»˜å‡çº§/2åè®®å‡çº§/3ç®¡ç†å‘˜è°ƒæ•´ |
| order_no | varchar(32) | YES | NULL | å…³è”è®¢å•å·ï¼ˆæ”¯ä»˜å‡çº§æ—¶ï¼‰ |
| contract_signature_id | int | YES | NULL | å…³è”åè®®ç­¾ç½²IDï¼ˆåè®®å‡çº§æ—¶ï¼‰ |
| admin_id | int | YES | NULL | æ“ä½œç®¡ç†å‘˜IDï¼ˆç®¡ç†å‘˜è°ƒæ•´æ—¶ï¼‰ |
| rewards | json | YES | NULL | å‡çº§å¥–åŠ±ä¿¡æ¯ |
| remark | varchar(500) | YES | NULL | å¤‡æ³¨ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | å‡çº§æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| idx_user_id | æ™®é€šç´¢å¼• | user_id | ç”¨æˆ·æŸ¥è¯¢ |
| idx_from_level | æ™®é€šç´¢å¼• | from_level | åŸç­‰çº§æŸ¥è¯¢ |
| idx_to_level | æ™®é€šç´¢å¼• | to_level | æ–°ç­‰çº§æŸ¥è¯¢ |
| idx_upgrade_type | æ™®é€šç´¢å¼• | upgrade_type | å‡çº§ç±»å‹æŸ¥è¯¢ |
| idx_order_no | æ™®é€šç´¢å¼• | order_no | è®¢å•å·æŸ¥è¯¢ |
| idx_created_at | æ™®é€šç´¢å¼• | created_at | å‡çº§æ—¶é—´æŸ¥è¯¢ |

---

### 10. quota_usage_records - åé¢ä½¿ç”¨è®°å½•è¡¨

**è¡¨è¯´æ˜ï¼š** è®°å½•å¤§ä½¿èµ è¯¾åé¢çš„ä½¿ç”¨å’Œæ ¸é”€æƒ…å†µ

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | è®°å½•ID |
| quota_id | int | NO | - | åé¢ID |
| ambassador_id | int | NO | - | å¤§ä½¿ç”¨æˆ·ID |
| ambassador_uid | varchar(64) | YES | NULL | å¤§ä½¿ç”¨æˆ·UID |
| _openid | varchar(64) | NO | '' | CloudBase ç”¨æˆ·æ ‡è¯†ï¼ˆç”¨äºæ•°æ®éš”ç¦»ï¼‰ |
| recipient_id | int | YES | NULL | å—èµ äººç”¨æˆ·ID |
| recipient_uid | varchar(64) | YES | NULL | å—èµ äººç”¨æˆ·UID |
| recipient_name | varchar(50) | YES | NULL | å—èµ äººå§“å |
| recipient_phone | varchar(20) | YES | NULL | å—èµ äººæ‰‹æœºå· |
| usage_type | tinyint | NO | - | ä½¿ç”¨ç±»å‹ï¼š1èµ é€/2æ ¸é”€ |
| course_id | int | YES | NULL | è¯¾ç¨‹ID |
| course_name | varchar(100) | YES | NULL | è¯¾ç¨‹åç§° |
| status | tinyint | YES | 1 | çŠ¶æ€ï¼š1å·²èµ é€/2å·²æ ¸é”€/3å·²å–æ¶ˆ |
| verify_time | datetime | YES | NULL | æ ¸é”€æ—¶é—´ |
| verify_admin_id | int | YES | NULL | æ ¸é”€ç®¡ç†å‘˜ID |
| message | varchar(200) | YES | NULL | èµ é€ç•™è¨€ |
| remark | varchar(500) | YES | NULL | å¤‡æ³¨ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| idx_quota_id | æ™®é€šç´¢å¼• | quota_id | åé¢æŸ¥è¯¢ |
| idx_ambassador_id | æ™®é€šç´¢å¼• | ambassador_id | å¤§ä½¿æŸ¥è¯¢ |
| idx_recipient_id | æ™®é€šç´¢å¼• | recipient_id | å—èµ äººæŸ¥è¯¢ |
| idx_usage_type | æ™®é€šç´¢å¼• | usage_type | ä½¿ç”¨ç±»å‹æŸ¥è¯¢ |
| idx_status | æ™®é€šç´¢å¼• | status | çŠ¶æ€æŸ¥è¯¢ |
| idx_created_at | æ™®é€šç´¢å¼• | created_at | åˆ›å»ºæ—¶é—´æŸ¥è¯¢ |

---

### 11. referee_change_logs - æ¨èäººå˜æ›´æ—¥å¿—è¡¨

**è¡¨è¯´æ˜ï¼š** è®°å½•ç”¨æˆ·æ¨èäººçš„å˜æ›´å†å²

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | æ—¥å¿—ID |
| user_id | int | NO | - | ç”¨æˆ·ID |
| user_uid | varchar(64) | YES | NULL | ç”¨æˆ·UID |
| _openid | varchar(64) | NO | '' | CloudBase ç”¨æˆ·æ ‡è¯†ï¼ˆç”¨äºæ•°æ®éš”ç¦»ï¼‰ |
| old_referee_id | int | YES | NULL | åŸæ¨èäººID |
| old_referee_uid | varchar(64) | YES | NULL | åŸæ¨èäººUID |
| old_referee_name | varchar(50) | YES | NULL | åŸæ¨èäººå§“åï¼ˆå†—ä½™ï¼‰ |
| new_referee_id | int | YES | NULL | æ–°æ¨èäººID |
| new_referee_uid | varchar(64) | YES | NULL | æ–°æ¨èäººUID |
| new_referee_name | varchar(50) | YES | NULL | æ–°æ¨èäººå§“åï¼ˆå†—ä½™ï¼‰ |
| change_type | tinyint | NO | - | å˜æ›´ç±»å‹ï¼š1é¦–æ¬¡è®¾ç½®/2ç”¨æˆ·ä¸»åŠ¨ä¿®æ”¹/3ç®¡ç†å‘˜ä¿®æ”¹/4è®¢å•é¡µä¿®æ”¹ |
| change_source | tinyint | NO | - | å˜æ›´æ¥æºï¼š1å°ç¨‹åºç”¨æˆ·èµ„æ–™/2è®¢å•æ”¯ä»˜é¡µ/3åå°ç®¡ç† |
| order_no | varchar(32) | YES | NULL | å…³è”è®¢å•å·ï¼ˆè®¢å•é¡µä¿®æ”¹æ—¶ï¼‰ |
| admin_id | int | YES | NULL | æ“ä½œç®¡ç†å‘˜IDï¼ˆç®¡ç†å‘˜ä¿®æ”¹æ—¶ï¼‰ |
| remark | varchar(500) | YES | NULL | å˜æ›´å¤‡æ³¨ |
| change_ip | varchar(50) | YES | NULL | å˜æ›´IPåœ°å€ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | å˜æ›´æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| idx_user_id | æ™®é€šç´¢å¼• | user_id | ç”¨æˆ·æŸ¥è¯¢ |
| idx_change_type | æ™®é€šç´¢å¼• | change_type | å˜æ›´ç±»å‹æŸ¥è¯¢ |
| idx_change_source | æ™®é€šç´¢å¼• | change_source | å˜æ›´æ¥æºæŸ¥è¯¢ |
| idx_order_no | æ™®é€šç´¢å¼• | order_no | è®¢å•å·æŸ¥è¯¢ |
| idx_admin_id | æ™®é€šç´¢å¼• | admin_id | ç®¡ç†å‘˜æŸ¥è¯¢ |
| idx_created_at | æ™®é€šç´¢å¼• | created_at | å˜æ›´æ—¶é—´æŸ¥è¯¢ |

---

### 12. withdrawals - æç°è®°å½•è¡¨

**è¡¨è¯´æ˜ï¼š** è®°å½•ç”¨æˆ·ç§¯åˆ†æç°ç”³è¯·å’Œå¤„ç†æµç¨‹

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | æç°ID |
| withdraw_no | varchar(32) | NO | - | æç°å•å·ï¼ˆæ ¼å¼ï¼šWD + å¹´æœˆæ—¥ + 8ä½éšæœºæ•°ï¼‰ |
| user_id | int | NO | - | ç”¨æˆ·ID |
| user_uid | varchar(64) | YES | NULL | ç”¨æˆ·UID |
| user_name | varchar(50) | YES | NULL | ç”¨æˆ·å§“å |
| _openid | varchar(64) | NO | '' | CloudBase ç”¨æˆ·æ ‡è¯†ï¼ˆç”¨äºæ•°æ®éš”ç¦»ï¼‰ |
| amount | decimal(10,2) | NO | - | æç°é‡‘é¢ |
| account_type | tinyint | NO | - | è´¦æˆ·ç±»å‹ï¼š1å¾®ä¿¡/2æ”¯ä»˜å®/3é“¶è¡Œå¡ |
| account_info | json | NO | - | è´¦æˆ·ä¿¡æ¯ |
| status | tinyint | YES | 0 | çŠ¶æ€ï¼š0å¾…å®¡æ ¸/1å®¡æ ¸é€šè¿‡å¾…è½¬è´¦/2å·²è½¬è´¦/3å·²æ‹’ç» |
| apply_time | datetime | NO | - | ç”³è¯·æ—¶é—´ |
| apply_ip | varchar(50) | YES | NULL | ç”³è¯·IP |
| audit_admin_id | int | YES | NULL | å®¡æ ¸ç®¡ç†å‘˜ID |
| audit_time | datetime | YES | NULL | å®¡æ ¸æ—¶é—´ |
| audit_remark | varchar(500) | YES | NULL | å®¡æ ¸å¤‡æ³¨ |
| reject_reason | varchar(500) | YES | NULL | æ‹’ç»åŸå›  |
| transfer_time | datetime | YES | NULL | è½¬è´¦æ—¶é—´ |
| transfer_no | varchar(64) | YES | NULL | è½¬è´¦æµæ°´å· |
| transfer_admin_id | int | YES | NULL | è½¬è´¦æ“ä½œç®¡ç†å‘˜ID |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| uk_withdraw_no | å”¯ä¸€ç´¢å¼• | withdraw_no | æç°å•å·å”¯ä¸€ |
| idx_user_id | æ™®é€šç´¢å¼• | user_id | ç”¨æˆ·æŸ¥è¯¢ |
| idx_status | æ™®é€šç´¢å¼• | status | çŠ¶æ€æŸ¥è¯¢ |
| idx_account_type | æ™®é€šç´¢å¼• | account_type | è´¦æˆ·ç±»å‹æŸ¥è¯¢ |
| idx_apply_time | æ™®é€šç´¢å¼• | apply_time | ç”³è¯·æ—¶é—´æŸ¥è¯¢ |
| idx_audit_time | æ™®é€šç´¢å¼• | audit_time | å®¡æ ¸æ—¶é—´æŸ¥è¯¢ |
| idx_audit_admin_id | æ™®é€šç´¢å¼• | audit_admin_id | å®¡æ ¸ç®¡ç†å‘˜æŸ¥è¯¢ |
| idx_status_apply_time | å¤åˆç´¢å¼• | status, apply_time | çŠ¶æ€æ—¶é—´è”åˆæŸ¥è¯¢ |

---

### 13. ambassador_activity_records - å¤§ä½¿æ´»åŠ¨è®°å½•è¡¨

**è¡¨è¯´æ˜ï¼š** è®°å½•å¤§ä½¿å‚ä¸çš„å„ç±»æ´»åŠ¨ï¼ˆè¾…å¯¼å‘˜ã€ä¼šåŠ¡ä¹‰å·¥ã€æ²™é¾™ç»„ç»‡ç­‰ï¼‰åŠè·å¾—çš„åŠŸå¾·åˆ†

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | æ´»åŠ¨è®°å½•IDï¼ˆä¸»é”®ï¼‰ |
| user_id | int | NO | - | å¤§ä½¿ç”¨æˆ·ID |
| user_uid | varchar(64) | YES | NULL | å¤§ä½¿ç”¨æˆ·UID |
| _openid | varchar(64) | NO | '' | CloudBase ç”¨æˆ·æ ‡è¯†ï¼ˆç”¨äºæ•°æ®éš”ç¦»ï¼‰ |
| activity_type | tinyint | NO | - | æ´»åŠ¨ç±»å‹ï¼š1è¾…å¯¼å‘˜/2ä¼šåŠ¡ä¹‰å·¥/3æ²™é¾™ç»„ç»‡/4å…¶ä»– |
| activity_name | varchar(100) | NO | - | æ´»åŠ¨åç§°ï¼ˆå¦‚ï¼šæ‹…ä»»è¾…å¯¼å‘˜ã€ä¼šåŠ¡ä¹‰å·¥ï¼‰ |
| activity_desc | varchar(500) | YES | NULL | æ´»åŠ¨æè¿°ï¼ˆå¦‚ï¼šåˆæ¢ç­ç¬¬12æœŸã€å•†å­¦é™¢å¹´åº¦æ€»ç»“ä¼šï¼‰ |
| class_record_id | int | YES | NULL | å…³è”ä¸Šè¯¾è®¡åˆ’IDï¼ˆè¾…å¯¼å‘˜ä¸“ç”¨ï¼‰ |
| course_name | varchar(100) | YES | NULL | è¯¾ç¨‹åç§°ï¼ˆè¾…å¯¼å‘˜ä¸“ç”¨ï¼‰ |
| location | varchar(200) | YES | NULL | æ´»åŠ¨åœ°ç‚¹ï¼ˆå¦‚ï¼šåŒ—äº¬å¸‚æœé˜³åŒºã€çº¿ä¸Šæ´»åŠ¨ï¼‰ |
| start_time | datetime | NO | - | æ´»åŠ¨å¼€å§‹æ—¶é—´ |
| end_time | datetime | YES | NULL | æ´»åŠ¨ç»“æŸæ—¶é—´ |
| duration | varchar(50) | YES | NULL | æ´»åŠ¨æ—¶é•¿ï¼ˆå¦‚ï¼š3å¤©ã€5å°æ—¶ã€7å¤©ï¼‰ |
| participant_count | int | YES | NULL | å‚ä¸äººæ•°ï¼ˆå­¦å‘˜æ•°ã€å‚ä¼šäººæ•°ã€è½¬åŒ–äººæ•°ç­‰ï¼‰ |
| merit_points | decimal(10,2) | YES | 0.00 | è·å¾—åŠŸå¾·åˆ† |
| note | text | YES | NULL | æ´»åŠ¨å¤‡æ³¨/æ€»ç»“ |
| images | json | YES | NULL | æ´»åŠ¨å›¾ç‰‡åˆ—è¡¨ï¼ˆ**äº‘å­˜å‚¨**: `ambassador/activities/{record_id}/`ï¼ŒJSONå­˜å‚¨å¤šä¸ªURLï¼‰ |
| status | tinyint | YES | 1 | çŠ¶æ€ï¼š0æ— æ•ˆ/1æœ‰æ•ˆ/2å¾…å®¡æ ¸ |
| audit_admin_id | int | YES | NULL | å®¡æ ¸ç®¡ç†å‘˜ID |
| audit_time | datetime | YES | NULL | å®¡æ ¸æ—¶é—´ |
| audit_remark | varchar(500) | YES | NULL | å®¡æ ¸å¤‡æ³¨ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| idx_user_id | æ™®é€šç´¢å¼• | user_id | ç”¨æˆ·æŸ¥è¯¢ |
| idx_activity_type | æ™®é€šç´¢å¼• | activity_type | æ´»åŠ¨ç±»å‹æŸ¥è¯¢ |
| idx_class_record_id | æ™®é€šç´¢å¼• | class_record_id | ä¸Šè¯¾è®¡åˆ’æŸ¥è¯¢ |
| idx_start_time | æ™®é€šç´¢å¼• | start_time | æ´»åŠ¨æ—¶é—´æŸ¥è¯¢ |
| idx_status | æ™®é€šç´¢å¼• | status | çŠ¶æ€æŸ¥è¯¢ |
| idx_user_type | å¤åˆç´¢å¼• | user_id, activity_type | ç”¨æˆ·æ´»åŠ¨ç±»å‹è”åˆæŸ¥è¯¢ |
| idx_created_at | æ™®é€šç´¢å¼• | created_at | åˆ›å»ºæ—¶é—´æŸ¥è¯¢ |

---

### 14. ambassador_level_configs - å¤§ä½¿ç­‰çº§é…ç½®è¡¨

**è¡¨è¯´æ˜ï¼š** å­˜å‚¨å„å¤§ä½¿ç­‰çº§çš„ä¸šåŠ¡é…ç½®å‚æ•°ï¼ˆç§¯åˆ†æ¯”ä¾‹ã€å†»ç»“é‡‘é¢ã€å‡çº§é‡‘é¢ã€åé¢æ•°é‡ç­‰ï¼‰ï¼Œåå°å¯åŠ¨æ€è°ƒæ•´

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | é…ç½®IDï¼ˆä¸»é”®ï¼‰ |
| level | tinyint | NO | - | å¤§ä½¿ç­‰çº§ï¼š0æ™®é€šç”¨æˆ·/1å‡†é’é¸¾/2é’é¸¾/3é¸¿é¹„ |
| level_name | varchar(50) | NO | - | ç­‰çº§åç§° |
| merit_rate_basic | decimal(5,4) | YES | 0.0000 | æ¨èåˆæ¢ç­åŠŸå¾·åˆ†æ¯”ä¾‹ï¼ˆå¦‚0.3000=30%ï¼‰ |
| merit_rate_advanced | decimal(5,4) | YES | 0.0000 | æ¨èå¯†è®­ç­åŠŸå¾·åˆ†æ¯”ä¾‹ï¼ˆå¦‚0.2000=20%ï¼‰ |
| cash_rate_basic | decimal(5,4) | YES | 0.0000 | æ¨èåˆæ¢ç­å¯æç°ç§¯åˆ†æ¯”ä¾‹ |
| cash_rate_advanced | decimal(5,4) | YES | 0.0000 | æ¨èå¯†è®­ç­å¯æç°ç§¯åˆ†æ¯”ä¾‹ |
| frozen_points | decimal(10,2) | YES | 0.00 | å‡çº§æ—¶å‘æ”¾çš„å†»ç»“ç§¯åˆ†é‡‘é¢ |
| unfreeze_per_referral | decimal(10,2) | YES | 0.00 | æ¯æ¬¡æ¨èåˆæ¢ç­è§£å†»ç§¯åˆ†é‡‘é¢ |
| upgrade_payment_amount | decimal(10,2) | YES | 0.00 | æ”¯ä»˜ç±»å‹å‡çº§æ‰€éœ€é‡‘é¢ï¼ˆ0è¡¨ç¤ºä¸æ”¯æŒæ”¯ä»˜å‡çº§ï¼‰ |
| gift_quota_basic | int | YES | 0 | å‡çº§èµ é€åˆæ¢ç­åé¢æ•° |
| gift_quota_advanced | int | YES | 0 | å‡çº§èµ é€å¯†è®­ç­åé¢æ•° |
| can_earn_reward | tinyint(1) | YES | 0 | æ˜¯å¦å¯è·å¾—æ¨èå¥–åŠ±ï¼š0å¦/1æ˜¯ |
| status | tinyint | YES | 1 | çŠ¶æ€ï¼š0ç¦ç”¨/1å¯ç”¨ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| uk_level | å”¯ä¸€ç´¢å¼• | level | æ¯ä¸ªç­‰çº§å”¯ä¸€é…ç½® |
| idx_status | æ™®é€šç´¢å¼• | status | çŠ¶æ€æŸ¥è¯¢ |

**åˆå§‹æ•°æ®ï¼š**

| level | level_name | merit_rate_basic | merit_rate_advanced | cash_rate_basic | cash_rate_advanced | frozen_points | unfreeze_per_referral | upgrade_payment_amount | gift_quota_basic | gift_quota_advanced | can_earn_reward |
|-------|-----------|-----------------|--------------------|-----------------|--------------------|--------------|----------------------|----------------------|-----------------|--------------------|----|
| 0 | æ™®é€šç”¨æˆ· | 0.0000 | 0.0000 | 0.0000 | 0.0000 | 0.00 | 0.00 | 0.00 | 0 | 0 | 0 |
| 1 | å‡†é’é¸¾å¤§ä½¿ | 0.0000 | 0.0000 | 0.0000 | 0.0000 | 0.00 | 0.00 | 0.00 | 0 | 0 | 0 |
| 2 | é’é¸¾å¤§ä½¿ | 0.3000 | 0.2000 | 0.3000 | 0.2000 | 1688.00 | 1688.00 | 0.00 | 0 | 0 | 1 |
| 3 | é¸¿é¹„å¤§ä½¿ | 0.3000 | 0.2000 | 0.3000 | 0.2000 | 16880.00 | 1688.00 | 9800.00 | 10 | 0 | 1 |

---

## ç§¯åˆ†æ¨¡å—

### 15. merit_points_records - åŠŸå¾·åˆ†è®°å½•è¡¨

**è¡¨è¯´æ˜ï¼š** è®°å½•ç”¨æˆ·åŠŸå¾·åˆ†çš„è·å¾—ã€ä½¿ç”¨ã€è¿‡æœŸç­‰æµæ°´

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | è®°å½•ID |
| user_id | int | NO | - | ç”¨æˆ·ID |
| user_uid | varchar(64) | YES | NULL | ç”¨æˆ·UID |
| _openid | varchar(64) | NO | '' | CloudBase ç”¨æˆ·æ ‡è¯†ï¼ˆç”¨äºæ•°æ®éš”ç¦»ï¼‰ |
| type | tinyint | NO | - | ç±»å‹ï¼š1è·å¾—/2ä½¿ç”¨/3è¿‡æœŸ/4é€€å› |
| source | tinyint | NO | - | æ¥æºï¼š1æ¨èåˆæ¢ç­/2æ¨èå¯†è®­ç­/3è¾…å¯¼å‘˜/4ä¹‰å·¥/5æ²™é¾™æ´»åŠ¨/6å…‘æ¢/7å…¶ä»– |
| amount | decimal(10,2) | NO | - | å˜åŠ¨é‡‘é¢ï¼ˆæ­£æ•°å¢åŠ ï¼Œè´Ÿæ•°å‡å°‘ï¼‰ |
| balance_after | decimal(10,2) | YES | NULL | å˜åŠ¨åä½™é¢ |
| order_no | varchar(32) | YES | NULL | å…³è”è®¢å•å· |
| exchange_no | varchar(32) | YES | NULL | å…³è”å…‘æ¢å•å· |
| referee_user_id | int | YES | NULL | è¢«æ¨èäººIDï¼ˆæ¨èè·å¾—æ—¶ï¼‰ |
| referee_user_name | varchar(50) | YES | NULL | è¢«æ¨èäººå§“å |
| activity_name | varchar(100) | YES | NULL | æ´»åŠ¨åç§°ï¼ˆæ´»åŠ¨å¥–åŠ±æ—¶ï¼‰ |
| remark | varchar(500) | YES | NULL | å¤‡æ³¨ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| idx_user_id | æ™®é€šç´¢å¼• | user_id | ç”¨æˆ·æŸ¥è¯¢ |
| idx_type | æ™®é€šç´¢å¼• | type | ç±»å‹æŸ¥è¯¢ |
| idx_source | æ™®é€šç´¢å¼• | source | æ¥æºæŸ¥è¯¢ |
| idx_order_no | æ™®é€šç´¢å¼• | order_no | è®¢å•å·æŸ¥è¯¢ |
| idx_exchange_no | æ™®é€šç´¢å¼• | exchange_no | å…‘æ¢å•å·æŸ¥è¯¢ |
| idx_created_at | æ™®é€šç´¢å¼• | created_at | åˆ›å»ºæ—¶é—´æŸ¥è¯¢ |
| idx_user_type | å¤åˆç´¢å¼• | user_id, type | ç”¨æˆ·ç±»å‹è”åˆæŸ¥è¯¢ |
| idx_user_source | å¤åˆç´¢å¼• | user_id, source | ç”¨æˆ·æ¥æºè”åˆæŸ¥è¯¢ |

---

### 16. cash_points_records - ç§¯åˆ†è®°å½•è¡¨

**è¡¨è¯´æ˜ï¼š** è®°å½•ç”¨æˆ·ç§¯åˆ†ï¼ˆç°é‡‘ç§¯åˆ†ï¼‰çš„å†»ç»“ã€è§£å†»ã€æç°ç­‰æµæ°´

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | è®°å½•ID |
| user_id | int | NO | - | ç”¨æˆ·ID |
| user_uid | varchar(64) | YES | NULL | ç”¨æˆ·UID |
| _openid | varchar(64) | NO | '' | CloudBase ç”¨æˆ·æ ‡è¯†ï¼ˆç”¨äºæ•°æ®éš”ç¦»ï¼‰ |
| type | tinyint | NO | - | ç±»å‹ï¼š1è·å¾—å†»ç»“/2è§£å†»/3æç°ç”³è¯·/4æç°æˆåŠŸ/5æç°å¤±è´¥é€€å›/6ç³»ç»Ÿè°ƒæ•´ |
| amount | decimal(10,2) | NO | - | å˜åŠ¨é‡‘é¢ |
| frozen_after | decimal(10,2) | YES | NULL | å˜åŠ¨åå†»ç»“ä½™é¢ |
| available_after | decimal(10,2) | YES | NULL | å˜åŠ¨åå¯ç”¨ä½™é¢ |
| order_no | varchar(32) | YES | NULL | å…³è”è®¢å•å· |
| withdraw_no | varchar(32) | YES | NULL | å…³è”æç°å•å· |
| referee_user_id | int | YES | NULL | è¢«æ¨èäººIDï¼ˆè§£å†»æ—¶ï¼‰ |
| referee_user_name | varchar(50) | YES | NULL | è¢«æ¨èäººå§“å |
| remark | varchar(500) | YES | NULL | å¤‡æ³¨ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| idx_user_id | æ™®é€šç´¢å¼• | user_id | ç”¨æˆ·æŸ¥è¯¢ |
| idx_type | æ™®é€šç´¢å¼• | type | ç±»å‹æŸ¥è¯¢ |
| idx_order_no | æ™®é€šç´¢å¼• | order_no | è®¢å•å·æŸ¥è¯¢ |
| idx_withdraw_no | æ™®é€šç´¢å¼• | withdraw_no | æç°å•å·æŸ¥è¯¢ |
| idx_created_at | æ™®é€šç´¢å¼• | created_at | åˆ›å»ºæ—¶é—´æŸ¥è¯¢ |
| idx_user_type | å¤åˆç´¢å¼• | user_id, type | ç”¨æˆ·ç±»å‹è”åˆæŸ¥è¯¢ |

---

### 17. mall_goods - å•†åŸå•†å“è¡¨

**è¡¨è¯´æ˜ï¼š** å•†å­¦é™¢ç§¯åˆ†å•†åŸçš„å•†å“ä¿¡æ¯

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | å•†å“ID |
| goods_name | varchar(100) | NO | - | å•†å“åç§° |
| goods_image | varchar(255) | YES | NULL | å•†å“å›¾ç‰‡ï¼ˆ**äº‘å­˜å‚¨**: `mall/goods/{goods_id}_{timestamp}.{ext}`ï¼‰ |
| description | text | YES | NULL | å•†å“æè¿° |
| merit_points_price | decimal(10,2) | NO | - | åŠŸå¾·åˆ†ä»·æ ¼ |
| stock_quantity | int | YES | -1 | åº“å­˜æ•°é‡ï¼ˆ-1è¡¨ç¤ºæ— é™ï¼‰ |
| sold_quantity | int | YES | 0 | å·²å”®æ•°é‡ |
| limit_per_user | int | YES | 0 | æ¯äººé™å…‘æ•°é‡ï¼ˆ0è¡¨ç¤ºä¸é™ï¼‰ |
| sort_order | int | YES | 0 | æ’åºæƒé‡ |
| status | tinyint | YES | 1 | çŠ¶æ€ï¼š0ä¸‹æ¶/1ä¸Šæ¶ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| idx_status | æ™®é€šç´¢å¼• | status | çŠ¶æ€æŸ¥è¯¢ |
| idx_sort_order | æ™®é€šç´¢å¼• | sort_order | æ’åºæŸ¥è¯¢ |
| idx_merit_points_price | æ™®é€šç´¢å¼• | merit_points_price | ä»·æ ¼æŸ¥è¯¢ |

---

### 18. mall_exchange_records - å…‘æ¢è®°å½•è¡¨

**è¡¨è¯´æ˜ï¼š** è®°å½•ç”¨æˆ·ä½¿ç”¨åŠŸå¾·åˆ†å…‘æ¢å•†å“çš„è®°å½•

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | å…‘æ¢ID |
| exchange_no | varchar(32) | NO | - | å…‘æ¢å•å·ï¼ˆæ ¼å¼ï¼šEX + å¹´æœˆæ—¥ + 8ä½éšæœºæ•°ï¼‰ |
| user_id | int | NO | - | ç”¨æˆ·ID |
| user_uid | varchar(64) | YES | NULL | ç”¨æˆ·UID |
| user_name | varchar(50) | YES | NULL | ç”¨æˆ·å§“å |
| _openid | varchar(64) | NO | '' | CloudBase ç”¨æˆ·æ ‡è¯†ï¼ˆç”¨äºæ•°æ®éš”ç¦»ï¼‰ |
| goods_id | int | NO | - | å•†å“ID |
| goods_name | varchar(100) | NO | - | å•†å“åç§°ï¼ˆå†—ä½™ï¼‰ |
| goods_image | varchar(255) | YES | NULL | å•†å“å›¾ç‰‡ï¼ˆå†—ä½™ï¼Œæ¥è‡ª mall_goods.goods_imageï¼‰ |
| quantity | int | NO | 1 | å…‘æ¢æ•°é‡ |
| unit_price | decimal(10,2) | NO | - | å•ä»·ï¼ˆåŠŸå¾·åˆ†ï¼‰ |
| total_cost | decimal(10,2) | NO | - | æ€»æˆæœ¬ |
| merit_points_used | decimal(10,2) | NO | - | ä½¿ç”¨åŠŸå¾·åˆ† |
| cash_points_used | decimal(10,2) | YES | 0.00 | è¡¥å……çš„ç§¯åˆ† |
| status | tinyint | YES | 1 | çŠ¶æ€ï¼š1å·²å…‘æ¢/2å·²é¢†å–/3å·²å–æ¶ˆ |
| pickup_time | datetime | YES | NULL | é¢†å–æ—¶é—´ |
| pickup_admin_id | int | YES | NULL | é¢†å–ç¡®è®¤ç®¡ç†å‘˜ID |
| remark | varchar(500) | YES | NULL | å¤‡æ³¨ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | å…‘æ¢æ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| uk_exchange_no | å”¯ä¸€ç´¢å¼• | exchange_no | å…‘æ¢å•å·å”¯ä¸€ |
| idx_user_id | æ™®é€šç´¢å¼• | user_id | ç”¨æˆ·æŸ¥è¯¢ |
| idx_goods_id | æ™®é€šç´¢å¼• | goods_id | å•†å“æŸ¥è¯¢ |
| idx_status | æ™®é€šç´¢å¼• | status | çŠ¶æ€æŸ¥è¯¢ |
| idx_created_at | æ™®é€šç´¢å¼• | created_at | å…‘æ¢æ—¶é—´æŸ¥è¯¢ |
| idx_user_status | å¤åˆç´¢å¼• | user_id, status | ç”¨æˆ·çŠ¶æ€è”åˆæŸ¥è¯¢ |

---

## å•†å­¦é™¢æ¨¡å—

### 19. academy_intro - å•†å­¦é™¢ä»‹ç»è¡¨

**è¡¨è¯´æ˜ï¼š** å­˜å‚¨å•†å­¦é™¢ç®€ä»‹ã€å›¢é˜Ÿä¿¡æ¯ç­‰å†…å®¹

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | ä»‹ç»ID |
| title | varchar(100) | NO | - | æ ‡é¢˜ |
| content | text | YES | NULL | ä»‹ç»å†…å®¹ï¼ˆHTMLï¼‰ |
| cover_image | varchar(255) | YES | NULL | å°é¢å›¾ç‰‡ï¼ˆ**äº‘å­˜å‚¨**: `academy/intro/covers/{intro_id}_{timestamp}.{ext}`ï¼‰ |
| team | json | YES | NULL | å›¢é˜Ÿæˆå‘˜ä¿¡æ¯ |
| sort_order | int | YES | 0 | æ’åºæƒé‡ |
| status | tinyint | YES | 1 | çŠ¶æ€ï¼š0ç¦ç”¨/1å¯ç”¨ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| idx_status | æ™®é€šç´¢å¼• | status | çŠ¶æ€æŸ¥è¯¢ |
| idx_sort_order | æ™®é€šç´¢å¼• | sort_order | æ’åºæŸ¥è¯¢ |

---

### 20. academy_cases - å­¦å‘˜æ¡ˆä¾‹è¡¨

**è¡¨è¯´æ˜ï¼š** å±•ç¤ºä¼˜ç§€å­¦å‘˜çš„æˆåŠŸæ¡ˆä¾‹

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | æ¡ˆä¾‹ID |
| student_name | varchar(50) | NO | - | å­¦å‘˜å§“å |
| student_avatar | varchar(255) | YES | NULL | å­¦å‘˜å¤´åƒï¼ˆ**äº‘å­˜å‚¨**: `academy/cases/avatars/{case_id}_{timestamp}.{ext}`ï¼‰ |
| student_title | varchar(100) | YES | NULL | å­¦å‘˜å¤´è¡”/èŒä¸š |
| title | varchar(200) | NO | - | æ¡ˆä¾‹æ ‡é¢˜ |
| summary | varchar(500) | YES | NULL | æ¡ˆä¾‹æ‘˜è¦ |
| content | text | YES | NULL | è¯¦ç»†å†…å®¹ï¼ˆHTMLï¼‰ |
| video_url | varchar(255) | YES | NULL | è§†é¢‘URLï¼ˆ**äº‘å­˜å‚¨**: `academy/cases/videos/{case_id}_{timestamp}.mp4`ï¼‰ |
| images | json | YES | NULL | å›¾ç‰‡åˆ—è¡¨ï¼ˆ**äº‘å­˜å‚¨**: `academy/cases/images/{case_id}/`ï¼ŒJSONå­˜å‚¨å¤šä¸ªURLï¼‰ |
| course_id | int | YES | NULL | å…³è”è¯¾ç¨‹ID |
| course_name | varchar(100) | YES | NULL | å…³è”è¯¾ç¨‹åç§° |
| view_count | int | YES | 0 | æµè§ˆæ¬¡æ•° |
| like_count | int | YES | 0 | ç‚¹èµæ¬¡æ•° |
| sort_order | int | YES | 0 | æ’åºæƒé‡ |
| is_featured | tinyint(1) | YES | 0 | æ˜¯å¦ç²¾é€‰ |
| status | tinyint | YES | 1 | çŠ¶æ€ï¼š0ä¸‹æ¶/1ä¸Šæ¶ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| idx_course_id | æ™®é€šç´¢å¼• | course_id | è¯¾ç¨‹æŸ¥è¯¢ |
| idx_is_featured | æ™®é€šç´¢å¼• | is_featured | ç²¾é€‰æŸ¥è¯¢ |
| idx_status | æ™®é€šç´¢å¼• | status | çŠ¶æ€æŸ¥è¯¢ |
| idx_sort_order | æ™®é€šç´¢å¼• | sort_order | æ’åºæŸ¥è¯¢ |
| idx_created_at | æ™®é€šç´¢å¼• | created_at | åˆ›å»ºæ—¶é—´æŸ¥è¯¢ |

---

### 21. academy_materials - æœ‹å‹åœˆç´ æè¡¨

**è¡¨è¯´æ˜ï¼š** æä¾›ç»™å¤§ä½¿çš„æ¨å¹¿ç´ æï¼ˆæµ·æŠ¥ã€æ–‡æ¡ˆã€è§†é¢‘ç­‰ï¼‰

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | ç´ æID |
| title | varchar(100) | NO | - | ç´ ææ ‡é¢˜ |
| category | varchar(50) | NO | - | åˆ†ç±»ï¼šposteræµ·æŠ¥/copywritingæ–‡æ¡ˆ/videoè§†é¢‘ |
| image_url | varchar(255) | YES | NULL | å›¾ç‰‡URLï¼ˆ**äº‘å­˜å‚¨**: `academy/materials/{category}/{material_id}_{timestamp}.{ext}`ï¼‰ |
| video_url | varchar(255) | YES | NULL | è§†é¢‘URLï¼ˆ**äº‘å­˜å‚¨**: `academy/materials/videos/{material_id}_{timestamp}.mp4`ï¼‰ |
| content | text | YES | NULL | æ–‡æ¡ˆå†…å®¹ |
| tags | json | YES | NULL | æ ‡ç­¾åˆ—è¡¨ |
| view_count | int | YES | 0 | æµè§ˆæ¬¡æ•° |
| download_count | int | YES | 0 | ä¸‹è½½æ¬¡æ•° |
| share_count | int | YES | 0 | åˆ†äº«æ¬¡æ•° |
| sort_order | int | YES | 0 | æ’åºæƒé‡ |
| status | tinyint | YES | 1 | çŠ¶æ€ï¼š0ä¸‹æ¶/1ä¸Šæ¶ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| idx_category | æ™®é€šç´¢å¼• | category | åˆ†ç±»æŸ¥è¯¢ |
| idx_status | æ™®é€šç´¢å¼• | status | çŠ¶æ€æŸ¥è¯¢ |
| idx_sort_order | æ™®é€šç´¢å¼• | sort_order | æ’åºæŸ¥è¯¢ |
| idx_created_at | æ™®é€šç´¢å¼• | created_at | åˆ›å»ºæ—¶é—´æŸ¥è¯¢ |
| idx_category_status | å¤åˆç´¢å¼• | category, status | åˆ†ç±»çŠ¶æ€è”åˆæŸ¥è¯¢ |

---

### 23. announcements - å…¬å‘Šè¡¨

**è¡¨è¯´æ˜ï¼š** ç³»ç»Ÿå…¬å‘Šã€æ´»åŠ¨é€šçŸ¥ç­‰ä¿¡æ¯å‘å¸ƒ

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | å…¬å‘ŠID |
| title | varchar(200) | NO | - | å…¬å‘Šæ ‡é¢˜ |
| content | text | NO | - | å…¬å‘Šå†…å®¹ï¼ˆHTMLï¼‰ |
| summary | varchar(500) | YES | NULL | å…¬å‘Šæ‘˜è¦ |
| link | varchar(255) | YES | NULL | è·³è½¬é“¾æ¥ï¼ˆç”¨äºè½®æ’­å›¾ç­‰åœºæ™¯ï¼‰ |
| cover_image | varchar(255) | YES | NULL | å°é¢å›¾ç‰‡ï¼ˆ**äº‘å­˜å‚¨**: `announcements/covers/{announcement_id}_{timestamp}.{ext}`ï¼‰ |
| category | varchar(50) | YES | 'general' | åˆ†ç±»ï¼šgeneralé€šç”¨/courseè¯¾ç¨‹/activityæ´»åŠ¨/systemç³»ç»Ÿ/bannerè½®æ’­å›¾/announcementå…¬å‘Š |
| target_type | tinyint | YES | 0 | ç›®æ ‡ç±»å‹ï¼š0å…¨éƒ¨ç”¨æˆ·/1æ™®é€šç”¨æˆ·/2å¤§ä½¿ç”¨æˆ· |
| target_level | tinyint | YES | NULL | ç›®æ ‡å¤§ä½¿ç­‰çº§ï¼ˆtarget_type=2æ—¶ï¼‰ |
| is_top | tinyint(1) | YES | 0 | æ˜¯å¦ç½®é¡¶ |
| is_popup | tinyint(1) | YES | 0 | æ˜¯å¦å¼¹çª—æ˜¾ç¤º |
| start_time | datetime | YES | NULL | å¼€å§‹æ—¶é—´ |
| end_time | datetime | YES | NULL | ç»“æŸæ—¶é—´ |
| view_count | int | YES | 0 | æµè§ˆæ¬¡æ•° |
| sort_order | int | YES | 0 | æ’åºæƒé‡ |
| status | tinyint | YES | 1 | çŠ¶æ€ï¼š0è‰ç¨¿/1å·²å‘å¸ƒ/2å·²ä¸‹æ¶ |
| created_by | int | YES | NULL | åˆ›å»ºäººID |
| published_at | datetime | YES | NULL | å‘å¸ƒæ—¶é—´ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| idx_category | æ™®é€šç´¢å¼• | category | åˆ†ç±»æŸ¥è¯¢ |
| idx_target_type | æ™®é€šç´¢å¼• | target_type | ç›®æ ‡ç±»å‹æŸ¥è¯¢ |
| idx_is_top | æ™®é€šç´¢å¼• | is_top | ç½®é¡¶æŸ¥è¯¢ |
| idx_is_popup | æ™®é€šç´¢å¼• | is_popup | å¼¹çª—æŸ¥è¯¢ |
| idx_start_time | æ™®é€šç´¢å¼• | start_time | å¼€å§‹æ—¶é—´æŸ¥è¯¢ |
| idx_end_time | æ™®é€šç´¢å¼• | end_time | ç»“æŸæ—¶é—´æŸ¥è¯¢ |
| idx_status | æ™®é€šç´¢å¼• | status | çŠ¶æ€æŸ¥è¯¢ |
| idx_sort_order | æ™®é€šç´¢å¼• | sort_order | æ’åºæŸ¥è¯¢ |
| idx_created_by | æ™®é€šç´¢å¼• | created_by | åˆ›å»ºäººæŸ¥è¯¢ |
| idx_status_time | å¤åˆç´¢å¼• | status, start_time, end_time | çŠ¶æ€æ—¶é—´è”åˆæŸ¥è¯¢ |

---

### 22. academy_progress - å­¦ä¹ è¿›åº¦è®°å½•è¡¨

**è¡¨è¯´æ˜ï¼š** è®°å½•ç”¨æˆ·åœ¨å•†å­¦é™¢è¯¾ç¨‹ä¸­çš„å­¦ä¹ è¿›åº¦

**å­—æ®µåˆ—è¡¨:**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | è¿›åº¦è®°å½•ID |
| user_id | int | NO | - | ç”¨æˆ·ID |
| _openid | varchar(64) | NO | '' | ç”¨æˆ·openid |
| course_id | int | NO | - | è¯¾ç¨‹ID |
| lesson_id | int | NO | - | è¯¾æ—¶ID |
| progress_percent | decimal(5,2) | YES | 0.00 | å­¦ä¹ è¿›åº¦ç™¾åˆ†æ¯” |
| watch_duration | int | YES | 0 | è§‚çœ‹æ—¶é•¿(ç§’) |
| last_position | int | YES | 0 | æœ€åæ’­æ”¾ä½ç½®(ç§’) |
| completed | tinyint | YES | 0 | æ˜¯å¦å®Œæˆï¼š0æœªå®Œæˆ/1å·²å®Œæˆ |
| completed_at | datetime | YES | NULL | å®Œæˆæ—¶é—´ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| idx_user_id | æ™®é€šç´¢å¼• | user_id | ç”¨æˆ·æŸ¥è¯¢ |
| idx_course_id | æ™®é€šç´¢å¼• | course_id | è¯¾ç¨‹æŸ¥è¯¢ |
| idx_lesson_id | æ™®é€šç´¢å¼• | lesson_id | è¯¾æ—¶æŸ¥è¯¢ |
| idx_user_course | å¤åˆç´¢å¼• | user_id, course_id | ç”¨æˆ·è¯¾ç¨‹è”åˆæŸ¥è¯¢ |

---

## åè®®æ¨¡å—

### 24. contract_templates - åè®®æ¨¡æ¿è¡¨

**è¡¨è¯´æ˜ï¼š** å­˜å‚¨å„ç±»å¤§ä½¿åè®®çš„æ¨¡æ¿

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | æ¨¡æ¿ID |
| contract_name | varchar(100) | NO | - | åè®®åç§° |
| contract_type | tinyint | NO | - | åè®®ç±»å‹ï¼š1ä¼ æ’­å¤§ä½¿åè®®/2é’é¸¾å¤§ä½¿åè®®/3é¸¿é¹„å¤§ä½¿è¡¥å……åè®® |
| ambassador_level | tinyint | NO | - | é€‚ç”¨å¤§ä½¿ç­‰çº§ï¼š1å‡†é’é¸¾/2é’é¸¾/3é¸¿é¹„ |
| version | varchar(20) | NO | - | ç‰ˆæœ¬å·ï¼ˆå¦‚ï¼šv1.0ï¼‰ |
| version_note | varchar(500) | YES | NULL | ç‰ˆæœ¬è¯´æ˜ |
| content | text | NO | - | åè®®å†…å®¹ï¼ˆHTMLï¼Œæ”¯æŒå˜é‡å ä½ç¬¦ï¼‰ |
| validity_years | int | YES | 1 | åè®®æœ‰æ•ˆæœŸï¼ˆå¹´ï¼‰ |
| effective_time | datetime | YES | NULL | ç”Ÿæ•ˆæ—¶é—´ |
| status | tinyint | YES | 1 | çŠ¶æ€ï¼š0ç¦ç”¨/1å¯ç”¨ |
| created_by | int | YES | NULL | åˆ›å»ºç®¡ç†å‘˜ID |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| idx_contract_type | æ™®é€šç´¢å¼• | contract_type | åè®®ç±»å‹æŸ¥è¯¢ |
| idx_ambassador_level | æ™®é€šç´¢å¼• | ambassador_level | å¤§ä½¿ç­‰çº§æŸ¥è¯¢ |
| idx_version | æ™®é€šç´¢å¼• | version | ç‰ˆæœ¬æŸ¥è¯¢ |
| idx_status | æ™®é€šç´¢å¼• | status | çŠ¶æ€æŸ¥è¯¢ |
| idx_type_level_status | å¤åˆç´¢å¼• | contract_type, ambassador_level, status | ç±»å‹ç­‰çº§çŠ¶æ€è”åˆæŸ¥è¯¢ |

---

### 25. contract_signatures - åè®®ç­¾ç½²è®°å½•è¡¨

**è¡¨è¯´æ˜ï¼š** è®°å½•ç”¨æˆ·ç­¾ç½²åè®®çš„å†å²å’Œè¯¦æƒ…

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | ç­¾ç½²ID |
| user_id | int | NO | - | ç”¨æˆ·ID |
| user_uid | varchar(64) | YES | NULL | ç”¨æˆ·UID |
| user_name | varchar(50) | YES | NULL | ç”¨æˆ·å§“å |
| _openid | varchar(64) | NO | '' | CloudBase ç”¨æˆ·æ ‡è¯†ï¼ˆç”¨äºæ•°æ®éš”ç¦»ï¼‰ |
| contract_template_id | int | NO | - | åè®®æ¨¡æ¿ID |
| ambassador_level | tinyint | NO | - | ç­¾ç½²æ—¶çš„å¤§ä½¿ç­‰çº§ |
| contract_name | varchar(100) | NO | - | åè®®åç§° |
| contract_version | varchar(20) | NO | - | åè®®ç‰ˆæœ¬ |
| contract_content | text | NO | - | åè®®å®Œæ•´å†…å®¹ï¼ˆå·²å¡«å……å˜é‡ï¼‰ |
| contract_start | date | NO | - | åˆåŒå¼€å§‹æ—¥æœŸ |
| contract_end | date | NO | - | åˆåŒç»“æŸæ—¥æœŸ |
| sign_time | datetime | NO | - | ç­¾ç½²æ—¶é—´ |
| sign_type | tinyint | YES | 1 | ç­¾ç½²ç±»å‹ï¼š1ç”¨æˆ·ç­¾ç½²/2ç®¡ç†å‘˜ç»­ç­¾ |
| sign_phone_suffix | varchar(4) | YES | NULL | ç­¾ç½²æ‰‹æœºå·åå››ä½ |
| sign_ip | varchar(50) | YES | NULL | ç­¾ç½²IPåœ°å€ |
| sign_device | json | YES | NULL | ç­¾ç½²è®¾å¤‡ä¿¡æ¯ |
| admin_id | int | YES | NULL | æ“ä½œç®¡ç†å‘˜IDï¼ˆç»­ç­¾æ—¶ï¼‰ |
| status | tinyint | YES | 1 | çŠ¶æ€ï¼š0å·²ä½œåºŸ/1æœ‰æ•ˆ/2å·²è¿‡æœŸ/3å·²ç»­ç­¾ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| idx_user_id | æ™®é€šç´¢å¼• | user_id | ç”¨æˆ·æŸ¥è¯¢ |
| idx_contract_template_id | æ™®é€šç´¢å¼• | contract_template_id | æ¨¡æ¿æŸ¥è¯¢ |
| idx_ambassador_level | æ™®é€šç´¢å¼• | ambassador_level | å¤§ä½¿ç­‰çº§æŸ¥è¯¢ |
| idx_contract_end | æ™®é€šç´¢å¼• | contract_end | åˆåŒç»“æŸæ—¥æœŸæŸ¥è¯¢ |
| idx_sign_time | æ™®é€šç´¢å¼• | sign_time | ç­¾ç½²æ—¶é—´æŸ¥è¯¢ |
| idx_sign_type | æ™®é€šç´¢å¼• | sign_type | ç­¾ç½²ç±»å‹æŸ¥è¯¢ |
| idx_status | æ™®é€šç´¢å¼• | status | çŠ¶æ€æŸ¥è¯¢ |
| idx_user_status | å¤åˆç´¢å¼• | user_id, status | ç”¨æˆ·çŠ¶æ€è”åˆæŸ¥è¯¢ |
| idx_admin_id | æ™®é€šç´¢å¼• | admin_id | ç®¡ç†å‘˜æŸ¥è¯¢ |

---

## åé¦ˆæ¶ˆæ¯æ¨¡å—

### 26. feedbacks - åé¦ˆè¡¨

**è¡¨è¯´æ˜ï¼š** ç”¨æˆ·åé¦ˆå’Œå»ºè®®çš„æ”¶é›†å¤„ç†

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | åé¦ˆID |
| type | tinyint | NO | 1 | åé¦ˆç±»å‹ï¼š1è¯¾ç¨‹å†…å®¹/2åŠŸèƒ½å»ºè®®/3ç³»ç»Ÿé—®é¢˜/4æœåŠ¡æ€åº¦/5å…¶ä»–åé¦ˆ |
| user_id | int | NO | - | ç”¨æˆ·ID |
| user_uid | varchar(64) | YES | NULL | ç”¨æˆ·UID |
| user_name | varchar(50) | YES | NULL | ç”¨æˆ·å§“å |
| user_phone | varchar(20) | YES | NULL | ç”¨æˆ·æ‰‹æœºå· |
| _openid | varchar(64) | NO | '' | CloudBase ç”¨æˆ·æ ‡è¯†ï¼ˆç”¨äºæ•°æ®éš”ç¦»ï¼‰ |
| feedback_type | tinyint | NO | - | åé¦ˆç±»å‹ï¼š1åŠŸèƒ½å»ºè®®/2è¯¾ç¨‹å†…å®¹/3è¯¾ç¨‹æœåŠ¡/4ç³»ç»Ÿé—®é¢˜/5å…¶ä»– |
| course_id | int | YES | NULL | å…³è”è¯¾ç¨‹IDï¼ˆè¯¾ç¨‹ç›¸å…³åé¦ˆï¼‰ |
| course_name | varchar(100) | YES | NULL | å…³è”è¯¾ç¨‹åç§° |
| content | text | NO | - | åé¦ˆå†…å®¹ |
| images | json | YES | NULL | å›¾ç‰‡åˆ—è¡¨ï¼ˆ**äº‘å­˜å‚¨**: `feedbacks/images/{feedback_id}/`ï¼ŒJSONå­˜å‚¨å¤šä¸ªURLï¼‰ |
| contact | varchar(100) | YES | NULL | è”ç³»æ–¹å¼ |
| status | tinyint | YES | 0 | çŠ¶æ€ï¼š0å¾…å¤„ç†/1å¤„ç†ä¸­/2å·²å¤„ç†/3å·²å…³é—­ |
| reply | text | YES | NULL | å›å¤å†…å®¹ |
| reply_time | datetime | YES | NULL | å›å¤æ—¶é—´ |
| reply_admin_id | int | YES | NULL | å›å¤ç®¡ç†å‘˜ID |
| priority | tinyint | YES | 0 | ä¼˜å…ˆçº§ï¼š0æ™®é€š/1ç´§æ€¥/2éå¸¸ç´§æ€¥ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | æäº¤æ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| idx_type | æ™®é€šç´¢å¼• | type | åé¦ˆç±»å‹æŸ¥è¯¢ |
| idx_user_id | æ™®é€šç´¢å¼• | user_id | ç”¨æˆ·æŸ¥è¯¢ |
| idx_feedback_type | æ™®é€šç´¢å¼• | feedback_type | åé¦ˆç±»å‹æŸ¥è¯¢ |
| idx_course_id | æ™®é€šç´¢å¼• | course_id | è¯¾ç¨‹æŸ¥è¯¢ |
| idx_status | æ™®é€šç´¢å¼• | status | çŠ¶æ€æŸ¥è¯¢ |
| idx_priority | æ™®é€šç´¢å¼• | priority | ä¼˜å…ˆçº§æŸ¥è¯¢ |
| idx_reply_admin_id | æ™®é€šç´¢å¼• | reply_admin_id | å›å¤ç®¡ç†å‘˜æŸ¥è¯¢ |
| idx_created_at | æ™®é€šç´¢å¼• | created_at | æäº¤æ—¶é—´æŸ¥è¯¢ |
| idx_status_priority | å¤åˆç´¢å¼• | status, priority | çŠ¶æ€ä¼˜å…ˆçº§è”åˆæŸ¥è¯¢ |

---

### 27. notification_configs - æ¶ˆæ¯é…ç½®è¡¨

**è¡¨è¯´æ˜ï¼š** é…ç½®å„ç±»æ¶ˆæ¯é€šçŸ¥çš„æ¨¡æ¿å’Œè§¦å‘è§„åˆ™

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | é…ç½®ID |
| name | varchar(100) | NO | '' | é€šçŸ¥åç§° |
| config_name | varchar(100) | NO | - | é…ç½®åç§° |
| config_code | varchar(50) | NO | - | é…ç½®ç¼–ç ï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰ |
| course_id | int | YES | NULL | å…³è”è¯¾ç¨‹IDï¼ˆ0è¡¨ç¤ºé€šç”¨ï¼‰ |
| trigger_type | tinyint | NO | - | è§¦å‘ç±»å‹ï¼š1é¢„çº¦æˆåŠŸ/2ä¸Šè¯¾æé†’/3ç­¾åˆ°æˆåŠŸ/4æ”¯ä»˜æˆåŠŸ/5æ‰‹åŠ¨å‘é€ |
| trigger_time_offset | int | YES | 0 | è§¦å‘æ—¶é—´åç§»ï¼ˆåˆ†é’Ÿï¼Œè´Ÿæ•°è¡¨ç¤ºæå‰ï¼‰ |
| template_id | varchar(100) | YES | NULL | å¾®ä¿¡è®¢é˜…æ¶ˆæ¯æ¨¡æ¿ID |
| template_name | varchar(100) | YES | NULL | æ¨¡æ¿åç§° |
| title | varchar(100) | YES | NULL | æ¶ˆæ¯æ ‡é¢˜ |
| content_template | text | YES | NULL | æ¶ˆæ¯å†…å®¹æ¨¡æ¿ï¼ˆæ”¯æŒå˜é‡ï¼‰ |
| page_path | varchar(200) | YES | NULL | ç‚¹å‡»è·³è½¬é¡µé¢è·¯å¾„ |
| status | tinyint | YES | 1 | çŠ¶æ€ï¼š0ç¦ç”¨/1å¯ç”¨ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| uk_name | å”¯ä¸€ç´¢å¼• | name | é€šçŸ¥åç§°å”¯ä¸€ |
| uk_config_code | å”¯ä¸€ç´¢å¼• | config_code | é…ç½®ç¼–ç å”¯ä¸€ |
| idx_course_id | æ™®é€šç´¢å¼• | course_id | è¯¾ç¨‹æŸ¥è¯¢ |
| idx_trigger_type | æ™®é€šç´¢å¼• | trigger_type | è§¦å‘ç±»å‹æŸ¥è¯¢ |
| idx_status | æ™®é€šç´¢å¼• | status | çŠ¶æ€æŸ¥è¯¢ |
| idx_course_trigger | å¤åˆç´¢å¼• | course_id, trigger_type | è¯¾ç¨‹è§¦å‘ç±»å‹è”åˆæŸ¥è¯¢ |

---

### 28. notification_logs - æ¶ˆæ¯å‘é€æ—¥å¿—è¡¨

**è¡¨è¯´æ˜ï¼š** è®°å½•æ‰€æœ‰æ¶ˆæ¯çš„å‘é€å†å²å’ŒçŠ¶æ€

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | æ—¥å¿—ID |
| user_id | int | NO | - | ç”¨æˆ·ID |
| user_uid | varchar(64) | YES | NULL | ç”¨æˆ·UID |
| openid | varchar(128) | YES | NULL | å¾®ä¿¡OpenID |
| _openid | varchar(64) | NO | '' | CloudBase ç”¨æˆ·æ ‡è¯†ï¼ˆç”¨äºæ•°æ®éš”ç¦»ï¼‰ |
| config_id | int | YES | NULL | æ¶ˆæ¯é…ç½®ID |
| template_id | varchar(100) | YES | NULL | å¾®ä¿¡æ¨¡æ¿ID |
| class_record_id | int | YES | NULL | å…³è”ä¸Šè¯¾è®¡åˆ’ID |
| order_no | varchar(32) | YES | NULL | å…³è”è®¢å•å· |
| appointment_id | int | YES | NULL | å…³è”é¢„çº¦ID |
| title | varchar(100) | YES | NULL | æ¶ˆæ¯æ ‡é¢˜ |
| content | text | YES | NULL | æ¶ˆæ¯å†…å®¹ |
| template_data | json | YES | NULL | æ¨¡æ¿æ•°æ®ï¼ˆå‘é€ç»™å¾®ä¿¡çš„æ•°æ®ï¼‰ |
| send_type | tinyint | YES | 1 | å‘é€ç±»å‹ï¼š1è‡ªåŠ¨/2æ‰‹åŠ¨ |
| send_status | tinyint | YES | 0 | å‘é€çŠ¶æ€ï¼š0å¾…å‘é€/1å·²å‘é€/2å‘é€å¤±è´¥ |
| send_time | datetime | YES | NULL | å‘é€æ—¶é—´ |
| error_message | text | YES | NULL | å‘é€å¤±è´¥æ—¶çš„é”™è¯¯ä¿¡æ¯ |
| admin_id | int | YES | NULL | æ‰‹åŠ¨å‘é€æ—¶çš„ç®¡ç†å‘˜ID |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| idx_user_id | æ™®é€šç´¢å¼• | user_id | ç”¨æˆ·æŸ¥è¯¢ |
| idx_config_id | æ™®é€šç´¢å¼• | config_id | é…ç½®æŸ¥è¯¢ |
| idx_class_record_id | æ™®é€šç´¢å¼• | class_record_id | ä¸Šè¯¾è®¡åˆ’æŸ¥è¯¢ |
| idx_order_no | æ™®é€šç´¢å¼• | order_no | è®¢å•å·æŸ¥è¯¢ |
| idx_appointment_id | æ™®é€šç´¢å¼• | appointment_id | é¢„çº¦æŸ¥è¯¢ |
| idx_send_type | æ™®é€šç´¢å¼• | send_type | å‘é€ç±»å‹æŸ¥è¯¢ |
| idx_send_status | æ™®é€šç´¢å¼• | send_status | å‘é€çŠ¶æ€æŸ¥è¯¢ |
| idx_send_time | æ™®é€šç´¢å¼• | send_time | å‘é€æ—¶é—´æŸ¥è¯¢ |
| idx_admin_id | æ™®é€šç´¢å¼• | admin_id | ç®¡ç†å‘˜æŸ¥è¯¢ |
| idx_created_at | æ™®é€šç´¢å¼• | created_at | åˆ›å»ºæ—¶é—´æŸ¥è¯¢ |
| idx_class_status | å¤åˆç´¢å¼• | class_record_id, send_status | ä¸Šè¯¾è®¡åˆ’çŠ¶æ€è”åˆæŸ¥è¯¢ |

---

### 29. subscription_message_logs - è®¢é˜…æ¶ˆæ¯å‘é€è®°å½•è¡¨

**è¡¨è¯´æ˜ï¼š** ç”¨äºè®°å½•å¾®ä¿¡è®¢é˜…æ¶ˆæ¯çš„å‘é€çŠ¶æ€å’Œäº‹ä»¶å›è°ƒ

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int unsigned | NO | - | ä¸»é”®ID |
| user_id | int unsigned | NO | - | ç”¨æˆ·ID |
| openid | varchar(64) | NO | - | ç”¨æˆ·OpenID |
| template_id | varchar(64) | NO | - | æ¨¡æ¿ID |
| page | varchar(255) | YES | NULL | è·³è½¬é¡µé¢è·¯å¾„ |
| data | text | YES | NULL | æ¨¡æ¿æ•°æ®ï¼ˆJSONæ ¼å¼ï¼‰ |
| send_status | tinyint(1) | YES | 0 | å‘é€çŠ¶æ€ï¼š0å¾…å‘é€/1å‘é€æˆåŠŸ/2å‘é€å¤±è´¥ |
| fail_reason | varchar(255) | YES | NULL | å¤±è´¥åŸå›  |
| event_type | varchar(32) | YES | NULL | äº‹ä»¶ç±»å‹ï¼šsubscribe_msg_sent_event/subscribe_msg_popup_event |
| event_time | datetime | YES | NULL | äº‹ä»¶å›è°ƒæ—¶é—´ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| idx_user_id | æ™®é€šç´¢å¼• | user_id | ç”¨æˆ·æŸ¥è¯¢ |
| idx_openid | æ™®é€šç´¢å¼• | openid | OpenIDæŸ¥è¯¢ |
| idx_send_status | æ™®é€šç´¢å¼• | send_status | å‘é€çŠ¶æ€æŸ¥è¯¢ |
| idx_created_at | æ™®é€šç´¢å¼• | created_at | åˆ›å»ºæ—¶é—´æŸ¥è¯¢ |

---

## åå°ç®¡ç†æ¨¡å—

### 30. admin_users - ç®¡ç†å‘˜è¡¨

**è¡¨è¯´æ˜ï¼š** åå°ç®¡ç†ç³»ç»Ÿçš„ç®¡ç†å‘˜è´¦å·

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | ç®¡ç†å‘˜ID |
| username | varchar(50) | NO | - | ç”¨æˆ·å |
| password | varchar(255) | NO | - | å¯†ç ï¼ˆåŠ å¯†å­˜å‚¨ï¼‰ |
| real_name | varchar(50) | YES | NULL | çœŸå®å§“å |
| phone | varchar(20) | YES | NULL | æ‰‹æœºå· |
| email | varchar(100) | YES | NULL | é‚®ç®± |
| avatar | varchar(255) | YES | NULL | å¤´åƒURLï¼ˆ**äº‘å­˜å‚¨**: `admin/avatars/{admin_id}_{timestamp}.{ext}`ï¼‰ |
| role | varchar(50) | NO | 'admin' | è§’è‰²ï¼šsuper_adminè¶…çº§ç®¡ç†å‘˜/adminç®¡ç†å‘˜/operatoræ“ä½œå‘˜ |
| permissions | json | YES | NULL | æƒé™åˆ—è¡¨ |
| last_login_time | datetime | YES | NULL | æœ€åç™»å½•æ—¶é—´ |
| last_login_ip | varchar(50) | YES | NULL | æœ€åç™»å½•IP |
| login_count | int | YES | 0 | ç™»å½•æ¬¡æ•° |
| status | tinyint | YES | 1 | çŠ¶æ€ï¼š0ç¦ç”¨/1å¯ç”¨ |
| created_by | int | YES | NULL | åˆ›å»ºäººID |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| uk_username | å”¯ä¸€ç´¢å¼• | username | ç”¨æˆ·åå”¯ä¸€ |
| idx_role | æ™®é€šç´¢å¼• | role | è§’è‰²æŸ¥è¯¢ |
| idx_status | æ™®é€šç´¢å¼• | status | çŠ¶æ€æŸ¥è¯¢ |
| idx_phone | æ™®é€šç´¢å¼• | phone | æ‰‹æœºå·æŸ¥è¯¢ |
| idx_email | æ™®é€šç´¢å¼• | email | é‚®ç®±æŸ¥è¯¢ |

---

### 31. admin_operation_logs - æ“ä½œæ—¥å¿—è¡¨

**è¡¨è¯´æ˜ï¼š** è®°å½•ç®¡ç†å‘˜çš„æ‰€æœ‰æ“ä½œè¡Œä¸º

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | æ—¥å¿—ID |
| admin_id | int | NO | - | ç®¡ç†å‘˜ID |
| admin_name | varchar(50) | YES | NULL | ç®¡ç†å‘˜å§“å |
| operation_type | varchar(50) | NO | - | æ“ä½œç±»å‹ |
| operation_name | varchar(100) | YES | NULL | æ“ä½œåç§° |
| operation_desc | varchar(500) | YES | NULL | æ“ä½œæè¿° |
| related_table | varchar(50) | YES | NULL | å…³è”è¡¨å |
| related_id | int | YES | NULL | å…³è”è®°å½•ID |
| request_method | varchar(10) | YES | NULL | è¯·æ±‚æ–¹æ³• |
| request_url | varchar(255) | YES | NULL | è¯·æ±‚URL |
| request_params | text | YES | NULL | è¯·æ±‚å‚æ•° |
| response_data | text | YES | NULL | å“åº”æ•°æ® |
| before_data | json | YES | NULL | å˜æ›´å‰æ•°æ® |
| after_data | json | YES | NULL | å˜æ›´åæ•°æ® |
| ip_address | varchar(50) | YES | NULL | æ“ä½œIP |
| user_agent | varchar(500) | YES | NULL | ç”¨æˆ·ä»£ç† |
| result | tinyint | YES | 1 | æ‰§è¡Œç»“æœï¼š0å¤±è´¥/1æˆåŠŸ |
| error_message | text | YES | NULL | é”™è¯¯ä¿¡æ¯ |
| remark | text | YES | NULL | å¤‡æ³¨ |
| created_at | datetime | YES | CURRENT_TIMESTAMP | æ“ä½œæ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| idx_admin_id | æ™®é€šç´¢å¼• | admin_id | ç®¡ç†å‘˜æŸ¥è¯¢ |
| idx_operation_type | æ™®é€šç´¢å¼• | operation_type | æ“ä½œç±»å‹æŸ¥è¯¢ |
| idx_related_table | æ™®é€šç´¢å¼• | related_table | å…³è”è¡¨æŸ¥è¯¢ |
| idx_related_id | æ™®é€šç´¢å¼• | related_id | å…³è”IDæŸ¥è¯¢ |
| idx_result | æ™®é€šç´¢å¼• | result | æ‰§è¡Œç»“æœæŸ¥è¯¢ |
| idx_created_at | æ™®é€šç´¢å¼• | created_at | æ“ä½œæ—¶é—´æŸ¥è¯¢ |
| idx_admin_type | å¤åˆç´¢å¼• | admin_id, operation_type | ç®¡ç†å‘˜æ“ä½œç±»å‹è”åˆæŸ¥è¯¢ |
| idx_table_id | å¤åˆç´¢å¼• | related_table, related_id | è¡¨IDè”åˆæŸ¥è¯¢ |

---

## ç³»ç»Ÿé…ç½®æ¨¡å—

### 32. system_configs - ç³»ç»Ÿé…ç½®è¡¨

**è¡¨è¯´æ˜ï¼š** å­˜å‚¨ç³»ç»Ÿçº§åˆ«çš„é…ç½®å‚æ•°

**å­—æ®µåˆ—è¡¨ï¼š**

| å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | æ³¨é‡Š |
|-------|------|------|--------|------|
| id | int | NO | - | é…ç½®ID |
| config_key | varchar(100) | NO | - | é…ç½®é”® |
| config_value | text | YES | NULL | é…ç½®å€¼ |
| config_type | varchar(20) | YES | 'string' | å€¼ç±»å‹ï¼šstring/number/boolean/json |
| config_group | varchar(50) | YES | 'general' | é…ç½®åˆ†ç»„ |
| config_name | varchar(100) | YES | NULL | é…ç½®åç§° |
| config_desc | varchar(500) | YES | NULL | é…ç½®æè¿° |
| is_system | tinyint(1) | YES | 0 | æ˜¯å¦ç³»ç»Ÿé…ç½®ï¼ˆä¸å¯åˆ é™¤ï¼‰ |
| status | tinyint | YES | 1 | çŠ¶æ€ï¼š0ç¦ç”¨/1å¯ç”¨ |
| updated_by | int | YES | NULL | æœ€åä¿®æ”¹äººID |
| created_at | datetime | YES | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | datetime | YES | CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•åˆ—è¡¨ï¼š**

| ç´¢å¼•å | ç±»å‹ | å­—æ®µ | è¯´æ˜ |
|-------|------|------|------|
| PRIMARY | ä¸»é”® | id | ä¸»é”®ç´¢å¼• |
| uk_config_key | å”¯ä¸€ç´¢å¼• | config_key | é…ç½®é”®å”¯ä¸€ |
| idx_config_group | æ™®é€šç´¢å¼• | config_group | é…ç½®åˆ†ç»„æŸ¥è¯¢ |
| idx_status | æ™®é€šç´¢å¼• | status | çŠ¶æ€æŸ¥è¯¢ |

---

## ğŸ—„ï¸ äº‘å­˜å‚¨å­—æ®µæ±‡æ€»

ä»¥ä¸‹å­—æ®µéœ€è¦å­˜å‚¨åˆ° CloudBase äº‘å­˜å‚¨ï¼š

| è¡¨å | å­—æ®µå | äº‘å­˜å‚¨è·¯å¾„ | æ–‡ä»¶ç±»å‹ |
|-----|-------|-----------|---------|
| users | avatar | `users/avatars/{uid}_{timestamp}.{ext}` | å›¾ç‰‡ |
| courses | cover_image | `courses/covers/{course_id}_{timestamp}.{ext}` | å›¾ç‰‡ |
| courses | content | `courses/content/{course_id}/` | å›¾ç‰‡ï¼ˆå¯Œæ–‡æœ¬ï¼‰ |
| ambassador_activity_records | images | `ambassador/activities/{record_id}/` | å›¾ç‰‡ï¼ˆJSONæ•°ç»„ï¼‰ |
| academy_intro | cover_image | `academy/intro/covers/{intro_id}_{timestamp}.{ext}` | å›¾ç‰‡ |
| academy_cases | student_avatar | `academy/cases/avatars/{case_id}_{timestamp}.{ext}` | å›¾ç‰‡ |
| academy_cases | video_url | `academy/cases/videos/{case_id}_{timestamp}.mp4` | è§†é¢‘ |
| academy_cases | images | `academy/cases/images/{case_id}/` | å›¾ç‰‡ï¼ˆJSONæ•°ç»„ï¼‰ |
| academy_materials | image_url | `academy/materials/{category}/{material_id}_{timestamp}.{ext}` | å›¾ç‰‡ |
| academy_materials | video_url | `academy/materials/videos/{material_id}_{timestamp}.mp4` | è§†é¢‘ |
| announcements | cover_image | `announcements/covers/{announcement_id}_{timestamp}.{ext}` | å›¾ç‰‡ |
| feedbacks | images | `feedbacks/images/{feedback_id}/` | å›¾ç‰‡ï¼ˆJSONæ•°ç»„ï¼‰ |
| mall_goods | goods_image | `mall/goods/{goods_id}_{timestamp}.{ext}` | å›¾ç‰‡ |
| admin_users | avatar | `admin/avatars/{admin_id}_{timestamp}.{ext}` | å›¾ç‰‡ |

> **è¯´æ˜**: 
> - æ‰€æœ‰äº‘å­˜å‚¨è·¯å¾„ä½¿ç”¨ `ä¸šåŠ¡æ ‡è¯†_æ—¶é—´æˆ³.æ‰©å±•å` çš„å‘½åæ ¼å¼
> - JSONæ•°ç»„å­—æ®µå­˜å‚¨å¤šä¸ªæ–‡ä»¶çš„å®Œæ•´URL
> - å¯Œæ–‡æœ¬å­—æ®µï¼ˆcontentï¼‰ä¸­çš„å›¾ç‰‡éœ€å•ç‹¬ä¸Šä¼ åˆ°å¯¹åº”ç›®å½•
> - è¯¦ç»†çš„äº‘å­˜å‚¨æ¶æ„è®¾è®¡è¯·å‚è€ƒï¼š[äº‘å­˜å‚¨æ¶æ„æ–‡æ¡£](../../universal-cloudbase-uniapp-template/cloudfunctions/cloud-storage-architecture.md)

---

## ğŸ“Š æ•°æ®åº“è®¾è®¡è¯´æ˜

### 1. é€šç”¨å­—æ®µçº¦å®š

æ‰€æœ‰è¡¨å‡åŒ…å«ä»¥ä¸‹é€šç”¨å­—æ®µï¼š
- `created_at`: è®°å½•åˆ›å»ºæ—¶é—´ï¼Œé»˜è®¤ CURRENT_TIMESTAMP
- `updated_at`: è®°å½•æ›´æ–°æ—¶é—´ï¼Œè‡ªåŠ¨æ›´æ–°

ç”¨æˆ·ç›¸å…³è¡¨é¢å¤–åŒ…å«ï¼š
- `_openid`: CloudBase ç”¨æˆ·æ ‡è¯†ï¼Œç”¨äºæ•°æ®éš”ç¦»å’Œè®¿é—®æ§åˆ¶ï¼Œé»˜è®¤å€¼ä¸ºç©ºå­—ç¬¦ä¸²

### 2. ä¸»é”®è®¾è®¡

- æ‰€æœ‰è¡¨ä½¿ç”¨è‡ªå¢æ•´å‹ `id` ä½œä¸ºä¸»é”®
- è®¢å•ç±»è¡¨é¢å¤–ä½¿ç”¨å”¯ä¸€è®¢å•å·ï¼ˆå¦‚ `order_no`, `withdraw_no`, `exchange_no`ï¼‰

### 3. ç´¢å¼•ç­–ç•¥

- **ä¸»é”®ç´¢å¼•**: æ‰€æœ‰è¡¨çš„ `id` å­—æ®µ
- **å”¯ä¸€ç´¢å¼•**: ç”¨äºä¿è¯æ•°æ®å”¯ä¸€æ€§ï¼ˆå¦‚ç”¨æˆ·UIDã€è®¢å•å·ã€é…ç½®é”®ç­‰ï¼‰
- **æ™®é€šç´¢å¼•**: ç”¨äºå¸¸è§æŸ¥è¯¢å­—æ®µï¼ˆå¦‚çŠ¶æ€ã€æ—¶é—´ã€ç”¨æˆ·IDç­‰ï¼‰
- **å¤åˆç´¢å¼•**: ç”¨äºè”åˆæŸ¥è¯¢ä¼˜åŒ–ï¼ˆå¦‚ç”¨æˆ·+çŠ¶æ€ã€ç±»å‹+çŠ¶æ€ç­‰ï¼‰

### 4. æ•°æ®å†—ä½™

ä¸ºæå‡æŸ¥è¯¢æ€§èƒ½ï¼Œéƒ¨åˆ†å­—æ®µé‡‡ç”¨å†—ä½™è®¾è®¡ï¼š
- ç”¨æˆ·å§“åã€æ‰‹æœºå·åœ¨è®¢å•ã€é¢„çº¦ç­‰è¡¨ä¸­å†—ä½™
- è¯¾ç¨‹åç§°åœ¨ç”¨æˆ·è¯¾ç¨‹è¡¨ä¸­å†—ä½™
- æ¨èäººå§“ååœ¨è®¢å•ã€ç§¯åˆ†è®°å½•ä¸­å†—ä½™

### 5. JSON å­—æ®µä½¿ç”¨

ä»¥ä¸‹åœºæ™¯ä½¿ç”¨ JSON ç±»å‹å­˜å‚¨å¤æ‚æ•°æ®ï¼š
- `birth_bazi`: å…«å­—ä¿¡æ¯ï¼ˆç”¨æˆ·è¡¨ï¼‰
- `images`: å›¾ç‰‡åˆ—è¡¨ï¼ˆæ¡ˆä¾‹ã€åé¦ˆç­‰è¡¨ï¼‰
- `tags`: æ ‡ç­¾åˆ—è¡¨ï¼ˆç´ æè¡¨ï¼‰
- `permissions`: æƒé™åˆ—è¡¨ï¼ˆç®¡ç†å‘˜è¡¨ï¼‰
- `account_info`: è´¦æˆ·ä¿¡æ¯ï¼ˆæç°è¡¨ï¼‰
- `template_data`: æ¨¡æ¿æ•°æ®ï¼ˆæ¶ˆæ¯æ—¥å¿—è¡¨ï¼‰

### 6. çŠ¶æ€ç çº¦å®š

#### è®¢å•çŠ¶æ€ (pay_status)
- 0: å¾…æ”¯ä»˜
- 1: å·²æ”¯ä»˜
- 2: å·²å–æ¶ˆ
- 3: å·²å…³é—­
- 4: å·²é€€æ¬¾

#### é¢„çº¦çŠ¶æ€ (appointments.status)
- 0: å¾…ä¸Šè¯¾
- 1: å·²ç­¾åˆ°
- 2: ç¼ºå¸­
- 3: å·²å–æ¶ˆ

#### å¤§ä½¿ç­‰çº§ (ambassador_level)
- 0: æ™®é€šç”¨æˆ·
- 1: å‡†é’é¸¾
- 2: é’é¸¾
- 3: é¸¿é¹„

#### è¯¾ç¨‹ç±»å‹ (course_type)
- 1: åˆæ¢ç­
- 2: å¯†è®­ç­
- 3: å’¨è¯¢æœåŠ¡

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®éš”ç¦»**: æ‰€æœ‰ç”¨æˆ·ç›¸å…³è¡¨éƒ½åŒ…å« `_openid` å­—æ®µï¼Œå¿…é¡»åœ¨æŸ¥è¯¢æ—¶åŠ å…¥è¯¥å­—æ®µä½œä¸ºæ¡ä»¶ï¼Œç¡®ä¿æ•°æ®éš”ç¦»å®‰å…¨ã€‚

2. **è½¯åˆ é™¤**: å½“å‰æ•°æ®åº“è®¾è®¡æœªä½¿ç”¨è½¯åˆ é™¤æœºåˆ¶ï¼Œåˆ é™¤æ“ä½œéœ€è°¨æ…ã€‚

3. **æ—¶åŒºå¤„ç†**: æ‰€æœ‰ datetime å­—æ®µä½¿ç”¨æ•°æ®åº“é»˜è®¤æ—¶åŒºï¼Œåº”ç”¨å±‚éœ€è¦ç»Ÿä¸€æ—¶åŒºå¤„ç†ã€‚

4. **é‡‘é¢å­—æ®µ**: ä½¿ç”¨ `decimal(10,2)` å­˜å‚¨é‡‘é¢ï¼Œç²¾åº¦ä¸º2ä½å°æ•°ã€‚

5. **è®¢å•å·è§„åˆ™**: 
   - è®¢å•å·: `ORD + å¹´æœˆæ—¥ + 8ä½éšæœºæ•°`
   - æç°å•å·: `WD + å¹´æœˆæ—¥ + 8ä½éšæœºæ•°`
   - å…‘æ¢å•å·: `EX + å¹´æœˆæ—¥ + 8ä½éšæœºæ•°`

6. **ç´¢å¼•ç»´æŠ¤**: å®šæœŸæ£€æŸ¥ç´¢å¼•ä½¿ç”¨æƒ…å†µï¼Œä¼˜åŒ–æ…¢æŸ¥è¯¢ã€‚

7. **æ•°æ®å¤‡ä»½**: å»ºè®®æ¯å¤©å‡Œæ™¨è¿›è¡Œå…¨é‡å¤‡ä»½ï¼Œé‡è¦æ“ä½œå‰è¿›è¡Œå¢é‡å¤‡ä»½ã€‚

---

## ğŸ”— å¤–é”®çº¦æŸæ±‡æ€»

> **é‡è¦è¯´æ˜**ï¼š2026-02-10 å·²ä¸ºæ‰€æœ‰ç›¸å…³è¡¨æ·»åŠ å¤–é”®çº¦æŸï¼Œç¡®ä¿æ•°æ®å®Œæ•´æ€§å’Œå¼•ç”¨å®Œæ•´æ€§ã€‚

**å¤–é”®çº¦æŸæ€»æ•°ï¼š35 ä¸ª**

### æŒ‰æ¨¡å—åˆ†ç±»

#### ç”¨æˆ·æ¨¡å— (1ä¸ª)
- `users.referee_id` â†’ `users.id` (æ¨èäººè‡ªå¼•ç”¨)

#### è¯¾ç¨‹æ¨¡å— (3ä¸ª)
- `user_courses.user_id` â†’ `users.id`
- `user_courses.course_id` â†’ `courses.id`
- `user_courses.source_order_id` â†’ `orders.id`

#### è®¢å•æ¨¡å— (3ä¸ª)
- `orders.user_id` â†’ `users.id`
- `orders.referee_id` â†’ `users.id`
- `orders.class_record_id` â†’ `class_records.id`

#### é¢„çº¦æ¨¡å— (5ä¸ª)
- `class_records.course_id` â†’ `courses.id`
- `appointments.user_id` â†’ `users.id`
- `appointments.class_record_id` â†’ `class_records.id`
- `appointments.user_course_id` â†’ `user_courses.id`
- `appointments.course_id` â†’ `courses.id`

#### å¤§ä½¿æ¨¡å— (9ä¸ª)
- `ambassador_applications.user_id` â†’ `users.id`
- `ambassador_quotas.user_id` â†’ `users.id`
- `ambassador_upgrade_logs.user_id` â†’ `users.id`
- `ambassador_activity_records.user_id` â†’ `users.id`
- `ambassador_activity_records.class_record_id` â†’ `class_records.id`
- `quota_usage_records.quota_id` â†’ `ambassador_quotas.id`
- `quota_usage_records.ambassador_id` â†’ `users.id`
- `referee_change_logs.user_id` â†’ `users.id`
- `withdrawals.user_id` â†’ `users.id`

#### ç§¯åˆ†æ¨¡å— (5ä¸ª)
- `merit_points_records.user_id` â†’ `users.id`
- `cash_points_records.user_id` â†’ `users.id`
- `mall_exchange_records.user_id` â†’ `users.id`
- `mall_exchange_records.goods_id` â†’ `mall_goods.id`

#### å•†å­¦é™¢æ¨¡å— (5ä¸ª)
- `academy_cases.course_id` â†’ `courses.id`
- `academy_progress.user_id` â†’ `users.id`
- `academy_progress.course_id` â†’ `courses.id`
- `feedbacks.user_id` â†’ `users.id`
- `feedbacks.course_id` â†’ `courses.id`

#### åè®®æ¨¡å— (2ä¸ª)
- `contract_signatures.user_id` â†’ `users.id`
- `contract_signatures.contract_template_id` â†’ `contract_templates.id`

#### æ¶ˆæ¯æ¨¡å— (3ä¸ª)
- `notification_configs.course_id` â†’ `courses.id`
- `notification_logs.user_id` â†’ `users.id`
- `notification_logs.class_record_id` â†’ `class_records.id`

#### ç®¡ç†æ¨¡å— (2ä¸ª)
- `admin_users.created_by` â†’ `admin_users.id` (ç®¡ç†å‘˜è‡ªå¼•ç”¨)
- `admin_operation_logs.admin_id` â†’ `admin_users.id`

### å¤–é”®çº¦æŸè¯¦ç»†åˆ—è¡¨

| è¡¨å | å¤–é”®çº¦æŸå | å­—æ®µ | å¼•ç”¨è¡¨ | å¼•ç”¨å­—æ®µ | DELETE è§„åˆ™ | UPDATE è§„åˆ™ |
|------|-----------|------|--------|---------|------------|------------|
| users | fk_users_referee | referee_id | users | id | SET NULL | CASCADE |
| user_courses | fk_user_courses_user | user_id | users | id | CASCADE | CASCADE |
| user_courses | fk_user_courses_course | course_id | courses | id | CASCADE | CASCADE |
| user_courses | fk_user_courses_source_order | source_order_id | orders | id | SET NULL | CASCADE |
| class_records | fk_class_records_course | course_id | courses | id | CASCADE | CASCADE |
| orders | fk_orders_user | user_id | users | id | CASCADE | CASCADE |
| orders | fk_orders_referee | referee_id | users | id | SET NULL | CASCADE |
| orders | fk_orders_class_record | class_record_id | class_records | id | SET NULL | CASCADE |
| appointments | fk_appointments_user | user_id | users | id | CASCADE | CASCADE |
| appointments | fk_appointments_class_record | class_record_id | class_records | id | CASCADE | CASCADE |
| appointments | fk_appointments_user_course | user_course_id | user_courses | id | CASCADE | CASCADE |
| appointments | fk_appointments_course | course_id | courses | id | SET NULL | CASCADE |
| ambassador_applications | fk_ambassador_applications_user | user_id | users | id | CASCADE | CASCADE |
| ambassador_quotas | fk_ambassador_quotas_user | user_id | users | id | CASCADE | CASCADE |
| ambassador_upgrade_logs | fk_ambassador_upgrade_logs_user | user_id | users | id | CASCADE | CASCADE |
| ambassador_activity_records | fk_activity_records_user | user_id | users | id | CASCADE | CASCADE |
| ambassador_activity_records | fk_activity_records_class_record | class_record_id | class_records | id | SET NULL | CASCADE |
| quota_usage_records | fk_quota_usage_records_quota | quota_id | ambassador_quotas | id | CASCADE | CASCADE |
| quota_usage_records | fk_quota_usage_records_ambassador | ambassador_id | users | id | CASCADE | CASCADE |
| referee_change_logs | fk_referee_change_logs_user | user_id | users | id | CASCADE | CASCADE |
| withdrawals | fk_withdrawals_user | user_id | users | id | CASCADE | CASCADE |
| merit_points_records | fk_merit_points_records_user | user_id | users | id | CASCADE | CASCADE |
| cash_points_records | fk_cash_points_records_user | user_id | users | id | CASCADE | CASCADE |
| mall_exchange_records | fk_mall_exchange_records_user | user_id | users | id | CASCADE | CASCADE |
| mall_exchange_records | fk_mall_exchange_records_goods | goods_id | mall_goods | id | CASCADE | CASCADE |
| academy_cases | fk_academy_cases_course | course_id | courses | id | SET NULL | CASCADE |
| academy_progress | fk_academy_progress_user | user_id | users | id | CASCADE | CASCADE |
| academy_progress | fk_academy_progress_course | course_id | courses | id | CASCADE | CASCADE |
| feedbacks | fk_feedbacks_user | user_id | users | id | CASCADE | CASCADE |
| feedbacks | fk_feedbacks_course | course_id | courses | id | SET NULL | CASCADE |
| contract_signatures | fk_contract_signatures_user | user_id | users | id | CASCADE | CASCADE |
| contract_signatures | fk_contract_signatures_template | contract_template_id | contract_templates | id | CASCADE | CASCADE |
| notification_configs | fk_notification_configs_course | course_id | courses | id | CASCADE | CASCADE |
| notification_logs | fk_notification_logs_user | user_id | users | id | CASCADE | CASCADE |
| notification_logs | fk_notification_logs_class_record | class_record_id | class_records | id | SET NULL | CASCADE |
| admin_users | fk_admin_users_created_by | created_by | admin_users | id | SET NULL | CASCADE |
| admin_operation_logs | fk_admin_operation_logs_admin | admin_id | admin_users | id | CASCADE | CASCADE |

### å¤–é”®è§„åˆ™è¯´æ˜

- **CASCADE**: å½“ä¸»è¡¨è®°å½•è¢«åˆ é™¤/æ›´æ–°æ—¶ï¼Œä»è¡¨ä¸­çš„ç›¸å…³è®°å½•ä¹Ÿä¼šè¢«åˆ é™¤/æ›´æ–°
- **SET NULL**: å½“ä¸»è¡¨è®°å½•è¢«åˆ é™¤/æ›´æ–°æ—¶ï¼Œä»è¡¨ä¸­çš„å¤–é”®å­—æ®µè®¾ä¸º NULL

---

## ğŸ“ æ›´æ–°æ—¥å¿—

| æ—¥æœŸ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| 2026-02-12 | v2.0 | **API é”™è¯¯ä¿®å¤ä¸ä¼˜åŒ–**ï¼šâ‘ æ–°å¢ academy_progress è¡¨ï¼ˆå­¦ä¹ è¿›åº¦è®°å½•ï¼‰ï¼Œè¡¨æ€»æ•°31â†’32ï¼›â‘¡feedbacksè¡¨æ–°å¢ type å­—æ®µåŠç´¢å¼•idx_typeï¼›â‘¢notification_configsè¡¨æ–°å¢ name å­—æ®µåŠå”¯ä¸€ç´¢å¼•uk_nameï¼›â‘£æ–°å¢2ä¸ªå¤–é”®çº¦æŸï¼ˆacademy_progressè¡¨ï¼‰ï¼Œå¤–é”®æ€»æ•°35â†’37ï¼›â‘¤å•†å­¦é™¢æ¨¡å—è¡¨æ•°4â†’5ï¼›â‘¥ä¿®å¤å¤šä¸ªäº‘å‡½æ•°çš„ NoSQL/MySQL API æ··ç”¨é—®é¢˜ï¼›â‘¦ä¿®å¤ order.getList å¤–é”®å‘½åï¼›â‘§æ–°å¢ system.getAnnouncementDetail æ¥å£ |
| 2026-02-11 | v1.9 | **æ–°å¢æ´»åŠ¨è®°å½•è¡¨**ï¼šæ–°å¢ ambassador_activity_recordsï¼ˆå¤§ä½¿æ´»åŠ¨è®°å½•è¡¨ï¼‰ï¼Œè¡¨æ€»æ•°30â†’31ï¼›usersè¡¨æ–°å¢ total_activity_count å­—æ®µï¼›system_configsè¡¨æ–°å¢å®¢æœç”µè¯é…ç½®ï¼›å¤–é”®çº¦æŸæ€»æ•°33â†’35ï¼›å¤§ä½¿æ¨¡å—è¡¨æ•°7â†’8 |
| 2026-02-11 | v1.8 | **announcementsè¡¨å­—æ®µæ›´æ–°**ï¼šæ–°å¢ link å­—æ®µï¼ˆvarchar(255)ï¼‰ï¼Œç”¨äºå­˜å‚¨è½®æ’­å›¾ç­‰åœºæ™¯çš„è·³è½¬é“¾æ¥ï¼›categoryæšä¸¾å€¼æ‰©å±•ï¼Œæ–°å¢bannerï¼ˆè½®æ’­å›¾ï¼‰å’Œannouncementï¼ˆå…¬å‘Šï¼‰åˆ†ç±» |
| 2026-02-11 | v1.7 | **coursesè¡¨å­—æ®µæ›´æ–°**ï¼šæ–°å¢ nickname å­—æ®µï¼ˆvarchar(50)ï¼‰ï¼Œç”¨äºå­˜å‚¨è¯¾ç¨‹æ˜µç§°/ç®€ç§° |
| 2026-02-11 | v1.6 | **æ–°å¢å¤–é”®çº¦æŸ**ï¼šä¸º appointments.course_id æ·»åŠ å¤–é”®çº¦æŸ fk_appointments_courseï¼Œå¤–é”®æ€»æ•°32â†’33 |
| 2026-02-10 | v1.5 | **æ·»åŠ å¤–é”®çº¦æŸ**ï¼šä¸ºæ‰€æœ‰ç›¸å…³è¡¨æ·»åŠ äº†32ä¸ªå¤–é”®çº¦æŸï¼Œç¡®ä¿æ•°æ®å®Œæ•´æ€§ï¼›æ–°å¢å¤–é”®çº¦æŸæ±‡æ€»ç« èŠ‚ |
| 2026-02-09 | v1.4 | æ–°å¢ subscription_message_logs è®¢é˜…æ¶ˆæ¯å‘é€è®°å½•è¡¨ï¼ˆç¬¬27è¡¨ï¼‰ï¼Œè¡¨æ€»æ•°29â†’30ï¼›åŸ27-29å·è¡¨é¡ºå»¶ä¸º28-30 |
| 2026-02-08 | v1.3 | æ–°å¢äº‘å­˜å‚¨å­—æ®µæ±‡æ€»ï¼›æ ‡æ³¨æ‰€æœ‰éœ€è¦å­˜å‚¨åˆ°äº‘å­˜å‚¨çš„å­—æ®µåŠå…¶è·¯å¾„ |
| 2026-02-08 | v1.2 | æ–°å¢ ambassador_level_configs å¤§ä½¿ç­‰çº§é…ç½®è¡¨ï¼ˆç¬¬13è¡¨ï¼‰ï¼Œè¡¨æ€»æ•°28â†’29ï¼›åŸ13-28å·è¡¨é¡ºå»¶ä¸º14-29 |
| 2026-02-08 | v1.1 | user_coursesè¡¨æ–°å¢source_order_idã€source_course_idå­—æ®µï¼›ambassador_applicationsè¡¨statusçŠ¶æ€ç è°ƒæ•´ä¸º0-3ï¼›merit_points_recordsè¡¨sourceæšä¸¾è°ƒæ•´ |
| 2026-02-04 | v1.0 | åˆå§‹ç‰ˆæœ¬ï¼ŒåŒ…å«28ä¸ªè¡¨çš„å®Œæ•´ç»“æ„ä¿¡æ¯ |

---

**æ–‡æ¡£ç”Ÿæˆå®Œæ¯• âœ…**

