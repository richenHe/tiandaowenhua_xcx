<!DOCTYPE html><html><head><meta charset="UTF-8"><title>æ•°æ®æ¦‚è§ˆ</title><link rel="stylesheet" href="../assets/libs/tdesign.min.css"><style>body{margin:0;padding:20px;background:#f5f5f5}.c{max-width:1400px;margin:0 auto}.t{font-size:24px;font-weight:600;margin-bottom:24px}.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;margin-bottom:24px}.card{background:white;border-radius:8px;padding:24px;box-shadow:0 2px 8px rgba(0,0,0,0.1)}.card.gradient1{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white}.card.gradient2{background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%);color:white}.card.gradient3{background:linear-gradient(135deg,#4facfe 0%,#00f2fe 100%);color:white}.card.gradient4{background:linear-gradient(135deg,#43e97b 0%,#38f9d7 100%);color:white}.card-label{font-size:14px;opacity:0.9;margin-bottom:12px}.card-value{font-size:36px;font-weight:600;margin-bottom:4px}.card-desc{font-size:12px;opacity:0.8}.chart-card{background:white;border-radius:8px;padding:24px;margin-bottom:16px;box-shadow:0 2px 8px rgba(0,0,0,0.1)}.chart-title{font-size:18px;font-weight:600;margin-bottom:16px}</style></head><body>
  <div id="app">
    <t-layout style="height: 100vh;">
      <!-- é¡¶éƒ¨å¯¼èˆª -->
      <t-header height="64px" style="
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 24px;
        background: #fff;
        border-bottom: 1px solid #dcdcdc;
      ">
        <div style="display: flex; align-items: center; gap: 16px;">
          <span style="font-size: 18px; font-weight: 600; color: #333;">ğŸ¨ å¤©é“æ–‡åŒ–åå°ç®¡ç†</span>
        </div>
        <div style="display: flex; align-items: center; gap: 16px;">
          <span>{{ adminInfo?.real_name || adminInfo?.username || 'ç®¡ç†å‘˜' }}</span>
          <t-button size="small" @click="handleLogout">é€€å‡º</t-button>
        </div>
      </t-header>
      
      <t-layout>
        <!-- ä¾§è¾¹èœå• -->
        <t-aside width="240px" style="
          background: #fff;
          border-right: 1px solid #dcdcdc;
          overflow-y: auto;
        ">
          <t-menu
            value="dashboard"
            :default-expanded="['user', 'order', 'course', 'ambassador', 'system']"
            theme="light"
            @change="handleMenuChange"
          >
            <t-menu-item value="dashboard">
              <template #icon><t-icon name="dashboard" /></template>
              æ•°æ®æ¦‚è§ˆ
            </t-menu-item>
            
            <t-submenu value="user">
              <template #icon><t-icon name="user" /></template>
              <template #title>ç”¨æˆ·ç®¡ç†</template>
              <t-menu-item value="user-list">å­¦å‘˜åˆ—è¡¨</t-menu-item>
              <t-menu-item value="user-referee">æ¨èäººç®¡ç†</t-menu-item>
            </t-submenu>
            
            <t-submenu value="order">
              <template #icon><t-icon name="order" /></template>
              <template #title>è®¢å•ç®¡ç†</template>
              <t-menu-item value="order-list">è®¢å•åˆ—è¡¨</t-menu-item>
              <t-menu-item value="order-refund">é€€æ¬¾ç®¡ç†</t-menu-item>
              <t-menu-item value="withdraw-audit">æç°å®¡æ ¸</t-menu-item>
            </t-submenu>
            
            <t-submenu value="course">
              <template #icon><t-icon name="file" /></template>
              <template #title>è¯¾ç¨‹ç®¡ç†</template>
              <t-menu-item value="course-list">è¯¾ç¨‹åˆ—è¡¨</t-menu-item>
              <t-menu-item value="schedule-list">æ’æœŸç®¡ç†</t-menu-item>
              <t-menu-item value="appointment-list">é¢„çº¦ç®¡ç†</t-menu-item>
              <t-menu-item value="case-list">æ¡ˆä¾‹ç®¡ç†</t-menu-item>
              <t-menu-item value="material-list">èµ„æ–™ç®¡ç†</t-menu-item>
            </t-submenu>
            
            <t-submenu value="ambassador">
              <template #icon><t-icon name="usergroup" /></template>
              <template #title>å¤§ä½¿ç®¡ç†</template>
              <t-menu-item value="ambassador-list">å¤§ä½¿åˆ—è¡¨</t-menu-item>
              <t-menu-item value="application-audit">ç”³è¯·å®¡æ ¸</t-menu-item>
              <t-menu-item value="activity-list">æ´»åŠ¨ç®¡ç†</t-menu-item>
              <t-menu-item value="contract-list">åˆçº¦ç®¡ç†</t-menu-item>
            </t-submenu>
            
            <t-submenu value="system">
              <template #icon><t-icon name="setting" /></template>
              <template #title>ç³»ç»Ÿç®¡ç†</template>
              <t-menu-item value="admin-list">ç®¡ç†å‘˜ç®¡ç†</t-menu-item>
              <t-menu-item value="config">ç³»ç»Ÿé…ç½®</t-menu-item>
              <t-menu-item value="announcement-list">å…¬å‘Šç®¡ç†</t-menu-item>
              <t-menu-item value="feedback-list">åé¦ˆç®¡ç†</t-menu-item>
              <t-menu-item value="notification-list">é€šçŸ¥ç®¡ç†</t-menu-item>
              <t-menu-item value="level-config">ç­‰çº§é…ç½®</t-menu-item>
            </t-submenu>
          </t-menu>
        </t-aside>
        
        <!-- ä¸»å†…å®¹åŒº -->
        <t-content class="page-content"><div class="c"><h1 class="t">æ•°æ®æ¦‚è§ˆ</h1><div class="grid"><div class="card gradient1"><div class="card-label">æ€»ç”¨æˆ·æ•°</div><div class="card-value">{{stats.totalUsers||0}}</div><div class="card-desc">è¾ƒæ˜¨æ—¥ +{{stats.newUsersToday||0}}</div></div><div class="card gradient2"><div class="card-label">æ€»è®¢å•æ•°</div><div class="card-value">{{stats.totalOrders||0}}</div><div class="card-desc">å¾…å¤„ç† {{stats.pendingOrders||0}} å•</div></div><div class="card gradient3"><div class="card-label">æ€»æ”¶å…¥ï¼ˆå…ƒï¼‰</div><div class="card-value">{{((stats.totalRevenue||0)/100).toFixed(2)}}</div><div class="card-desc">æœ¬æœˆ Â¥{{((stats.monthRevenue||0)/100).toFixed(2)}}</div></div><div class="card gradient4"><div class="card-label">å¤§ä½¿æ€»æ•°</div><div class="card-value">{{stats.totalAmbassadors||0}}</div><div class="card-desc">æ´»è·ƒ {{stats.activeAmbassadors||0}} äºº</div></div></div><div class="chart-card"><div class="chart-title">æœ€è¿‘è®¢å•</div><t-table :data="recentOrders" :columns="orderCols" :pagination="false" size="small" bordered stripe><template #status="{row}"><t-tag v-if="row.status===1" theme="warning">å¾…æ”¯ä»˜</t-tag><t-tag v-else-if="row.status===2" theme="primary">å·²æ”¯ä»˜</t-tag><t-tag v-else-if="row.status===3" theme="success">å·²å®Œæˆ</t-tag><t-tag v-else theme="danger">å·²å–æ¶ˆ</t-tag></template></t-table></div><div class="chart-card"><div class="chart-title">å¾…å¤„ç†äº‹é¡¹</div><t-list><t-list-item><span>å¾…å®¡æ ¸é€€æ¬¾ç”³è¯·ï¼š<strong>{{pendingTasks.refunds||0}}</strong> æ¡</span></t-list-item><t-list-item><span>å¾…å®¡æ ¸æç°ç”³è¯·ï¼š<strong>{{pendingTasks.withdraws||0}}</strong> æ¡</span></t-list-item><t-list-item><span>å¾…å®¡æ ¸å¤§ä½¿ç”³è¯·ï¼š<strong>{{pendingTasks.ambassadorApps||0}}</strong> æ¡</span></t-list-item><t-list-item><span>å¾…å¤„ç†åé¦ˆï¼š<strong>{{pendingTasks.feedbacks||0}}</strong> æ¡</span></t-list-item></t-list></div></div></div><script src="../assets/libs/vue.global.js"></script><script src="../assets/libs/tdesign.min.js"></script><script src="../assets/js/config.js"></script><script src="../assets/js/admin-api.js"></script><script>const{createApp,ref,onMounted}=Vue;createApp({setup(){const stats=ref({});const recentOrders=ref([]);const pendingTasks=ref({});const orderCols=[{colKey:'order_no',title:'è®¢å•å·',width:180},{colKey:'user_name',title:'ç”¨æˆ·',width:120},{colKey:'course_name',title:'è¯¾ç¨‹',ellipsis:true},{colKey:'amount',title:'é‡‘é¢',width:120},{colKey:'created_at',title:'ä¸‹å•æ—¶é—´',width:160},{colKey:'status',title:'çŠ¶æ€',width:100,cell:'status'}];const ld=async()=>{try{const data=await AdminAPI.getDashboardStats();stats.value=data.stats||{};recentOrders.value=data.recentOrders||[];pendingTasks.value=data.pendingTasks||{};}catch(e){TDesign.MessagePlugin.error(e.message||'è·å–æ•°æ®å¤±è´¥');}};onMounted(ld);return{stats,recentOrders,pendingTasks,orderCols};}}).use(TDesign).mount('#app');</script></body></html>

