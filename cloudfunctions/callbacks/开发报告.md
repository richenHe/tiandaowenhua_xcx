# Callbacks HTTP äº‘å‡½æ•°å¼€å‘æŠ¥å‘Š

**å®Œæˆæ—¶é—´**: 2026-02-10
**çŠ¶æ€**: âœ… å·²å®Œæˆ
**ç±»å‹**: HTTP äº‘å‡½æ•°
**å›è°ƒæ¥å£æ•°**: 3ä¸ª

---

## âœ… å®Œæˆæ¸…å•

### 1. åŸºç¡€ç»“æ„

- âœ… `index.js` - HTTP äº‘å‡½æ•°ä¸»å…¥å£ï¼ˆè·¯ç”±åˆ†å‘ï¼‰
- âœ… `package.json` - ä¾èµ–é…ç½®
- âœ… `cloudfunction.json` - äº‘å‡½æ•°é…ç½®ï¼ˆç¯å¢ƒå˜é‡ï¼‰
- âœ… `scf_bootstrap` - å¯åŠ¨è„šæœ¬
- âœ… `common/` - å…¬å…±æ¨¡å—ï¼ˆå·²ä»ç»Ÿä¸€æ¨¡å—åŒæ­¥ï¼‰
- âœ… `business-logic/` - ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆå·²ä»ç»Ÿä¸€æ¨¡å—åŒæ­¥ï¼‰

### 2. å›è°ƒå¤„ç†å™¨

- âœ… `handlers/message-push.js` - å¾®ä¿¡æ¶ˆæ¯æ¨é€å›è°ƒ
  - GET è¯·æ±‚ï¼šæ¥å…¥éªŒè¯ï¼ˆSHA1 ç­¾åï¼‰
  - POST è¯·æ±‚ï¼šè®¢é˜…æ¶ˆæ¯äº‹ä»¶æ¥æ”¶
- âœ… `handlers/payment.js` - å¾®ä¿¡æ”¯ä»˜å›è°ƒ
  - XML è§£æ
  - MD5 ç­¾åéªŒè¯
  - è®¢å•çŠ¶æ€æ›´æ–°
  - è¯¾ç¨‹è®°å½•ç”Ÿæˆ
  - æ¨èäººå¥–åŠ±å‘æ”¾
- âœ… `handlers/refund.js` - å¾®ä¿¡é€€æ¬¾å›è°ƒ
  - AES-256-ECB è§£å¯†
  - è®¢å•é€€æ¬¾çŠ¶æ€æ›´æ–°
  - è¯¾ç¨‹è®°å½•åˆ é™¤
  - æ¨èäººå¥–åŠ±å›é€€

### 3. æ–‡æ¡£

- âœ… `APIæ–‡æ¡£.md` - å®Œæ•´çš„æ¥å£æ–‡æ¡£
- âœ… `å¼€å‘æŠ¥å‘Š.md` - æœ¬æ–‡æ¡£

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ¶æ„é€‰å‹ï¼šç®€å• HTTP äº‘å‡½æ•°

**é€‰æ‹©ç†ç”±**ï¼š

1. âœ… **ç¬¦åˆéœ€æ±‚**ï¼šåªéœ€å¤„ç† 3 ä¸ªå›è°ƒè·¯å¾„
2. âœ… **ç®€å•å¯é **ï¼šæ— éœ€é¢å¤–ä¾èµ–ï¼ˆ@cloudbase/functions-frameworkï¼‰
3. âœ… **æ˜“äºç»´æŠ¤**ï¼šæ‰€æœ‰è·¯ç”±é€»è¾‘åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­
4. âœ… **ç¬¦åˆç°æœ‰æ¶æ„**ï¼šä¸å…¶ä»–äº‘å‡½æ•°ä¿æŒä¸€è‡´

### è·¯ç”±åˆ†å‘æœºåˆ¶

```javascript
// é€šè¿‡ context.httpContext.url åˆ¤æ–­è·¯å¾„
if (url.includes('/message-push')) {
  return await messagePushHandler(event, context);
}
if (url.includes('/payment')) {
  return await paymentHandler(event, context);
}
if (url.includes('/refund')) {
  return await refundHandler(event, context);
}
```

### HTTP è®¿é—®è·¯å¾„

| å›è°ƒç±»å‹ | URL è·¯å¾„ |
|---------|---------|
| æ¶ˆæ¯æ¨é€ | `https://your-domain.com/callbacks/message-push` |
| æ”¯ä»˜å›è°ƒ | `https://your-domain.com/callbacks/payment` |
| é€€æ¬¾å›è°ƒ | `https://your-domain.com/callbacks/refund` |

---

## ğŸ”‘ æ ¸å¿ƒåŠŸèƒ½å®ç°

### 1. å¾®ä¿¡æ¶ˆæ¯æ¨é€å›è°ƒ

#### GET è¯·æ±‚ï¼šæ¥å…¥éªŒè¯

**éªŒè¯æµç¨‹**ï¼š

1. æå–å‚æ•°ï¼š`signature`, `timestamp`, `nonce`, `echostr`
2. æ’åºï¼š`[token, timestamp, nonce].sort()`
3. æ‹¼æ¥ï¼š`arr.join('')`
4. SHA1 åŠ å¯†ï¼š`crypto.createHash('sha1').update(str).digest('hex')`
5. å¯¹æ¯”ç­¾åï¼š`sha1 === signature`
6. éªŒè¯æˆåŠŸï¼šè¿”å› `echostr`

#### POST è¯·æ±‚ï¼šæ¶ˆæ¯æ¥æ”¶

**æ”¯æŒçš„äº‹ä»¶**ï¼š

- `subscribe_msg_sent_event` - è®¢é˜…æ¶ˆæ¯å‘é€æˆåŠŸ
- `subscribe_msg_popup_event` - ç”¨æˆ·æ‹’ç»è®¢é˜…

**å¤„ç†é€»è¾‘**ï¼š

- è®°å½•æ¶ˆæ¯å‘é€ç»“æœ
- æ›´æ–°ç”¨æˆ·è®¢é˜…åå¥½
- å¿…é¡»è¿”å› `"success"` å­—ç¬¦ä¸²

### 2. å¾®ä¿¡æ”¯ä»˜å›è°ƒ

#### ç­¾åéªŒè¯

**ç®—æ³•**ï¼šMD5

**æ­¥éª¤**ï¼š

1. æå–æ‰€æœ‰å‚æ•°ï¼ˆé™¤ `sign`ï¼‰
2. æŒ‰ key æ’åº
3. æ‹¼æ¥ï¼š`key1=value1&key2=value2&...&key=å•†æˆ·å¯†é’¥`
4. MD5 åŠ å¯†å¹¶è½¬å¤§å†™
5. å¯¹æ¯”ç­¾å

#### ä¸šåŠ¡å¤„ç†

**æ”¯ä»˜æˆåŠŸæµç¨‹**ï¼š

```
1. æŸ¥è¯¢è®¢å•ï¼ˆorders è¡¨ï¼‰
   â†“
2. æ£€æŸ¥è®¢å•çŠ¶æ€ï¼ˆé¿å…é‡å¤å¤„ç†ï¼‰
   â†“
3. æ›´æ–°è®¢å•çŠ¶æ€ï¼ˆpay_status = 1ï¼‰
   â†“
4. ç”Ÿæˆç”¨æˆ·è¯¾ç¨‹è®°å½•ï¼ˆå¦‚æœæ˜¯è¯¾ç¨‹è®¢å•ï¼‰
   â†“
5. å‘æ”¾æ¨èäººå¥–åŠ±ï¼ˆå¦‚æœæœ‰æ¨èäººï¼‰
   â†“
6. å‘é€æ”¯ä»˜æˆåŠŸé€šçŸ¥
```

**å…³é”®ä»£ç **ï¼š

```javascript
// æ›´æ–°è®¢å•çŠ¶æ€
await update('orders', {
  pay_status: 1,
  pay_time: new Date(formatWechatTime(time_end)),
  transaction_id: transaction_id,
  updated_at: new Date()
}, { id: order.id });

// ç”Ÿæˆè¯¾ç¨‹è®°å½•
await business.generateUserCourseRecord({
  user_id: order.user_id,
  order_id: order.id,
  course_id: order.related_id
});

// å‘æ”¾æ¨èäººå¥–åŠ±
await business.processReferralReward({
  order_id: order.id,
  user_id: order.user_id,
  referee_id: order.referee_id,
  order_amount: order.final_amount
});
```

### 3. å¾®ä¿¡é€€æ¬¾å›è°ƒ

#### è§£å¯†é€€æ¬¾ä¿¡æ¯

**åŠ å¯†æ–¹å¼**ï¼šAES-256-ECB

**å¯†é’¥ç”Ÿæˆ**ï¼š`MD5(å•†æˆ·å¯†é’¥)`

**è§£å¯†æ­¥éª¤**ï¼š

1. Base64 è§£ç ï¼š`Buffer.from(encryptedData, 'base64')`
2. ç”Ÿæˆå¯†é’¥ï¼š`crypto.createHash('md5').update(mchKey).digest('hex')`
3. AES è§£å¯†ï¼š`crypto.createDecipheriv('aes-256-ecb', key, '')`
4. è§£æ XMLï¼š`parseString(decrypted)`

#### ä¸šåŠ¡å¤„ç†

**é€€æ¬¾æˆåŠŸæµç¨‹**ï¼š

```
1. æŸ¥è¯¢è®¢å•ï¼ˆorders è¡¨ï¼‰
   â†“
2. æ£€æŸ¥è®¢å•çŠ¶æ€ï¼ˆé¿å…é‡å¤å¤„ç†ï¼‰
   â†“
3. æ›´æ–°è®¢å•é€€æ¬¾çŠ¶æ€ï¼ˆrefund_status = 1ï¼‰
   â†“
4. åˆ é™¤ç”¨æˆ·è¯¾ç¨‹è®°å½•ï¼ˆå¦‚æœæ˜¯è¯¾ç¨‹è®¢å•ï¼‰
   â†“
5. å›é€€æ¨èäººå¥–åŠ±ï¼ˆæ‰£å‡ç§¯åˆ†ï¼‰
   â†“
6. å‘é€é€€æ¬¾æˆåŠŸé€šçŸ¥
```

**å…³é”®ä»£ç **ï¼š

```javascript
// æ›´æ–°è®¢å•é€€æ¬¾çŠ¶æ€
await update('orders', {
  refund_status: 1,
  refund_time: new Date(success_time),
  refund_id: refund_id,
  refund_amount: parseInt(settlement_refund_fee) / 100,
  updated_at: new Date()
}, { id: order.id });

// åˆ é™¤è¯¾ç¨‹è®°å½•
await softDelete('user_courses', {
  user_id: order.user_id,
  course_id: order.related_id,
  order_id: order.id
});

// å›é€€æ¨èäººå¥–åŠ±
await update('users', {
  cash_points_available: referee.cash_points_available - rewardAmount,
  updated_at: new Date()
}, { id: referee.id });
```

---

## ğŸ“¦ ä¾èµ–é…ç½®

### package.json

```json
{
  "dependencies": {
    "wx-server-sdk": "latest",
    "@cloudbase/node-sdk": "latest",
    "xml2js": "^0.6.2"
  }
}
```

**ä¾èµ–è¯´æ˜**ï¼š

- `wx-server-sdk` - å¾®ä¿¡äº‘å¼€å‘ SDK
- `@cloudbase/node-sdk` - CloudBase Node SDKï¼ˆæ•°æ®åº“æ“ä½œï¼‰
- `xml2js` - XML è§£æåº“ï¼ˆæ”¯ä»˜/é€€æ¬¾å›è°ƒï¼‰

---

## ğŸ”§ ç¯å¢ƒå˜é‡é…ç½®

### cloudfunction.json

```json
{
  "envVariables": {
    "WECHAT_TOKEN": "tiandao_wechat_2026",
    "MCH_KEY": ""
  }
}
```

**é…ç½®è¯´æ˜**ï¼š

- `WECHAT_TOKEN` - å¾®ä¿¡æ¶ˆæ¯æ¨é€éªŒè¯ Tokenï¼ˆå¿…å¡«ï¼‰
- `MCH_KEY` - å¾®ä¿¡å•†æˆ· API å¯†é’¥ï¼ˆæ”¯ä»˜/é€€æ¬¾åŠŸèƒ½å¿…å¡«ï¼‰

**âš ï¸ æ³¨æ„**ï¼š

- `MCH_KEY` éœ€è¦åœ¨å¾®ä¿¡å•†æˆ·å¹³å°è·å–
- éƒ¨ç½²å‰å¿…é¡»é…ç½®æ­£ç¡®çš„ç¯å¢ƒå˜é‡

---

## ğŸ” å®‰å…¨æªæ–½

### 1. ç­¾åéªŒè¯

- âœ… æ¶ˆæ¯æ¨é€ï¼šSHA1 ç­¾åéªŒè¯
- âœ… æ”¯ä»˜å›è°ƒï¼šMD5 ç­¾åéªŒè¯
- âœ… é€€æ¬¾å›è°ƒï¼šAES-256-ECB è§£å¯†

### 2. é˜²é‡æ”¾æ”»å‡»

- âœ… æ£€æŸ¥è®¢å•çŠ¶æ€ï¼ˆ`pay_status`, `refund_status`ï¼‰
- âœ… é¿å…é‡å¤å¤„ç†åŒä¸€ç¬”è®¢å•

### 3. å¹‚ç­‰æ€§ä¿è¯

```javascript
// æ£€æŸ¥è®¢å•æ˜¯å¦å·²æ”¯ä»˜
if (order.pay_status === 1) {
  console.warn('[Payment] è®¢å•å·²æ”¯ä»˜ï¼Œé¿å…é‡å¤å¤„ç†');
  return;
}
```

### 4. é”™è¯¯å¤„ç†

- âœ… æ‰€æœ‰å¼‚å¸¸éƒ½è¢«æ•è·å¹¶è®°å½•æ—¥å¿—
- âœ… å³ä½¿å‡ºé”™ä¹Ÿè¿”å›æ­£ç¡®çš„å“åº”æ ¼å¼
- âœ… é¿å…å¾®ä¿¡é‡å¤æ¨é€

### 5. æ•æ„Ÿä¿¡æ¯ä¿æŠ¤

- âœ… Tokenã€å¯†é’¥å­˜å‚¨åœ¨ç¯å¢ƒå˜é‡ä¸­
- âœ… ä¸åœ¨ä»£ç ä¸­ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯
- âœ… æ—¥å¿—ä¸­ä¸è¾“å‡ºå®Œæ•´çš„æ•æ„Ÿæ•°æ®

---

## ğŸ“Š æ•°æ®åº“æ“ä½œ

### æ¶‰åŠçš„è¡¨

| è¡¨å | æ“ä½œ | è¯´æ˜ |
|------|------|------|
| `orders` | æŸ¥è¯¢ã€æ›´æ–° | è®¢å•çŠ¶æ€ç®¡ç† |
| `user_courses` | æ’å…¥ã€è½¯åˆ é™¤ | ç”¨æˆ·è¯¾ç¨‹è®°å½• |
| `users` | æŸ¥è¯¢ã€æ›´æ–° | ç”¨æˆ·ç§¯åˆ†ç®¡ç† |
| `cash_points_records` | æ’å…¥ | ç§¯åˆ†å˜åŠ¨è®°å½• |
| `merit_points_records` | æ’å…¥ | åŠŸå¾·åˆ†å˜åŠ¨è®°å½• |
| `notification_logs` | æ’å…¥ | æ¶ˆæ¯å‘é€è®°å½• |
| `notification_configs` | æ›´æ–° | ç”¨æˆ·è®¢é˜…åå¥½ |

### ä½¿ç”¨çš„å…¬å…±æ¨¡å—å‡½æ•°

**common/db.js**ï¼š

- `findOne()` - æŸ¥è¯¢å•æ¡è®°å½•
- `update()` - æ›´æ–°è®°å½•
- `insert()` - æ’å…¥è®°å½•
- `softDelete()` - è½¯åˆ é™¤è®°å½•

**business-logic**ï¼š

- `generateUserCourseRecord()` - ç”Ÿæˆç”¨æˆ·è¯¾ç¨‹è®°å½•
- `processReferralReward()` - å¤„ç†æ¨èäººå¥–åŠ±
- `sendSubscribeMessage()` - å‘é€è®¢é˜…æ¶ˆæ¯

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### æœ¬åœ°æµ‹è¯•

```bash
# 1. å®‰è£…ä¾èµ–
cd cloudfunctions/callbacks
npm install

# 2. å¯åŠ¨å‡½æ•°ï¼ˆéœ€è¦é…ç½®ç¯å¢ƒå˜é‡ï¼‰
./scf_bootstrap

# 3. æµ‹è¯•æ¥å…¥éªŒè¯
curl "http://localhost:9000/callbacks/message-push?signature=xxx&timestamp=123&nonce=456&echostr=test"
```

### äº‘ç«¯æµ‹è¯•

**éƒ¨ç½²å‘½ä»¤**ï¼š

```javascript
// ä½¿ç”¨ MCP å·¥å…·éƒ¨ç½²
mcp_cloudbase_createFunction({
  name: "callbacks",
  runtime: "Nodejs18.15",
  functionRootPath: "d:\\project\\cursor\\work\\xcx\\cloudfunctions",
  func: {
    name: "callbacks",
    runtime: "Nodejs18.15",
    timeout: 120
  }
})
```

**æµ‹è¯•æ­¥éª¤**ï¼š

1. éƒ¨ç½²äº‘å‡½æ•°åˆ° CloudBase
2. é…ç½®å¾®ä¿¡å…¬ä¼—å¹³å°å’Œå•†æˆ·å¹³å°çš„å›è°ƒåœ°å€
3. è§¦å‘å®é™…çš„å›è°ƒäº‹ä»¶ï¼ˆæ”¯ä»˜ã€é€€æ¬¾ç­‰ï¼‰
4. æŸ¥çœ‹äº‘å‡½æ•°æ—¥å¿—éªŒè¯å¤„ç†ç»“æœ

---

## ğŸ“ ç¬¬ä¸‰æ–¹å¹³å°é…ç½®

### å¾®ä¿¡å…¬ä¼—å¹³å°ï¼ˆæ¶ˆæ¯æ¨é€ï¼‰

**é…ç½®è·¯å¾„**ï¼šå¼€å‘ â†’ å¼€å‘è®¾ç½® â†’ æ¶ˆæ¯æ¨é€é…ç½®

**é…ç½®å‚æ•°**ï¼š

- æœåŠ¡å™¨åœ°å€ï¼š`https://your-domain.com/callbacks/message-push`
- Tokenï¼š`tiandao_wechat_2026`
- EncodingAESKeyï¼šéšæœºç”Ÿæˆï¼ˆå¯é€‰ï¼‰
- æ¶ˆæ¯åŠ å¯†æ–¹å¼ï¼šæ˜æ–‡æ¨¡å¼

### å¾®ä¿¡å•†æˆ·å¹³å°ï¼ˆæ”¯ä»˜/é€€æ¬¾ï¼‰

**é…ç½®è·¯å¾„**ï¼šäº§å“ä¸­å¿ƒ â†’ å¼€å‘é…ç½®

**é…ç½®å‚æ•°**ï¼š

- æ”¯ä»˜ç»“æœé€šçŸ¥URLï¼š`https://your-domain.com/callbacks/payment`
- é€€æ¬¾ç»“æœé€šçŸ¥URLï¼š`https://your-domain.com/callbacks/refund`

---

## ğŸš€ éƒ¨ç½²å‡†å¤‡

### éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•

- [ ] âœ… `common/` ç›®å½•å·²ä»ç»Ÿä¸€æ¨¡å—åŒæ­¥
- [ ] âœ… `business-logic/` ç›®å½•å·²ä»ç»Ÿä¸€æ¨¡å—åŒæ­¥
- [ ] âœ… `package.json` ä¾èµ–é…ç½®æ­£ç¡®
- [ ] âœ… `cloudfunction.json` ç¯å¢ƒå˜é‡å·²é…ç½®
- [ ] âœ… `scf_bootstrap` æ–‡ä»¶å­˜åœ¨ä¸”æœ‰æ‰§è¡Œæƒé™
- [ ] âœ… æ‰€æœ‰ handler æ–‡ä»¶å·²åˆ›å»º
- [ ] âœ… å¾®ä¿¡ Token å’Œå•†æˆ·å¯†é’¥å·²å‡†å¤‡

### éƒ¨ç½²å‘½ä»¤

```javascript
// é¦–æ¬¡éƒ¨ç½²
mcp_cloudbase_createFunction({
  name: "callbacks",
  runtime: "Nodejs18.15",
  functionRootPath: "d:\\project\\cursor\\work\\xcx\\cloudfunctions"
})

// æ›´æ–°ä»£ç 
mcp_cloudbase_updateFunctionCode({
  name: "callbacks",
  functionRootPath: "d:\\project\\cursor\\work\\xcx\\cloudfunctions"
})
```

### éƒ¨ç½²åé…ç½®

1. **é…ç½®ç¯å¢ƒå˜é‡**ï¼ˆå¦‚æœæœªåœ¨ cloudfunction.json ä¸­é…ç½®ï¼‰ï¼š
   - åœ¨ CloudBase æ§åˆ¶å°è®¾ç½® `WECHAT_TOKEN` å’Œ `MCH_KEY`

2. **é…ç½®ç¬¬ä¸‰æ–¹å¹³å°**ï¼š
   - å¾®ä¿¡å…¬ä¼—å¹³å°ï¼šé…ç½®æ¶ˆæ¯æ¨é€åœ°å€
   - å¾®ä¿¡å•†æˆ·å¹³å°ï¼šé…ç½®æ”¯ä»˜/é€€æ¬¾å›è°ƒåœ°å€

3. **æµ‹è¯•éªŒè¯**ï¼š
   - è§¦å‘å®é™…çš„å›è°ƒäº‹ä»¶
   - æŸ¥çœ‹äº‘å‡½æ•°æ—¥å¿—
   - éªŒè¯æ•°æ®åº“è®°å½•

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. HTTP äº‘å‡½æ•°ç‰¹æ€§

- âœ… ä½¿ç”¨ `context.httpContext` è·å– HTTP ä¿¡æ¯
- âœ… è¿”å›æ ¼å¼ï¼š`{ statusCode, headers, body }`
- âœ… æ”¯æŒ GETã€POST ç­‰ HTTP æ–¹æ³•

### 2. å“åº”æ ¼å¼è¦æ±‚

- **æ¶ˆæ¯æ¨é€**ï¼šå¿…é¡»è¿”å›å­—ç¬¦ä¸² `"success"`
- **æ”¯ä»˜/é€€æ¬¾**ï¼šå¿…é¡»è¿”å› XML æ ¼å¼

### 3. è¶…æ—¶å¤„ç†

- å¾®ä¿¡æœåŠ¡å™¨è¶…æ—¶æ—¶é—´ä¸º **5ç§’**
- è¶…æ—¶ä¼šè§¦å‘é‡å¤æ¨é€ï¼ˆæœ€å¤š 3 æ¬¡ï¼‰
- å»ºè®®å¼‚æ­¥å¤„ç†å¤æ‚ä¸šåŠ¡é€»è¾‘

### 4. æ—¥å¿—è®°å½•

- æ‰€æœ‰å…³é”®æ“ä½œéƒ½è®°å½•æ—¥å¿—
- ä¾¿äºé—®é¢˜æ’æŸ¥å’Œæ•°æ®è¿½æº¯
- ä½¿ç”¨ `console.log` å’Œ `console.error`

### 5. é”™è¯¯å¤„ç†

- æ‰€æœ‰å¼‚å¸¸éƒ½è¢«æ•è·
- è¿”å›æ­£ç¡®çš„å“åº”æ ¼å¼
- é¿å…å¾®ä¿¡é‡å¤æ¨é€

---

## ğŸ”„ åç»­ä¼˜åŒ–å»ºè®®

### 1. å¼‚æ­¥å¤„ç†

**å½“å‰**ï¼šåŒæ­¥å¤„ç†æ‰€æœ‰ä¸šåŠ¡é€»è¾‘

**ä¼˜åŒ–**ï¼š

- ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚ CloudBase äº‘é˜Ÿåˆ—ï¼‰
- å¿«é€Ÿè¿”å›å“åº”ï¼Œå¼‚æ­¥å¤„ç†ä¸šåŠ¡
- æé«˜å“åº”é€Ÿåº¦ï¼Œé¿å…è¶…æ—¶

### 2. é‡è¯•æœºåˆ¶

**å½“å‰**ï¼šä¾èµ–å¾®ä¿¡çš„é‡å¤æ¨é€

**ä¼˜åŒ–**ï¼š

- å®ç°è‡ªå®šä¹‰é‡è¯•æœºåˆ¶
- è®°å½•å¤±è´¥çš„å›è°ƒè¯·æ±‚
- å®šæ—¶ä»»åŠ¡é‡æ–°å¤„ç†å¤±è´¥çš„è¯·æ±‚

### 3. ç›‘æ§å‘Šè­¦

**å½“å‰**ï¼šä»…è®°å½•æ—¥å¿—

**ä¼˜åŒ–**ï¼š

- æ¥å…¥ç›‘æ§ç³»ç»Ÿï¼ˆå¦‚è…¾è®¯äº‘ç›‘æ§ï¼‰
- è®¾ç½®å‘Šè­¦è§„åˆ™ï¼ˆå¤±è´¥ç‡ã€å“åº”æ—¶é—´ï¼‰
- åŠæ—¶å‘ç°å’Œå¤„ç†å¼‚å¸¸

### 4. æ•°æ®ç»Ÿè®¡

**å½“å‰**ï¼šæ— ç»Ÿè®¡åŠŸèƒ½

**ä¼˜åŒ–**ï¼š

- ç»Ÿè®¡å›è°ƒæˆåŠŸç‡
- ç»Ÿè®¡å¤„ç†è€—æ—¶
- ç”Ÿæˆæ•°æ®æŠ¥è¡¨

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [APIæ–‡æ¡£.md](./APIæ–‡æ¡£.md) - å®Œæ•´çš„æ¥å£æ–‡æ¡£
- [äº‘å‡½æ•°æ ‡å‡†éƒ¨ç½²è§„èŒƒ](../äº‘å‡½æ•°æ ‡å‡†éƒ¨ç½²è§„èŒƒ.md) - éƒ¨ç½²è§„èŒƒ
- [åç«¯APIæ¥å£æ–‡æ¡£](../../åç«¯APIæ¥å£æ–‡æ¡£.md) - ä¸šåŠ¡æ¥å£æ–‡æ¡£
- [CloudBase HTTP äº‘å‡½æ•°æ–‡æ¡£](https://docs.cloudbase.net/cloud-function/develop/how-to-writing-functions-code)

---

## âœ… æ€»ç»“

### å®Œæˆæƒ…å†µ

- âœ… **åŸºç¡€ç»“æ„**ï¼šå®Œæ•´çš„ HTTP äº‘å‡½æ•°ç»“æ„
- âœ… **å›è°ƒå¤„ç†å™¨**ï¼š3ä¸ªå›è°ƒæ¥å£å…¨éƒ¨å®ç°
- âœ… **å®‰å…¨æªæ–½**ï¼šç­¾åéªŒè¯ã€è§£å¯†ã€é˜²é‡æ”¾
- âœ… **ä¸šåŠ¡é€»è¾‘**ï¼šè®¢å•å¤„ç†ã€è¯¾ç¨‹è®°å½•ã€å¥–åŠ±å‘æ”¾
- âœ… **æ–‡æ¡£**ï¼šå®Œæ•´çš„ API æ–‡æ¡£å’Œå¼€å‘æŠ¥å‘Š

### æŠ€æœ¯äº®ç‚¹

1. âœ… **ç®€å•å¯é **ï¼šé‡‡ç”¨ç®€å• HTTP äº‘å‡½æ•°æ–¹æ¡ˆï¼Œæ— é¢å¤–ä¾èµ–
2. âœ… **å®‰å…¨å®Œå–„**ï¼šå®Œæ•´çš„ç­¾åéªŒè¯å’Œè§£å¯†æœºåˆ¶
3. âœ… **å¹‚ç­‰æ€§ä¿è¯**ï¼šé¿å…é‡å¤å¤„ç†åŒä¸€ç¬”è®¢å•
4. âœ… **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„å¼‚å¸¸æ•è·å’Œæ—¥å¿—è®°å½•
5. âœ… **ä»£ç å¤ç”¨**ï¼šä½¿ç”¨å…¬å…±æ¨¡å—å’Œä¸šåŠ¡é€»è¾‘å±‚

### ä¸‹ä¸€æ­¥

1. **éƒ¨ç½²æµ‹è¯•**ï¼šéƒ¨ç½²åˆ° CloudBase å¹¶è¿›è¡Œæµ‹è¯•
2. **é…ç½®ç¬¬ä¸‰æ–¹å¹³å°**ï¼šé…ç½®å¾®ä¿¡å…¬ä¼—å¹³å°å’Œå•†æˆ·å¹³å°
3. **ç›‘æ§ä¼˜åŒ–**ï¼šæ¥å…¥ç›‘æ§ç³»ç»Ÿï¼Œä¼˜åŒ–æ€§èƒ½

---

**å¼€å‘å®Œæˆæ—¶é—´**: 2026-02-10
**å¼€å‘çŠ¶æ€**: âœ… å·²å®Œæˆ
**å‡†å¤‡éƒ¨ç½²**: âœ… æ˜¯
