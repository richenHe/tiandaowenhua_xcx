# æ•°æ®åº“å­—æ®µå¯¹é½ä¿®å¤è®¡åˆ’

## ğŸ“‹ é—®é¢˜æ¦‚è¿°

æ ¹æ®ç”¨æˆ·æä¾›çš„æˆªå›¾å’Œä»£ç åˆ†æï¼Œå‘ç°ä»¥ä¸‹æ ¸å¿ƒé—®é¢˜ï¼š

1. **åå°è¯¾ç¨‹åˆ—è¡¨æ— æ•°æ®**ï¼šç®¡ç†åå°æ˜¾ç¤ºç©ºåˆ—è¡¨ï¼Œä½†æ•°æ®åº“ä¸­ç¡®å®æœ‰è¯¾ç¨‹æ•°æ®
2. **å­—æ®µå±•ç¤ºç¼ºå¤±**ï¼šéƒ¨åˆ†å­—æ®µåœ¨å‰ç«¯é¡µé¢æ— æ³•æ­£ç¡®æ˜¾ç¤º
3. **å­—æ®µå‘½åä¸ä¸€è‡´**ï¼šæ•°æ®åº“ã€äº‘å‡½æ•°ã€å‰ç«¯ä¸‰å±‚æ¶æ„çš„å­—æ®µå‘½åä¸ç»Ÿä¸€

## ğŸ¯ ä¿®å¤ç›®æ ‡

1. ä¿®å¤åå°è¯¾ç¨‹åˆ—è¡¨æ•°æ®æŸ¥è¯¢é—®é¢˜
2. ç»Ÿä¸€æ‰€æœ‰æ¥å£çš„å­—æ®µå‘½åè§„èŒƒ
3. ç¡®ä¿æ•°æ®åº“å­—æ®µã€äº‘å‡½æ•°è¿”å›å­—æ®µã€å‰ç«¯ç±»å‹å®šä¹‰ä¸‰è€…å®Œå…¨å¯¹é½
4. è¡¥å……ç¼ºå¤±çš„å­—æ®µè¿”å›

## ğŸ“Š å­—æ®µå‘½åè§„èŒƒï¼ˆæ ‡å‡†ï¼‰

æ ¹æ® `å‰åç«¯è”é€šå®æ–½è®¡åˆ’.md` çš„è§„èŒƒï¼š

| å±‚çº§ | å‘½åè§„èŒƒ | ç¤ºä¾‹ | è¯´æ˜ |
|------|---------|------|------|
| æ•°æ®åº“å­—æ®µ | snake_case | `cover_image`, `current_price` | ä¸‹åˆ’çº¿å‘½å |
| äº‘å‡½æ•°æ¥æ”¶å‚æ•° | camelCase | `coverImage`, `currentPrice` | é©¼å³°å‘½å |
| äº‘å‡½æ•°è¿”å›æ•°æ® | snake_case | `cover_image`, `current_price` | ä¸æ•°æ®åº“ä¸€è‡´ |
| å‰ç«¯APIå‚æ•° | camelCase | `coverImage`, `currentPrice` | é©¼å³°å‘½å |
| å‰ç«¯é¡µé¢å˜é‡ | camelCase | `coverImage`, `currentPrice` | é©¼å³°å‘½å |

## ğŸ” é—®é¢˜è¯Šæ–­ç»“æœ

### é—®é¢˜1ï¼šåå°è¯¾ç¨‹åˆ—è¡¨æ— æ•°æ®

**å¯èƒ½åŸå› **ï¼š
1. äº‘å‡½æ•°è·¯ç”±é…ç½®é—®é¢˜ï¼ˆæœ€å¯èƒ½ï¼‰
2. ç®¡ç†å‘˜é‰´æƒéªŒè¯å¤±è´¥
3. SQLæŸ¥è¯¢æ¡ä»¶é”™è¯¯
4. æ•°æ®åº“è¿æ¥é…ç½®é—®é¢˜

**éœ€è¦æ£€æŸ¥çš„æ–‡ä»¶**ï¼š
- `cloudfunctions/course/index.js` - è·¯ç”±é…ç½®
- `cloudfunctions/course/handlers/admin/getCourseList.js` - æŸ¥è¯¢é€»è¾‘
- `admin/pages/course/list.html` - å‰ç«¯è°ƒç”¨

### é—®é¢˜2ï¼šå­—æ®µå‘½åä¸ä¸€è‡´

**å…·ä½“é—®é¢˜**ï¼š

#### åå°è¯¾ç¨‹åˆ—è¡¨é¡µé¢
- è¡¨æ ¼åˆ— `colKey: 'price'` åº”è¯¥æ˜¯ `current_price`
- è¡¨æ ¼åˆ— `colKey: 'image'` åº”è¯¥æ˜¯ `cover_image`
- æ¨¡æ¿æ’æ§½ `#image` åº”è¯¥æ˜¯ `#cover_image`
- ç¼ºå¤±å­—æ®µï¼š`nickname`, `original_price`, `sold_count`

#### äº‘å‡½æ•°å­—æ®µé—®é¢˜
- `course/createAppointment.js` ä½¿ç”¨ `current_students` åº”è¯¥æ˜¯ `booked_quota`
- `course/createAppointment.js` ä½¿ç”¨ `max_students` åº”è¯¥æ˜¯ `total_quota`
- `course/getClassRecords.js` è¿”å›å­—æ®µå‘½åä¸ä¸€è‡´
- `course/updateClassRecord.js` allowedFields å­—æ®µé”™è¯¯
- `order/getDetail.js` ä½¿ç”¨ `course_name` åº”è¯¥æ˜¯ `name`

### é—®é¢˜3ï¼šå­—æ®µç¼ºå¤±

**TypeScriptç±»å‹å®šä¹‰ç¼ºå¤±**ï¼š
- `Course` æ¥å£ç¼ºå°‘ `nickname` å­—æ®µ
- `Course` æ¥å£ç¼ºå°‘ `type_name` è¾…åŠ©å­—æ®µ

**äº‘å‡½æ•°è¿”å›å­—æ®µä¸å®Œæ•´**ï¼š
- éƒ¨åˆ†æ¥å£æœªè¿”å› `discount_amount`
- éƒ¨åˆ†æ¥å£æœªè¿”å› `user_nickname`
- éƒ¨åˆ†æ¥å£æœªè¿”å› `paid_amount`

## ğŸ“ ä¿®å¤è®¡åˆ’ï¼ˆåˆ†é˜¶æ®µå®æ–½ï¼‰

### é˜¶æ®µä¸€ï¼šè¯Šæ–­åå°è¯¾ç¨‹åˆ—è¡¨é—®é¢˜ï¼ˆP0 - æœ€é«˜ä¼˜å…ˆçº§ï¼‰

#### æ­¥éª¤1.1ï¼šæ£€æŸ¥äº‘å‡½æ•°è·¯ç”±é…ç½®

**æ–‡ä»¶**ï¼š`cloudfunctions/course/index.js`

**æ£€æŸ¥å†…å®¹**ï¼š
- ç¡®è®¤ `getCourseList` æ˜¯å¦æ­£ç¡®è·¯ç”±åˆ° `handlers/admin/getCourseList.js`
- ç¡®è®¤è·¯ç”±é€»è¾‘æ˜¯å¦æ”¯æŒç®¡ç†ç«¯æ¥å£

**å¯èƒ½çš„ä¿®å¤**ï¼š
```javascript
// å¦‚æœä½¿ç”¨ç›´æ¥æ˜ å°„
const handlers = {
  'getCourseList': require('./handlers/admin/getCourseList'),
  // ...
};

// å¦‚æœä½¿ç”¨å‰ç¼€åŒ¹é…
if (action.startsWith('admin:')) {
  const handlerName = action.replace('admin:', '');
  return require(`./handlers/admin/${handlerName}`)(event, context);
}
```

#### æ­¥éª¤1.2ï¼šæ·»åŠ è°ƒè¯•æ—¥å¿—

**æ–‡ä»¶**ï¼š`cloudfunctions/course/handlers/admin/getCourseList.js`

**æ·»åŠ æ—¥å¿—**ï¼š
```javascript
console.log('[getCourseList] å¼€å§‹æ‰§è¡Œ');
console.log('[getCourseList] æ¥æ”¶å‚æ•°:', JSON.stringify(event));
console.log('[getCourseList] æŸ¥è¯¢ç»“æœ:', { total, dataLength: courses?.length });
```

#### æ­¥éª¤1.3ï¼šéªŒè¯æ•°æ®åº“æŸ¥è¯¢

**æ£€æŸ¥SQLæŸ¥è¯¢**ï¼š
- ç¡®è®¤ `select` å­—æ®µæ˜¯å¦ä¸æ•°æ®åº“è¡¨ç»“æ„ä¸€è‡´
- ç¡®è®¤ `where` æ¡ä»¶æ˜¯å¦æ­£ç¡®
- ç¡®è®¤åˆ†é¡µå‚æ•°æ˜¯å¦æ­£ç¡®

#### æ­¥éª¤1.4ï¼šéƒ¨ç½²å¹¶æµ‹è¯•

**æ“ä½œ**ï¼š
1. éƒ¨ç½²äº‘å‡½æ•°
2. æ‰“å¼€åå°è¯¾ç¨‹åˆ—è¡¨é¡µé¢
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°å’Œäº‘å‡½æ•°æ—¥å¿—
4. æ ¹æ®æ—¥å¿—è¾“å‡ºå®šä½é—®é¢˜

---

### é˜¶æ®µäºŒï¼šä¿®å¤åå°è¯¾ç¨‹åˆ—è¡¨å­—æ®µå¯¹é½ï¼ˆP1 - é«˜ä¼˜å…ˆçº§ï¼‰

#### æ­¥éª¤2.1ï¼šä¿®æ­£è¡¨æ ¼åˆ—é…ç½®

**æ–‡ä»¶**ï¼š`admin/pages/course/list.html`

**ä¿®æ”¹ä½ç½®**ï¼šLine 450-462

**ä¿®æ”¹å†…å®¹**ï¼š
```javascript
const columns = [
  { colKey: 'id', title: 'ID', width: 80 },
  { colKey: 'cover_image', title: 'è¯¾ç¨‹å›¾ç‰‡', width: 100 },  // âœ… ä¿®æ­£
  { colKey: 'name', title: 'è¯¾ç¨‹åç§°', width: 150 },
  { colKey: 'nickname', title: 'è¯¾ç¨‹æ˜µç§°', width: 120 },    // âœ… æ–°å¢
  { colKey: 'type', title: 'è¯¾ç¨‹ç±»å‹', width: 100 },
  { colKey: 'current_price', title: 'ç°ä»·ï¼ˆå…ƒï¼‰', width: 100 },  // âœ… ä¿®æ­£
  { colKey: 'original_price', title: 'åŸä»·ï¼ˆå…ƒï¼‰', width: 100 }, // âœ… æ–°å¢
  { colKey: 'duration', title: 'è¯¾ç¨‹æ—¶é•¿', width: 100 },
  { colKey: 'sold_count', title: 'å·²å”®', width: 80 },       // âœ… æ–°å¢
  { colKey: 'sort_order', title: 'æ’åº', width: 80 },
  { colKey: 'status', title: 'çŠ¶æ€', width: 80 },
  { colKey: 'created_at', title: 'åˆ›å»ºæ—¶é—´', width: 160 },
  { colKey: 'operation', title: 'æ“ä½œ', width: 200, fixed: 'right' }
];
```

#### æ­¥éª¤2.2ï¼šä¿®æ­£æ¨¡æ¿æ’æ§½

**æ–‡ä»¶**ï¼š`admin/pages/course/list.html`

**ä¿®æ”¹ä½ç½®**ï¼šLine 250

**ä¿®æ”¹å†…å®¹**ï¼š
```html
<!-- è¯¾ç¨‹å›¾ç‰‡ -->
<template #cover_image="{ row }">  <!-- âœ… ä¿®æ­£æ’æ§½å -->
  <img
    v-if="row.cover_image"
    :src="row.cover_image"
    class="course-image"
    :alt="row.name"
  />
  <span v-else>-</span>
</template>
```

#### æ­¥éª¤2.3ï¼šä¿®æ­£ç¼–è¾‘è¡¨å•å­—æ®µæ˜ å°„

**æ–‡ä»¶**ï¼š`admin/pages/course/list.html`

**ä¿®æ”¹ä½ç½®**ï¼šLine 528-543

**ä¿®æ”¹å†…å®¹**ï¼š
```javascript
const editCourse = (course) => {
  editMode.value = 'edit';
  Object.assign(editForm, {
    id: course.id,
    name: course.name,
    nickname: course.nickname || '',           // âœ… æ–°å¢
    type: course.type,
    coverImage: course.cover_image,            // âœ… snake_case â†’ camelCase
    originalPrice: course.original_price,      // âœ… æ–°å¢
    currentPrice: course.current_price,        // âœ… ä¿®æ­£
    retrainPrice: course.retrain_price,        // âœ… æ–°å¢
    duration: course.duration,
    description: course.description,
    content: course.content,
    outline: course.outline,
    teacher: course.teacher,
    sortOrder: course.sort_order,              // âœ… snake_case â†’ camelCase
    status: course.status
  });
};
```

---

### é˜¶æ®µä¸‰ï¼šä¿®å¤äº‘å‡½æ•°å­—æ®µå¯¹é½ï¼ˆP1 - é«˜ä¼˜å…ˆçº§ï¼‰

#### æ­¥éª¤3.1ï¼šä¿®å¤è¯¾ç¨‹é¢„çº¦ç›¸å…³å­—æ®µ

**æ–‡ä»¶**ï¼š`cloudfunctions/course/handlers/client/createAppointment.js`

**é—®é¢˜**ï¼šä½¿ç”¨ `current_students` å’Œ `max_students`ï¼Œåº”è¯¥æ˜¯ `booked_quota` å’Œ `total_quota`

**ä¿®æ”¹ä½ç½®**ï¼šLine 30-35, Line 60-65

**ä¿®æ”¹å†…å®¹**ï¼š
```javascript
// æ£€æŸ¥åé¢ï¼ˆä¿®æ”¹å‰ï¼‰
if (classRecord.current_students >= classRecord.max_students) {
  return response.error('è¯¥è¯¾ç¨‹åé¢å·²æ»¡');
}

// æ£€æŸ¥åé¢ï¼ˆä¿®æ”¹åï¼‰
if (classRecord.booked_quota >= classRecord.total_quota) {
  return response.error('è¯¥è¯¾ç¨‹åé¢å·²æ»¡');
}

// æ›´æ–°åé¢ï¼ˆä¿®æ”¹å‰ï¼‰
.update({ current_students: classRecord.current_students + 1 })

// æ›´æ–°åé¢ï¼ˆä¿®æ”¹åï¼‰
.update({ booked_quota: classRecord.booked_quota + 1 })
```

#### æ­¥éª¤3.2ï¼šä¿®å¤è¯¾ç¨‹æ’æœŸè¿”å›å­—æ®µ

**æ–‡ä»¶**ï¼š`cloudfunctions/course/handlers/client/getClassRecords.js`

**é—®é¢˜**ï¼šè¿”å›å­—æ®µå‘½åä¸ä¸€è‡´

**ä¿®æ”¹ä½ç½®**ï¼šLine 80-95

**ä¿®æ”¹å†…å®¹**ï¼š
```javascript
// ä¿®æ”¹å‰
max_students: cr.total_quota,
current_students: cr.booked_quota,

// ä¿®æ”¹å
total_quota: cr.total_quota,
booked_quota: cr.booked_quota,
available_quota: cr.total_quota - cr.booked_quota,
```

#### æ­¥éª¤3.3ï¼šä¿®å¤è®¢å•è¯¦æƒ…å­—æ®µ

**æ–‡ä»¶**ï¼š`cloudfunctions/order/handlers/client/getDetail.js`

**é—®é¢˜**ï¼š
1. ç¼ºå°‘ `discount_amount` å­—æ®µè¿”å›
2. `user_name` å’Œ `user_phone` æ˜ å°„é”™è¯¯

**ä¿®æ”¹ä½ç½®**ï¼šLine 50-80

**ä¿®æ”¹å†…å®¹**ï¼š
```javascript
return response.success({
  order_no: order.order_no,
  order_type: order.order_type,
  order_name: order.order_name,
  original_amount: order.original_amount,
  discount_amount: order.discount_amount || 0,  // âœ… æ–°å¢
  final_amount: order.final_amount,
  user_name: order.user_name,                   // âœ… ç¡®ä¿è¿”å›
  user_phone: order.user_phone,                 // âœ… ç¡®ä¿è¿”å›
  pay_status: order.pay_status,
  pay_time: order.pay_time,
  pay_method: order.pay_method,
  referee_id: order.referee_id,
  referee_name: order.referee_name,
  referee_level: order.referee_level,
  course_id: order.related_id,
  course_name: course?.name || '',              // âœ… ä¿®æ­£å­—æ®µå
  created_at: order.created_at
});
```

#### æ­¥éª¤3.4ï¼šä¿®å¤åå°è®¢å•åˆ—è¡¨å­—æ®µ

**æ–‡ä»¶**ï¼š`cloudfunctions/order/handlers/admin/getOrderList.js`

**é—®é¢˜**ï¼šç¼ºå°‘ `user_nickname` å’Œ `paid_amount` å­—æ®µ

**ä¿®æ”¹ä½ç½®**ï¼šLine 60-90

**ä¿®æ”¹å†…å®¹**ï¼š
```javascript
// æŸ¥è¯¢æ—¶å…³è”ç”¨æˆ·è¡¨è·å–æ˜µç§°
const query = db.rdb('orders')
  .select(`
    orders.*,
    users.nickname as user_nickname,
    users.real_name as user_name,
    users.phone as user_phone
  `)
  .leftJoin('users', 'orders.user_id', 'users.id')
  .where('orders.order_type', orderType);

// è¿”å›æ—¶æ·»åŠ å­—æ®µ
return response.success({
  total,
  list: (orders || []).map(order => ({
    ...order,
    user_nickname: order.user_nickname || order.user_name,  // âœ… æ–°å¢
    paid_amount: order.final_amount,                        // âœ… æ–°å¢
    points_used: order.order_metadata?.points_used || 0     // âœ… æ–°å¢
  }))
});
```

---

### é˜¶æ®µå››ï¼šè¡¥å……TypeScriptç±»å‹å®šä¹‰ï¼ˆP2 - ä¸­ä¼˜å…ˆçº§ï¼‰

#### æ­¥éª¤4.1ï¼šè¡¥å……Courseæ¥å£

**æ–‡ä»¶**ï¼š`universal-cloudbase-uniapp-template/src/api/types/course.ts`

**ä¿®æ”¹ä½ç½®**ï¼šLine 10-61

**ä¿®æ”¹å†…å®¹**ï¼š
```typescript
export interface Course {
  id: number
  name: string
  nickname?: string           // âœ… æ–°å¢
  type: number
  type_name?: string          // âœ… æ–°å¢
  cover_image: string
  original_price: number
  current_price: number
  retrain_price: number
  description: string
  content?: string
  outline?: string
  duration?: string
  teacher?: string
  allow_retrain?: boolean
  included_course_ids?: number[]
  stock?: number
  sold_count?: number         // âœ… ç¡®ä¿å­˜åœ¨
  sort_order?: number
  status: number
  created_at?: string
  updated_at?: string
  is_purchased?: boolean
  user_course_id?: number | null
  attend_count?: number
}
```

#### æ­¥éª¤4.2ï¼šè¡¥å……Orderæ¥å£

**æ–‡ä»¶**ï¼š`universal-cloudbase-uniapp-template/src/api/types/order.ts`

**ä¿®æ”¹å†…å®¹**ï¼š
```typescript
export interface Order {
  id: number
  order_no: string
  order_type: number
  order_name: string
  original_amount: number
  discount_amount: number     // âœ… ç¡®ä¿å­˜åœ¨
  final_amount: number
  user_name?: string          // âœ… ç¡®ä¿å­˜åœ¨
  user_phone?: string         // âœ… ç¡®ä¿å­˜åœ¨
  pay_status: number
  pay_time?: string
  pay_method?: string
  referee_id?: number
  referee_name?: string
  referee_level?: number
  course_id?: number
  course_name?: string
  created_at: string
}
```

---

### é˜¶æ®µäº”ï¼šéªŒè¯å’Œæµ‹è¯•ï¼ˆP2 - ä¸­ä¼˜å…ˆçº§ï¼‰

#### æµ‹è¯•æ¸…å•

**åå°ç®¡ç†ç³»ç»Ÿæµ‹è¯•**ï¼š
- [ ] è¯¾ç¨‹åˆ—è¡¨æ˜¯å¦æ˜¾ç¤ºæ•°æ®
- [ ] è¯¾ç¨‹å›¾ç‰‡æ˜¯å¦æ­£å¸¸æ˜¾ç¤º
- [ ] æ‰€æœ‰å­—æ®µæ˜¯å¦å®Œæ•´å±•ç¤ºï¼ˆIDã€å›¾ç‰‡ã€åç§°ã€æ˜µç§°ã€ç±»å‹ã€åŸä»·ã€ç°ä»·ã€æ—¶é•¿ã€å·²å”®ã€æ’åºã€çŠ¶æ€ã€åˆ›å»ºæ—¶é—´ï¼‰
- [ ] æœç´¢åŠŸèƒ½æ˜¯å¦æ­£å¸¸
- [ ] åˆ†é¡µåŠŸèƒ½æ˜¯å¦æ­£å¸¸
- [ ] ç¼–è¾‘è¯¾ç¨‹æ—¶å­—æ®µæ˜¯å¦æ­£ç¡®å›å¡«
- [ ] ä¿å­˜è¯¾ç¨‹åæ•°æ®æ˜¯å¦æ­£ç¡®

**å°ç¨‹åºæµ‹è¯•**ï¼š
- [ ] è¯¾ç¨‹åˆ—è¡¨æ˜¯å¦æ˜¾ç¤ºæ•°æ®
- [ ] è¯¾ç¨‹è¯¦æƒ…å­—æ®µæ˜¯å¦å®Œæ•´
- [ ] è®¢å•è¯¦æƒ…å­—æ®µæ˜¯å¦å®Œæ•´ï¼ˆåŒ…æ‹¬ä¼˜æƒ é‡‘é¢ã€ç”¨æˆ·ä¿¡æ¯ï¼‰
- [ ] è¯¾ç¨‹æ’æœŸåé¢æ˜¾ç¤ºæ˜¯å¦æ­£ç¡®
- [ ] é¢„çº¦åŠŸèƒ½æ˜¯å¦æ­£å¸¸

**å­—æ®µå¯¹é½æµ‹è¯•**ï¼š
- [ ] åå°åˆ›å»ºè¯¾ç¨‹ï¼Œå°ç¨‹åºèƒ½å¦æ­£ç¡®æ˜¾ç¤º
- [ ] å°ç¨‹åºä¸‹å•ï¼Œåå°èƒ½å¦æ­£ç¡®æ˜¾ç¤ºè®¢å•ä¿¡æ¯
- [ ] æ‰€æœ‰é‡‘é¢å­—æ®µæ˜¯å¦å‡†ç¡®ï¼ˆåŸä»·ã€ç°ä»·ã€ä¼˜æƒ ã€å®ä»˜ï¼‰
- [ ] æ‰€æœ‰åé¢å­—æ®µæ˜¯å¦å‡†ç¡®ï¼ˆæ€»åé¢ã€å·²é¢„çº¦ã€å¯ç”¨åé¢ï¼‰

---

## ğŸ”‘ å…³é”®æ–‡ä»¶æ¸…å•

### å¿…é¡»ä¿®æ”¹çš„æ–‡ä»¶ï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åºï¼‰

1. **`cloudfunctions/course/index.js`**
   - æ£€æŸ¥è·¯ç”±é…ç½®
   - ç¡®ä¿ `getCourseList` æ­£ç¡®è·¯ç”±

2. **`cloudfunctions/course/handlers/admin/getCourseList.js`**
   - æ·»åŠ è°ƒè¯•æ—¥å¿—
   - éªŒè¯æŸ¥è¯¢é€»è¾‘

3. **`admin/pages/course/list.html`**
   - ä¿®æ­£è¡¨æ ¼åˆ— `colKey`
   - ä¿®æ­£æ¨¡æ¿æ’æ§½åç§°
   - ä¿®æ­£ç¼–è¾‘è¡¨å•å­—æ®µæ˜ å°„

4. **`cloudfunctions/course/handlers/client/createAppointment.js`**
   - ä¿®æ­£ `current_students` â†’ `booked_quota`
   - ä¿®æ­£ `max_students` â†’ `total_quota`

5. **`cloudfunctions/course/handlers/client/getClassRecords.js`**
   - ä¿®æ­£è¿”å›å­—æ®µå‘½å

6. **`cloudfunctions/order/handlers/client/getDetail.js`**
   - æ·»åŠ  `discount_amount` è¿”å›
   - ä¿®æ­£ `course_name` å­—æ®µ

7. **`cloudfunctions/order/handlers/admin/getOrderList.js`**
   - æ·»åŠ  `user_nickname` è¿”å›
   - æ·»åŠ  `paid_amount` è¿”å›

8. **`universal-cloudbase-uniapp-template/src/api/types/course.ts`**
   - è¡¥å…… `nickname` å­—æ®µ
   - è¡¥å…… `type_name` å­—æ®µ

9. **`universal-cloudbase-uniapp-template/src/api/types/order.ts`**
   - ç¡®ä¿ `discount_amount` å­—æ®µ
   - ç¡®ä¿ `user_name` å’Œ `user_phone` å­—æ®µ

---

## ğŸ“‹ å®æ–½æ­¥éª¤æ€»ç»“

### ç¬¬ä¸€å¤©ï¼šè¯Šæ–­å’Œä¿®å¤åå°è¯¾ç¨‹åˆ—è¡¨

1. æ£€æŸ¥äº‘å‡½æ•°è·¯ç”±é…ç½®
2. æ·»åŠ è°ƒè¯•æ—¥å¿—
3. éƒ¨ç½²äº‘å‡½æ•°
4. æµ‹è¯•åå°è¯¾ç¨‹åˆ—è¡¨
5. æ ¹æ®æ—¥å¿—å®šä½é—®é¢˜
6. ä¿®å¤é—®é¢˜å¹¶é‡æ–°éƒ¨ç½²

### ç¬¬äºŒå¤©ï¼šä¿®å¤å­—æ®µå¯¹é½é—®é¢˜

1. ä¿®æ­£åå°è¡¨æ ¼åˆ—é…ç½®
2. ä¿®æ­£æ¨¡æ¿æ’æ§½åç§°
3. ä¿®æ­£ç¼–è¾‘è¡¨å•å­—æ®µæ˜ å°„
4. ä¿®å¤äº‘å‡½æ•°å­—æ®µå‘½å
5. éƒ¨ç½²æ‰€æœ‰ä¿®æ”¹
6. æµ‹è¯•åå°å’Œå°ç¨‹åº

### ç¬¬ä¸‰å¤©ï¼šè¡¥å……ç±»å‹å®šä¹‰å’Œå…¨é¢æµ‹è¯•

1. è¡¥å……TypeScriptç±»å‹å®šä¹‰
2. æ‰§è¡Œå®Œæ•´çš„æµ‹è¯•æ¸…å•
3. ä¿®å¤å‘ç°çš„é—®é¢˜
4. æ–‡æ¡£æ›´æ–°

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¤‡ä»½æ•°æ®**ï¼šä¿®æ”¹å‰å…ˆå¤‡ä»½æ•°æ®åº“å’Œä»£ç 
2. **åˆ†æ”¯ç®¡ç†**ï¼šåœ¨æ–°åˆ†æ”¯ä¸Šè¿›è¡Œä¿®æ”¹ï¼Œæµ‹è¯•é€šè¿‡åå†åˆå¹¶
3. **é€æ­¥éƒ¨ç½²**ï¼šå…ˆéƒ¨ç½²äº‘å‡½æ•°ï¼Œæµ‹è¯•é€šè¿‡åå†ä¿®æ”¹å‰ç«¯
4. **æ—¥å¿—ç›‘æ§**ï¼šä¿®æ”¹åå¯†åˆ‡å…³æ³¨äº‘å‡½æ•°æ—¥å¿—
5. **å›æ»šå‡†å¤‡**ï¼šå¦‚æœå‡ºç°é—®é¢˜ï¼Œå‡†å¤‡å¥½å¿«é€Ÿå›æ»šæ–¹æ¡ˆ

---

## ğŸ“Š é¢„æœŸæˆæœ

ä¿®å¤å®Œæˆåï¼Œåº”è¯¥è¾¾åˆ°ä»¥ä¸‹æ•ˆæœï¼š

1. âœ… åå°è¯¾ç¨‹åˆ—è¡¨æ­£å¸¸æ˜¾ç¤ºæ•°æ®
2. âœ… æ‰€æœ‰å­—æ®µå®Œæ•´å±•ç¤ºï¼Œæ— ç¼ºå¤±
3. âœ… æ•°æ®åº“ã€äº‘å‡½æ•°ã€å‰ç«¯ä¸‰å±‚å­—æ®µå®Œå…¨å¯¹é½
4. âœ… å­—æ®µå‘½åç¬¦åˆç»Ÿä¸€è§„èŒƒ
5. âœ… å°ç¨‹åºå’Œåå°æ•°æ®ä¸€è‡´
6. âœ… æ‰€æœ‰åŠŸèƒ½æ­£å¸¸è¿è¡Œ

---

## ğŸ¯ éªŒè¯æ ‡å‡†

### æ•°æ®å±•ç¤ºéªŒè¯
- åå°è¯¾ç¨‹åˆ—è¡¨æ˜¾ç¤ºè‡³å°‘1æ¡æ•°æ®
- æ‰€æœ‰è¡¨æ ¼åˆ—éƒ½æœ‰æ•°æ®ï¼ˆéç©ºæˆ–é»˜è®¤å€¼ï¼‰
- å›¾ç‰‡æ­£å¸¸åŠ è½½æ˜¾ç¤º

### å­—æ®µå¯¹é½éªŒè¯
- æ•°æ®åº“å­—æ®µä½¿ç”¨ snake_case
- äº‘å‡½æ•°è¿”å›ä½¿ç”¨ snake_case
- å‰ç«¯APIå‚æ•°ä½¿ç”¨ camelCase
- TypeScriptç±»å‹å®šä¹‰å®Œæ•´

### åŠŸèƒ½éªŒè¯
- æœç´¢ã€ç­›é€‰ã€åˆ†é¡µåŠŸèƒ½æ­£å¸¸
- åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤åŠŸèƒ½æ­£å¸¸
- å°ç¨‹åºå’Œåå°æ•°æ®åŒæ­¥

---

**è®¡åˆ’åˆ›å»ºæ—¶é—´**ï¼š2026-02-13
**é¢„è®¡å®Œæˆæ—¶é—´**ï¼š3ä¸ªå·¥ä½œæ—¥
**é£é™©ç­‰çº§**ï¼šä¸­ç­‰ï¼ˆéœ€è¦ä¿®æ”¹å¤šä¸ªæ–‡ä»¶ï¼Œä½†éƒ½æ˜¯å­—æ®µå¯¹é½ç±»ä¿®æ”¹ï¼Œé£é™©å¯æ§ï¼‰
