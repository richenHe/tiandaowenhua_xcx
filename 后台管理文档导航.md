# 天道文化 - 后台管理系统文档导航

> **更新日期**: 2026-02-12  
> **项目名称**: 天道文化小程序  
> **技术栈**: CloudBase 云函数 + 微信小程序

---

## 📚 文档清单

### 核心文档

| 文档 | 说明 | 适用场景 |
|-----|------|---------|
| [后台管理接口文档.md](./后台管理接口文档.md) | **完整详细的 API 文档** | 需要了解接口详细参数、返回值、业务逻辑 |
| [后台管理API快速参考.md](./后台管理API快速参考.md) | **快速参考指南** | 快速查找常用接口、查看代码示例 |
| [后台管理接口汇总表.md](./后台管理接口汇总表.md) | **接口汇总表格** | 快速浏览所有接口、按功能分类查找 |

---

## 🎯 快速导航

### 按使用场景导航

#### 🆕 初次开发
1. 先看 **[后台管理接口文档.md](./后台管理接口文档.md)** 了解整体架构
2. 参考 **[后台管理API快速参考.md](./后台管理API快速参考.md)** 的"快速开始"章节
3. 按照示例代码完成认证和第一个接口调用

#### 🔍 查找接口
1. 打开 **[后台管理接口汇总表.md](./后台管理接口汇总表.md)**
2. 按模块或功能分类找到目标接口
3. 查看详细参数和示例

#### 💡 参考示例
1. 打开 **[后台管理API快速参考.md](./后台管理API快速参考.md)**
2. 查看"常用接口示例"章节
3. 复制代码模板进行修改

---

## 📖 文档详解

### 1. 后台管理接口文档 (完整版)

**文件**: `后台管理接口文档.md`  
**页数**: 约 200 行  
**内容**:
- ✅ 通用说明（调用方式、响应格式、状态码、鉴权）
- ✅ 认证与鉴权（管理员登录）
- ✅ 用户管理（4个接口）
- ✅ 订单管理（4个接口）
- ✅ 课程管理（20个接口）
- ✅ 大使管理（15个接口）
- ✅ 系统管理（21个接口）
- ✅ 附录（模块说明、数据库表、枚举值）

**适用人群**: 
- 后端开发人员
- 前端开发人员
- 产品经理
- 测试人员

**推荐使用方式**:
- 初次开发时完整阅读
- 开发过程中查阅详细参数
- 接口对接时参考响应格式

---

### 2. 后台管理API快速参考 (实战版)

**文件**: `后台管理API快速参考.md`  
**页数**: 约 180 行  
**内容**:
- ✅ 快速开始（HTTP调用、鉴权流程）
- ✅ 所有管理端接口清单（按模块分类）
- ✅ 常用接口示例（7个实战示例）
- ✅ 枚举值参考（状态码、类型等）
- ✅ 统一错误处理（错误码、处理方式）
- ✅ 开发建议（封装API、分页组件）

**适用人群**:
- Web 后台开发人员
- 前端开发人员
- 需要快速上手的开发者

**推荐使用方式**:
- 开发前先看"快速开始"
- 开发中查阅"常用接口示例"
- 遇到问题看"统一错误处理"
- 优化代码时参考"开发建议"

---

### 3. 后台管理接口汇总表 (索引版)

**文件**: `后台管理接口汇总表.md`  
**页数**: 约 120 行  
**内容**:
- ✅ 接口统计（80+ 个接口）
- ✅ 用户管理接口表（4个）
- ✅ 订单管理接口表（4个）
- ✅ 课程管理接口表（20个，分5个子分类）
- ✅ 大使管理接口表（15个，分4个子分类）
- ✅ 系统管理接口表（21个，分7个子分类）
- ✅ 分类索引（按功能分类）
- ✅ 使用统计（Top 10 常用接口）

**适用人群**:
- 所有开发人员
- 产品经理
- 项目管理人员

**推荐使用方式**:
- 快速查找某个接口
- 了解某个模块的所有接口
- 按功能分类浏览接口

---

## 🚀 快速开始指南

### Step 1: 管理员登录

```javascript
// 安装 SDK
npm install @cloudbase/node-sdk

// 初始化
const cloudbase = require('@cloudbase/node-sdk');
const app = cloudbase.init({
  env: 'cloud1-0gnn3mn17b581124',
  secretId: 'YOUR_SECRET_ID',
  secretKey: 'YOUR_SECRET_KEY'
});

// 登录
const result = await app.callFunction({
  name: 'system',
  data: {
    action: 'login',
    username: 'admin',
    password: '123456'
  }
});

const { token } = result.result.data;
```

### Step 2: 调用接口

```javascript
// 携带 token 调用接口
const result = await app.callFunction({
  name: 'user',
  data: {
    action: 'getUserList',
    jwtToken: token,  // 必须携带
    page: 1,
    pageSize: 20
  }
});

console.log(result.result);
```

---

## 🔍 快速查找

### 按模块查找

| 模块 | 接口数 | 快速跳转 |
|-----|-------|---------|
| 用户管理 | 4个 | [汇总表 §1](./后台管理接口汇总表.md#1️⃣-用户管理模块-user) |
| 订单管理 | 4个 | [汇总表 §2](./后台管理接口汇总表.md#2️⃣-订单管理模块-order) |
| 课程管理 | 20个 | [汇总表 §3](./后台管理接口汇总表.md#3️⃣-课程管理模块-course) |
| 大使管理 | 15个 | [汇总表 §4](./后台管理接口汇总表.md#4️⃣-大使管理模块-ambassador) |
| 系统管理 | 21个 | [汇总表 §5](./后台管理接口汇总表.md#5️⃣-系统管理模块-system) |

### 按功能查找

| 功能 | 相关接口 | 快速跳转 |
|-----|---------|---------|
| 查询列表 | 26个 | [汇总表 - 查询类](./后台管理接口汇总表.md#-查询类接口26个) |
| 创建数据 | 10个 | [汇总表 - 创建类](./后台管理接口汇总表.md#-创建类接口10个) |
| 更新数据 | 11个 | [汇总表 - 更新类](./后台管理接口汇总表.md#-更新类接口11个) |
| 删除数据 | 10个 | [汇总表 - 删除类](./后台管理接口汇总表.md#️-删除类接口10个) |
| 审核操作 | 2个 | [汇总表 - 审核类](./后台管理接口汇总表.md#-审核类接口2个) |
| 批量操作 | 1个 | [汇总表 - 批量操作](./后台管理接口汇总表.md#-批量操作接口1个) |

---

## 💡 常见问题

### Q1: Token 过期怎么办？
**A**: Token 有效期为 24 小时，过期后需要重新登录获取新 token。建议在前端做好 token 过期处理，自动跳转到登录页。

**参考**: [API快速参考 - 统一错误处理](./后台管理API快速参考.md#🛠️-统一错误处理)

---

### Q2: 如何进行分页查询？
**A**: 大部分列表接口都支持分页，使用 `page` 和 `pageSize`（或 `page_size`）参数。

**示例**:
```javascript
{
  page: 1,        // 第几页（从1开始）
  pageSize: 20    // 每页数量
}
```

**参考**: [API快速参考 - 分页组件封装](./后台管理API快速参考.md#3-分页组件封装建议)

---

### Q3: 如何进行搜索和筛选？
**A**: 大部分列表接口支持 `keyword` 参数进行关键词搜索，以及各种筛选参数。

**示例**:
```javascript
{
  page: 1,
  pageSize: 20,
  keyword: '张三',           // 关键词搜索
  ambassadorLevel: 1,       // 等级筛选
  startDate: '2025-01-01',  // 时间范围
  endDate: '2025-12-31'
}
```

**参考**: [完整文档 - 获取学员列表](./后台管理接口文档.md#21-获取学员列表)

---

### Q4: 如何处理批量操作？
**A**: 目前仅支持批量签到，其他批量操作可以通过循环调用单个接口实现。

**示例**:
```javascript
// 批量签到
await app.callFunction({
  name: 'course',
  data: {
    action: 'batchCheckin',
    jwtToken: token,
    appointment_ids: [101, 102, 103]
  }
});
```

**参考**: [API快速参考 - 批量签到示例](./后台管理API快速参考.md#6-批量签到)

---

### Q5: 如何调试接口？
**A**: 
1. 使用 Postman 或类似工具直接调用云函数
2. 在代码中添加 `console.log` 查看请求和响应
3. 查看 CloudBase 控制台的云函数日志

**参考**: [完整文档 - 通用说明](./后台管理接口文档.md#🔐-通用说明)

---

## 📊 接口使用建议

### 高频接口（建议做缓存）
- `getStatistics` - 统计数据（5分钟缓存）
- `getConfig` - 系统配置（30分钟缓存）
- `getAmbassadorLevelConfigs` - 等级配置（1小时缓存）

### 慢查询接口（建议做优化）
- `getUserDetail` - 学员详情（涉及多表查询）
- `getAmbassadorDetail` - 大使详情（涉及统计计算）

### 敏感操作接口（建议二次确认）
- `refund` - 订单退款
- `withdrawAudit` - 提现审核
- `deleteAdminUser` - 删除管理员

---

## 🔗 相关资源

### 项目文档
- [项目开发规范](../项目开发规范.md)
- [云函数开发规范](../云函数标准部署规范.md)
- [数据库设计文档](../docs/database/)

### 外部资源
- [CloudBase 官方文档](https://docs.cloudbase.net/)
- [微信小程序开发文档](https://developers.weixin.qq.com/miniprogram/dev/framework/)
- [TDesign 组件库](https://tdesign.tencent.com/)

---

## 📮 联系与反馈

如果文档有任何问题或建议，请联系技术团队。

**文档维护**: 天道文化技术团队  
**最后更新**: 2026-02-12  
**版本**: v1.0

---

## 📝 更新日志

### v1.0 (2026-02-12)
- ✅ 创建完整的后台管理接口文档
- ✅ 创建 API 快速参考指南
- ✅ 创建接口汇总表
- ✅ 创建文档导航页面
- ✅ 整理 80+ 个管理端接口
- ✅ 提供丰富的代码示例
- ✅ 按模块和功能分类整理

---

**祝开发顺利！** 🚀









